var Hx=Object.defineProperty,qx=Object.defineProperties;var Gx=Object.getOwnPropertyDescriptors;var Iu=Object.getOwnPropertySymbols;var VE=Object.prototype.hasOwnProperty,UE=Object.prototype.propertyIsEnumerable;var LE=(t,e,n)=>e in t?Hx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||={})VE.call(e,n)&&LE(t,n,e[n]);if(Iu)for(var n of Iu(e))UE.call(e,n)&&LE(t,n,e[n]);return t},ue=(t,e)=>qx(t,Gx(e));var jE=(t,e)=>{var n={};for(var r in t)VE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Iu)for(var r of Iu(t))e.indexOf(r)<0&&UE.call(t,r)&&(n[r]=t[r]);return n};var g=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var BE=null;var ep=1,tp=Symbol("SIGNAL");function ie(t){let e=BE;return BE=t,e}var $E={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zx(t){if(!(ip(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ep)){if(!t.producerMustRecompute(t)&&!np(t)){t.dirty=!1,t.lastCleanEpoch=ep;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ep}}function HE(t){return t&&(t.nextProducerIndex=0),ie(t)}function qE(t,e){if(ie(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ip(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)rp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function np(t){Eu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(zx(n),r!==n.version))return!0}return!1}function GE(t){if(Eu(t),ip(t))for(let e=0;e<t.producerNode.length;e++)rp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function rp(t,e){if(Wx(t),Eu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)rp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Eu(i),i.producerIndexOfThis[r]=e}}function ip(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Eu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Wx(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Kx(){throw new Error}var Qx=Kx;function zE(t){Qx=t}function L(t){return typeof t=="function"}function es(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Cu=es(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Wr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(s){e=s instanceof Cu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{WE(s)}catch(o){e=e??[],o instanceof Cu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Cu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)WE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Wr(n,e)}remove(e){let{_finalizers:n}=this;n&&Wr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var sp=Se.EMPTY;function Tu(t){return t instanceof Se||t&&"closed"in t&&L(t.remove)&&L(t.add)&&L(t.unsubscribe)}function WE(t){L(t)?t():t.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ts={setTimeout(t,e,...n){let{delegate:r}=ts;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ts;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Du(t){ts.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(t);else throw t})}function $o(){}var KE=op("C",void 0,void 0);function QE(t){return op("E",void 0,t)}function YE(t){return op("N",t,void 0)}function op(t,e,n){return{kind:t,value:e,error:n}}var Kr=null;function ns(t){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!Kr;if(e&&(Kr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Kr;if(Kr=null,n)throw r}}else t()}function JE(t){Qt.useDeprecatedSynchronousErrorHandling&&Kr&&(Kr.errorThrown=!0,Kr.error=t)}var Qr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tu(e)&&e.add(this)):this.destination=Xx}static create(e,n,r){return new rs(e,n,r)}next(e){this.isStopped?cp(YE(e),this):this._next(e)}error(e){this.isStopped?cp(QE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cp(KE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Yx=Function.prototype.bind;function ap(t,e){return Yx.call(t,e)}var up=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){bu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){bu(r)}else bu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bu(n)}}},rs=class extends Qr{constructor(e,n,r){super();let i;if(L(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ap(e.next,s),error:e.error&&ap(e.error,s),complete:e.complete&&ap(e.complete,s)}):i=e}this.destination=new up(i)}};function bu(t){Qt.useDeprecatedSynchronousErrorHandling?JE(t):Du(t)}function Jx(t){throw t}function cp(t,e){let{onStoppedNotification:n}=Qt;n&&ts.setTimeout(()=>n(t,e))}var Xx={closed:!0,next:$o,error:Jx,complete:$o};var is=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bt(t){return t}function Su(...t){return lp(t)}function lp(t){return t.length===0?bt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var K=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=eO(n)?n:new rs(n,r,i);return ns(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=XE(r),new r((i,s)=>{let o=new rs({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[is](){return this}pipe(...n){return lp(n)(this)}toPromise(n){return n=XE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function XE(t){var e;return(e=t??Qt.Promise)!==null&&e!==void 0?e:Promise}function Zx(t){return t&&L(t.next)&&L(t.error)&&L(t.complete)}function eO(t){return t&&t instanceof Qr||Zx(t)&&Tu(t)}function dp(t){return L(t?.lift)}function Z(t){return e=>{if(dp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new hp(t,e,n,r,i)}var hp=class extends Qr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ss(){return Z((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var os=class extends K{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return ss()(this)}};var ZE=es(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Au(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ZE}next(n){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?sp:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,Wr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new K;return n.source=this,n}}return t.create=(e,n)=>new Au(e,n),t})(),Au=class extends nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:sp}};var ze=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fp={now(){return(fp.delegate||Date).now()},delegate:void 0};var Ru=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var Ho={setInterval(t,e,...n){let{delegate:r}=Ho;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ho;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var as=class extends Ru{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ho.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ho.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Wr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var cs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};cs.now=fp.now;var us=class extends cs{constructor(e,n=cs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var pp=new us(as);var Nu=class extends as{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Mu=class extends us{};var gp=new Mu(Nu);var St=new K(t=>t.complete());function eC(t){return t&&L(t.schedule)}function tC(t){return t[t.length-1]}function Pu(t){return L(tC(t))?t.pop():void 0}function dr(t){return eC(tC(t))?t.pop():void 0}function mp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rC(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function nC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yr(t){return this instanceof Yr?(this.v=t,this):new Yr(t)}function iC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,y){s.push([h,f,p,y])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof Yr?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function sC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nC=="function"?nC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var xu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ou(t){return L(t?.then)}function ku(t){return L(t[is])}function Fu(t){return Symbol.asyncIterator&&L(t?.[Symbol.asyncIterator])}function Lu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=tO();function Uu(t){return L(t?.[Vu])}function ju(t){return iC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Yr(n.read());if(i)return yield Yr(void 0);yield yield Yr(r)}}finally{n.releaseLock()}})}function Bu(t){return L(t?.getReader)}function Re(t){if(t instanceof K)return t;if(t!=null){if(ku(t))return nO(t);if(xu(t))return rO(t);if(Ou(t))return iO(t);if(Fu(t))return oC(t);if(Uu(t))return sO(t);if(Bu(t))return oO(t)}throw Lu(t)}function nO(t){return new K(e=>{let n=t[is]();if(L(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rO(t){return new K(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iO(t){return new K(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Du)})}function sO(t){return new K(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function oC(t){return new K(e=>{aO(t,e).catch(n=>e.error(n))})}function oO(t){return oC(ju(t))}function aO(t,e){var n,r,i,s;return rC(this,void 0,void 0,function*(){try{for(n=sC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function hr(t,e=0){return Z((n,r)=>{n.subscribe(Q(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function fr(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function aC(t,e){return Re(t).pipe(fr(e),hr(e))}function cC(t,e){return Re(t).pipe(fr(e),hr(e))}function uC(t,e){return new K(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function lC(t,e){return new K(n=>{let r;return wt(n,e,()=>{r=t[Vu](),wt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function $u(t,e){if(!t)throw new Error("Iterable cannot be null");return new K(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function dC(t,e){return $u(ju(t),e)}function hC(t,e){if(t!=null){if(ku(t))return aC(t,e);if(xu(t))return uC(t,e);if(Ou(t))return cC(t,e);if(Fu(t))return $u(t,e);if(Uu(t))return lC(t,e);if(Bu(t))return dC(t,e)}throw Lu(t)}function ge(t,e){return e?hC(t,e):Re(t)}function P(...t){let e=dr(t);return ge(t,e)}function ls(t,e){let n=L(t)?t:()=>t,r=i=>i.error(n());return new K(e?i=>e.schedule(r,0,i):r)}function yp(t){return!!t&&(t instanceof K||L(t.lift)&&L(t.subscribe))}var $n=es(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:cO}=Array;function uO(t,e){return cO(e)?t(...e):t(e)}function Hu(t){return $(e=>uO(t,e))}var{isArray:lO}=Array,{getPrototypeOf:dO,prototype:hO,keys:fO}=Object;function qu(t){if(t.length===1){let e=t[0];if(lO(e))return{args:e,keys:null};if(pO(e)){let n=fO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pO(t){return t&&typeof t=="object"&&dO(t)===hO}function Gu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qo(...t){let e=dr(t),n=Pu(t),{args:r,keys:i}=qu(t);if(r.length===0)return ge([],e);let s=new K(gO(r,e,i?o=>Gu(i,o):bt));return n?s.pipe(Hu(n)):s}function gO(t,e,n=bt){return r=>{fC(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)fC(e,()=>{let u=ge(t[c],e),l=!1;u.subscribe(Q(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function fC(t,e,n){t?wt(n,t,e):e()}function pC(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=y=>u<r?p(y):c.push(y),p=y=>{s&&e.next(y),u++;let v=!1;Re(n(y,l++)).subscribe(Q(e,D=>{i?.(D),s?f(D):e.next(D)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;c.length&&u<r;){let D=c.shift();o?wt(e,o,()=>p(D)):p(D)}h()}catch(D){e.error(D)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(t,e,n=1/0){return L(e)?Ne((r,i)=>$((s,o)=>e(r,s,i,o))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>pC(r,i,t,n)))}function pr(t=1/0){return Ne(bt,t)}function gC(){return pr(1)}function ds(...t){return gC()(ge(t,dr(t)))}function zu(t){return new K(e=>{Re(t()).subscribe(e)})}function vp(...t){let e=Pu(t),{args:n,keys:r}=qu(t),i=new K(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;Re(n[l]).subscribe(Q(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?Gu(r,a):a),s.complete())}))}});return e?i.pipe(Hu(e)):i}function It(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,s=>t.call(e,s,i++)&&r.next(s)))})}function gr(t){return Z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Q(n,void 0,void 0,o=>{s=Re(t(o,gr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function mC(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(Q(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function mr(t,e){return L(e)?Ne(t,e,1):Ne(t,1)}function yr(t){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Hn(t){return t<=0?()=>St:Z((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _p(t){return $(()=>t)}function Wu(t=mO){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mO(){return new $n}function hs(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):bt,Hn(1),n?yr(e):Wu(()=>new $n))}function fs(t){return t<=0?()=>St:Z((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):bt,fs(1),n?yr(e):Wu(()=>new $n))}function Ku(t,e){return Z(mC(t,e,arguments.length>=2,!0))}function Qu(...t){let e=dr(t);return Z((n,r)=>{(e?ds(t,n,e):ds(t,n)).subscribe(r)})}function At(t,e){return Z((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Q(r,c=>{i?.unsubscribe();let u=0,l=s++;Re(t(c,l)).subscribe(i=Q(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ip(t){return Z((e,n)=>{Re(t).subscribe(Q(n,()=>n.complete(),$o)),!n.closed&&e.subscribe(n)})}function Ae(t,e,n){let r=L(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):bt}var nT="https://g.co/ng/security#xss",S=class extends Error{constructor(e,n){super(Fl(e,n)),this.code=e}};function Fl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function sa(t){return{toString:t}.toString()}var Yu="__parameters__";function yO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rT(t,e,n){return sa(()=>{let r=yO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Yu)?c[Yu]:Object.defineProperty(c,Yu,{value:[]})[Yu];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var We=globalThis;function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function vO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var _O=fe({__forward_ref__:fe});function ci(t){return t.__forward_ref__=ci,t.toString=function(){return pt(this())},t}function ft(t){return iT(t)?t():t}function iT(t){return typeof t=="function"&&t.hasOwnProperty(_O)&&t.__forward_ref__===ci}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ll(t){return vC(t,oT)||vC(t,aT)}function sT(t){return Ll(t)!==null}function vC(t,e){return t.hasOwnProperty(e)?t[e]:null}function wO(t){let e=t&&(t[oT]||t[aT]);return e||null}function _C(t){return t&&(t.hasOwnProperty(wC)||t.hasOwnProperty(IO))?t[wC]:null}var oT=fe({\u0275prov:fe}),wC=fe({\u0275inj:fe}),aT=fe({ngInjectableDef:fe}),IO=fe({ngInjectorDef:fe}),A=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cT(t){return t&&!!t.\u0275providers}var EO=fe({\u0275cmp:fe}),CO=fe({\u0275dir:fe}),TO=fe({\u0275pipe:fe}),DO=fe({\u0275mod:fe}),ll=fe({\u0275fac:fe}),zo=fe({__NG_ELEMENT_ID__:fe}),IC=fe({__NG_ENV_ID__:fe});function Vl(t){return typeof t=="string"?t:t==null?"":String(t)}function bO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vl(t)}function SO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,t)}function xg(t,e){throw new S(-201,!1)}var z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(z||{}),Vp;function uT(){return Vp}function Et(t){let e=Vp;return Vp=t,e}function lT(t,e,n){let r=Ll(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&z.Optional)return null;if(e!==void 0)return e;xg(t,"Injector")}var AO={},Ko=AO,Up="__NG_DI_FLAG__",dl="ngTempTokenPath",RO="ngTokenPath",NO=/\n/gm,MO="\u0275",EC="__source",vs;function PO(){return vs}function vr(t){let e=vs;return vs=t,e}function xO(t,e=z.Default){if(vs===void 0)throw new S(-203,!1);return vs===null?lT(t,void 0,e):vs.get(t,e&z.Optional?null:void 0,e)}function N(t,e=z.Default){return(uT()||xO)(ft(t),e)}function w(t,e=z.Default){return N(t,Ul(e))}function Ul(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jp(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,s=z.Default;for(let o=0;o<r.length;o++){let a=r[o],c=OO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(N(i,s))}else e.push(N(r))}return e}function dT(t,e){return t[Up]=e,t.prototype[Up]=e,t}function OO(t){return t[Up]}function kO(t,e,n,r){let i=t[dl];throw e[EC]&&i.unshift(e[EC]),t.message=FO(`
`+t.message,i,n,r),t[RO]=i,t[dl]=null,t}function FO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==MO?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NO,`
  `)}`}var Ye=dT(rT("Optional"),8);var Og=dT(rT("SkipSelf"),4);function Xr(t,e){let n=t.hasOwnProperty(ll);return n?t[ll]:null}function LO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function VO(t){return t.flat(Number.POSITIVE_INFINITY)}function kg(t,e){t.forEach(n=>Array.isArray(n)?kg(n,e):e(n))}function hT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function UO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function jO(t,e,n){let r=oa(t,e);return r>=0?t[r|1]=n:(r=~r,UO(t,r,e,n)),r}function Ep(t,e){let n=oa(t,e);if(n>=0)return t[n|1]}function oa(t,e){return BO(t,e,1)}function BO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ws={},Rt=[],Zr=new A(""),fT=new A("",-1),pT=new A(""),fl=class{get(e,n=Ko){if(n===Ko){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}},gT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gT||{}),mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mn||{}),Ke=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ke||{});function $O(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];HO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function mT(t){return t===3||t===4||t===6}function HO(t){return t.charCodeAt(0)===64}function Qo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?CC(t,n,i,null,e[++r]):CC(t,n,i,null,null))}}return t}function CC(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var yT="ng-template";function qO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$O(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Fg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Fg(t){return t.type===4&&t.value!==yT}function GO(t,e,n){let r=t.type===4&&!n?yT:t.value;return e===r}function zO(t,e,n){let r=4,i=t.attrs,s=i!==null?QO(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Jt(r)&&!Jt(c))return!1;if(o&&Jt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!GO(t,c,n)||c===""&&e.length===1){if(Jt(r))return!1;o=!0}}else if(r&8){if(i===null||!qO(t,i,c,n)){if(Jt(r))return!1;o=!0}}else{let u=e[++a],l=WO(c,i,Fg(t),n);if(l===-1){if(Jt(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Jt(r))return!1;o=!0}}}}return Jt(r)||o}function Jt(t){return(t&1)===0}function WO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return YO(e,t)}function KO(t,e,n=!1){for(let r=0;r<e.length;r++)if(zO(t,e[r],n))return!0;return!1}function QO(t){for(let e=0;e<t.length;e++){let n=t[e];if(mT(n))return e}return t.length}function YO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function TC(t,e){return t?":not("+e.trim()+")":e}function JO(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Jt(o)&&(e+=TC(s,i),i=""),r=o,s=s||!Jt(r);n++}return i!==""&&(e+=TC(s,i)),e}function XO(t){return t.map(JO).join(",")}function ZO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Jt(i))break;i=s}r++}return{attrs:e,classes:n}}function vT(t){return sa(()=>{let e=TT(t),n=ue(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||Rt,_:null,schemas:t.schemas||null,tView:null,id:""});DT(n);let r=t.dependencies;return n.directiveDefs=bC(r,!1),n.pipeDefs=bC(r,!0),n.id=nk(n),n})}function ek(t){return wr(t)||wT(t)}function tk(t){return t!==null}function Je(t){return sa(()=>({type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function DC(t,e){if(t==null)return ws;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ke.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ke.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Oe(t){return sa(()=>{let e=TT(t);return DT(e),e})}function _T(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function wr(t){return t[EO]||null}function wT(t){return t[CO]||null}function IT(t){return t[TO]||null}function ET(t){let e=wr(t)||wT(t)||IT(t);return e!==null?e.standalone:!1}function CT(t,e){let n=t[DO]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function TT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ws,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DC(t.inputs,e),outputs:DC(t.outputs),debugInfo:null}}function DT(t){t.features?.forEach(e=>e(t))}function bC(t,e){if(!t)return null;let n=e?IT:ek;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(tk)}function nk(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aa(t){return{\u0275providers:t}}function rk(...t){return{\u0275providers:bT(!0,t),\u0275fromNgModule:!0}}function bT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return kg(e,o=>{let a=o;$p(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ST(i,s),n}function ST(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Lg(i,s=>{e(s,r)})}}function $p(t,e,n,r){if(t=ft(t),!t)return!1;let i=null,s=_C(t),o=!s&&wr(t);if(!s&&!o){let c=t.ngModule;if(s=_C(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)$p(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{kg(s.imports,l=>{$p(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&ST(u,e)}if(!a){let u=Xr(i)||(()=>new i);e({provide:i,useFactory:u,deps:Rt},i),e({provide:pT,useValue:i,multi:!0},i),e({provide:Zr,useValue:()=>N(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Lg(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Lg(t,e){for(let n of t)cT(n)&&(n=n.\u0275providers),Array.isArray(n)?Lg(n,e):e(n)}var ik=fe({provide:String,useValue:fe});function AT(t){return t!==null&&typeof t=="object"&&ik in t}function sk(t){return!!(t&&t.useExisting)}function ok(t){return!!(t&&t.useFactory)}function Is(t){return typeof t=="function"}function ak(t){return!!t.useClass}var jl=new A(""),il={},ck={},Cp;function Vg(){return Cp===void 0&&(Cp=new fl),Cp}var Nt=class{},Yo=class extends Nt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qp(e,o=>this.processProvider(o)),this.records.set(fT,ps(void 0,this)),i.has("environment")&&this.records.set(Nt,ps(void 0,this));let s=this.records.get(jl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pT,Rt,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vr(this),r=Et(void 0),i;try{return e()}finally{vr(n),Et(r)}}get(e,n=Ko,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(IC))return e[IC](this);r=Ul(r);let i,s=vr(this),o=Et(void 0);try{if(!(r&z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=fk(e)&&Ll(e);u&&this.injectableDefInScope(u)?c=ps(Hp(e),il):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&z.Self?Vg():this.parent;return n=r&z.Optional&&n===Ko?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[dl]=a[dl]||[]).unshift(pt(e)),s)throw a;return kO(a,e,"R3InjectorError",this.source)}else throw a}finally{Et(o),vr(s)}}resolveInjectorInitializers(){let e=ie(null),n=vr(this),r=Et(void 0),i;try{let s=this.get(Zr,Rt,z.Self);for(let o of s)o()}finally{vr(n),Et(r),ie(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){e=ft(e);let n=Is(e)?e:ft(e&&e.provide),r=lk(e);if(!Is(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ps(void 0,il,!0),i.factory=()=>jp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ie(null);try{return n.value===il&&(n.value=ck,n.value=n.factory()),typeof n.value=="object"&&n.value&&hk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hp(t){let e=Ll(t),n=e!==null?e.factory:Xr(t);if(n!==null)return n;if(t instanceof A)throw new S(204,!1);if(t instanceof Function)return uk(t);throw new S(204,!1)}function uk(t){if(t.length>0)throw new S(204,!1);let n=wO(t);return n!==null?()=>n.factory(t):()=>new t}function lk(t){if(AT(t))return ps(void 0,t.useValue);{let e=RT(t);return ps(e,il)}}function RT(t,e,n){let r;if(Is(t)){let i=ft(t);return Xr(i)||Hp(i)}else if(AT(t))r=()=>ft(t.useValue);else if(ok(t))r=()=>t.useFactory(...jp(t.deps||[]));else if(sk(t))r=()=>N(ft(t.useExisting));else{let i=ft(t&&(t.useClass||t.provide));if(dk(t))r=()=>new i(...jp(t.deps));else return Xr(i)||Hp(i)}return r}function ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dk(t){return!!t.deps}function hk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fk(t){return typeof t=="function"||typeof t=="object"&&t instanceof A}function qp(t,e){for(let n of t)Array.isArray(n)?qp(n,e):n&&cT(n)?qp(n.\u0275providers,e):e(n)}function vn(t,e){t instanceof Yo&&t.assertNotDestroyed();let n,r=vr(t),i=Et(void 0);try{return e()}finally{vr(r),Et(i)}}function NT(){return uT()!==void 0||PO()!=null}function pk(t){if(!NT())throw new S(-203,!1)}function gk(t){let e=We.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function mk(t){return typeof t=="function"}var Mt=0,j=1,x=2,Fe=3,Xt=4,rn=5,Zt=6,Jo=7,en=8,Es=9,tn=10,me=11,Xo=12,SC=13,bs=14,Bt=15,ca=16,gs=17,Gn=18,Bl=19,MT=20,_r=21,Tp=22,ei=23,rt=25,PT=1,Zo=6,zn=7,pl=8,Cs=9,Ct=10,Ug=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ug||{});function qn(t){return Array.isArray(t)&&typeof t[PT]=="object"}function _n(t){return Array.isArray(t)&&t[PT]===!0}function xT(t){return(t.flags&4)!==0}function ua(t){return t.componentOffset>-1}function jg(t){return(t.flags&1)===1}function Ir(t){return!!t.template}function OT(t){return(t[x]&512)!==0}var Gp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function kT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Qn(){return FT}function FT(t){return t.type.prototype.ngOnChanges&&(t.setInput=vk),yk}Qn.ngInherit=!0;function yk(){let t=VT(this),e=t?.current;if(e){let n=t.previous;if(n===ws)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function vk(t,e,n,r,i){let s=this.declaredInputs[r],o=VT(t)||_k(t,{previous:ws,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Gp(u&&u.currentValue,n,c===ws),kT(t,e,i,n)}var LT="__ngSimpleChanges__";function VT(t){return t[LT]||null}function _k(t,e){return t[LT]=e}var AC=null;var pn=function(t,e,n){AC?.(t,e,n)},wk="svg",Ik="math",Ek=!1;function Ck(){return Ek}function nn(t){for(;Array.isArray(t);)t=t[Mt];return t}function UT(t,e){return nn(e[t])}function Pt(t,e){return nn(e[t.index])}function jT(t,e){return t.data[e]}function BT(t,e){return t[e]}function Cr(t,e){let n=e[t];return qn(n)?n:n[Mt]}function Tk(t){return(t[x]&4)===4}function Bg(t){return(t[x]&128)===128}function Dk(t){return _n(t[Fe])}function gl(t,e){return e==null?null:t[e]}function $T(t){t[gs]=0}function bk(t){t[x]&1024||(t[x]|=1024,Bg(t)&&ea(t))}function Sk(t,e){for(;t>0;)e=e[bs],t--;return e}function $g(t){return!!(t[x]&9216||t[ei]?.dirty)}function zp(t){t[tn].changeDetectionScheduler?.notify(1),$g(t)?ea(t):t[x]&64&&(Ck()?(t[x]|=1024,ea(t)):t[tn].changeDetectionScheduler?.notify())}function ea(t){t[tn].changeDetectionScheduler?.notify();let e=ta(t);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!Bg(e)));)e=ta(e)}function HT(t,e){if((t[x]&256)===256)throw new S(911,!1);t[_r]===null&&(t[_r]=[]),t[_r].push(e)}function Ak(t,e){if(t[_r]===null)return;let n=t[_r].indexOf(e);n!==-1&&t[_r].splice(n,1)}function ta(t){let e=t[Fe];return _n(e)?e[Fe]:e}var q={lFrame:JT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rk(){return q.lFrame.elementDepthCount}function Nk(){q.lFrame.elementDepthCount++}function Mk(){q.lFrame.elementDepthCount--}function qT(){return q.bindingsEnabled}function la(){return q.skipHydrationRootTNode!==null}function Pk(t){return q.skipHydrationRootTNode===t}function xk(t){q.skipHydrationRootTNode=t}function Ok(){q.skipHydrationRootTNode=null}function re(){return q.lFrame.lView}function Le(){return q.lFrame.tView}function j7(t){return q.lFrame.contextLView=t,t[en]}function B7(t){return q.lFrame.contextLView=null,t}function gt(){let t=GT();for(;t!==null&&t.type===64;)t=t.parent;return t}function GT(){return q.lFrame.currentTNode}function kk(){let t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function da(t,e){let n=q.lFrame;n.currentTNode=t,n.isParent=e}function zT(){return q.lFrame.isParent}function Fk(){q.lFrame.isParent=!1}function Lk(){return q.lFrame.contextLView}function WT(){let t=q.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Vk(t){return q.lFrame.bindingIndex=t}function $l(){return q.lFrame.bindingIndex++}function Uk(t){let e=q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jk(){return q.lFrame.inI18n}function Bk(t,e){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wp(e)}function $k(){return q.lFrame.currentDirectiveIndex}function Wp(t){q.lFrame.currentDirectiveIndex=t}function Hk(t){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function KT(){return q.lFrame.currentQueryIndex}function Hg(t){q.lFrame.currentQueryIndex=t}function qk(t){let e=t[j];return e.type===2?e.declTNode:e.type===1?t[rn]:null}function QT(t,e,n){if(n&z.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&z.Host);)if(i=qk(s),i===null||(s=s[bs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=q.lFrame=YT();return r.currentTNode=e,r.lView=t,!0}function qg(t){let e=YT(),n=t[j];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function YT(){let t=q.lFrame,e=t===null?null:t.child;return e===null?JT(t):e}function JT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function XT(){let t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ZT=XT;function Gg(){let t=XT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gk(t){return(q.lFrame.contextLView=Sk(t,q.lFrame.contextLView))[en]}function Ss(){return q.lFrame.selectedIndex}function ti(t){q.lFrame.selectedIndex=t}function Hl(){let t=q.lFrame;return jT(t.tView,t.selectedIndex)}function eD(){return q.lFrame.currentNamespace}var tD=!0;function zg(){return tD}function wn(t){tD=t}function zk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=FT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Wg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function sl(t,e,n){nD(t,e,3,n)}function ol(t,e,n,r){(t[x]&3)===n&&nD(t,e,n,r)}function Dp(t,e){let n=t[x];(n&3)===e&&(n&=16383,n+=1,t[x]=n)}function nD(t,e,n,r){let i=r!==void 0?t[gs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[gs]+=65536),(a<s||s==-1)&&(Wk(t,n,e,c),t[gs]=(t[gs]&4294901760)+c+2),c++}function RC(t,e){pn(4,t,e);let n=ie(null);try{e.call(t)}finally{ie(n),pn(5,t,e)}}function Wk(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[x]>>14<t[gs]>>16&&(t[x]&3)===e&&(t[x]+=16384,RC(a,s)):RC(a,s)}var _s=-1,ni=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Kk(t){return t instanceof ni}function Qk(t){return(t.flags&8)!==0}function Yk(t){return(t.flags&16)!==0}function rD(t){return t!==_s}function ml(t){return t&32767}function Jk(t){return t>>16}function yl(t,e){let n=Jk(t),r=e;for(;n>0;)r=r[bs],n--;return r}var Kp=!0;function vl(t){let e=Kp;return Kp=t,e}var Xk=256,iD=Xk-1,sD=5,Zk=0,gn={};function eF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zo)&&(r=n[zo]),r==null&&(r=n[zo]=Zk++);let i=r&iD,s=1<<i;e.data[t+(i>>sD)]|=s}function _l(t,e){let n=oD(t,e);if(n!==-1)return n;let r=e[j];r.firstCreatePass&&(t.injectorIndex=e.length,bp(r.data,t),bp(e,null),bp(r.blueprint,null));let i=Kg(t,e),s=t.injectorIndex;if(rD(i)){let o=ml(i),a=yl(i,e),c=a[j].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function bp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function oD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=dD(i),r===null)return _s;if(n++,i=i[bs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _s}function Qp(t,e,n){eF(t,e,n)}function tF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(mT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function aD(t,e,n){if(n&z.Optional||t!==void 0)return t;xg(e,"NodeInjector")}function cD(t,e,n,r){if(n&z.Optional&&r===void 0&&(r=null),!(n&(z.Self|z.Host))){let i=t[Es],s=Et(void 0);try{return i?i.get(e,r,n&z.Optional):lT(e,r,n&z.Optional)}finally{Et(s)}}return aD(r,e,n)}function uD(t,e,n,r=z.Default,i){if(t!==null){if(e[x]&2048&&!(r&z.Self)){let o=sF(t,e,n,r,gn);if(o!==gn)return o}let s=lD(t,e,n,r,gn);if(s!==gn)return s}return cD(e,n,r,i)}function lD(t,e,n,r,i){let s=rF(n);if(typeof s=="function"){if(!QT(e,t,r))return r&z.Host?aD(i,n,r):cD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&z.Optional))xg(n);else return o}finally{ZT()}}else if(typeof s=="number"){let o=null,a=oD(t,e),c=_s,u=r&z.Host?e[Bt][rn]:null;for((a===-1||r&z.SkipSelf)&&(c=a===-1?Kg(t,e):e[a+8],c===_s||!MC(r,!1)?a=-1:(o=e[j],a=ml(c),e=yl(c,e)));a!==-1;){let l=e[j];if(NC(s,a,l.data)){let d=nF(a,e,n,o,r,u);if(d!==gn)return d}c=e[a+8],c!==_s&&MC(r,e[j].data[a+8]===u)&&NC(s,a,e)?(o=l,a=ml(c),e=yl(c,e)):a=-1}}return i}function nF(t,e,n,r,i,s){let o=e[j],a=o.data[t+8],c=r==null?ua(a)&&Kp:r!=o&&(a.type&3)!==0,u=i&z.Host&&s===a,l=al(a,o,n,c,u);return l!==null?ri(e,o,l,a):gn}function al(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&Ir(f)&&f.type===n)return c}return null}function ri(t,e,n,r){let i=t[n],s=e.data;if(Kk(i)){let o=i;o.resolving&&SO(bO(s[n]));let a=vl(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Et(o.injectImpl):null,l=QT(t,r,z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&zk(n,s[n],e)}finally{u!==null&&Et(u),vl(a),o.resolving=!1,ZT()}}return i}function rF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zo)?t[zo]:void 0;return typeof e=="number"?e>=0?e&iD:iF:e}function NC(t,e,n){let r=1<<t;return!!(n[e+(t>>sD)]&r)}function MC(t,e){return!(t&z.Self)&&!(t&z.Host&&e)}var Jr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return uD(this._tNode,this._lView,e,Ul(r),n)}};function iF(){return new Jr(gt(),re())}function As(t){return sa(()=>{let e=t.prototype.constructor,n=e[ll]||Yp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ll]||Yp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yp(t){return iT(t)?()=>{let e=Yp(ft(t));return e&&e()}:Xr(t)}function sF(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=lD(s,o,n,r|z.Self,gn);if(a!==gn)return a;let c=s.parent;if(!c){let u=o[MT];if(u){let l=u.get(n,gn,r);if(l!==gn)return l}c=dD(o),o=o[bs]}s=c}return i}function dD(t){let e=t[j],n=e.type;return n===2?e.declTNode:n===1?t[rn]:null}function Qg(t){return tF(gt(),t)}function PC(t,e=null,n=null,r){let i=hD(t,e,n,r);return i.resolveInjectorInitializers(),i}function hD(t,e=null,n=null,r,i=new Set){let s=[n||Rt,rk(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new Yo(s,e||Vg(),r||null,i)}var Ve=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return PC({name:""},i,r,"");{let s=r.name??"";return PC({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Ko,e.NULL=new fl,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>N(fT)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var oF="ngOriginalError";function Sp(t){return t[oF]}var yn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Sp(e);for(;n&&Sp(n);)n=Sp(n);return n||null}},fD=new A("",{providedIn:"root",factory:()=>w(yn).handleError.bind(void 0)}),Yg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aF,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Jp=class extends Yg{constructor(e){super(),this._lView=e}onDestroy(e){return HT(this._lView,e),()=>Ak(this._lView,e)}};function aF(){return new Jp(re())}function cF(){return Rs(gt(),re())}function Rs(t,e){return new xt(Pt(t,e))}var xt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=cF;let t=e;return t})();function uF(t){return t instanceof xt?t.nativeElement:t}var Xp=class extends nt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,NT()&&(this.destroyRef=w(Yg,{optional:!0})??void 0)}emit(e){let n=ie(null);try{super.next(e)}finally{ie(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ap(s),i&&(i=Ap(i)),o&&(o=Ap(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Se&&e.add(a),a}};function Ap(t){return e=>{setTimeout(t,void 0,e)}}var Ce=Xp;function lF(){return this._results[Symbol.iterator]()}var Zp=class t{get changes(){return this._changes??=new Ce}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=lF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=VO(e);(this._changesDetected=!LO(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},dF="ngSkipHydration",hF="ngskiphydration";function pD(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===hF)return!0}return!1}function gD(t){return t.hasAttribute(dF)}function wl(t){return(t.flags&128)===128}function fF(t){if(wl(t))return!0;let e=t.parent;for(;e;){if(wl(t)||pD(e))return!0;e=e.parent}return!1}var mD=new Map,pF=0;function gF(){return pF++}function mF(t){mD.set(t[Bl],t)}function yF(t){mD.delete(t[Bl])}var xC="__ngContext__";function ii(t,e){qn(e)?(t[xC]=e[Bl],mF(e)):t[xC]=e}function yD(t){return _D(t[Xo])}function vD(t){return _D(t[Xt])}function _D(t){for(;t!==null&&!_n(t);)t=t[Xt];return t}var eg;function wD(t){eg=t}function ql(){if(eg!==void 0)return eg;if(typeof document<"u")return document;throw new S(210,!1)}var ha=new A("",{providedIn:"root",factory:()=>vF}),vF="ng",Jg=new A(""),Ot=new A("",{providedIn:"platform",factory:()=>"unknown"});var Xg=new A("",{providedIn:"root",factory:()=>ql().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function _F(){let t=new ui;return w(Ot)==="browser"&&(t.store=wF(ql(),w(ha))),t}var ui=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=R({token:e,providedIn:"root",factory:_F});let t=e;return t})();function wF(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var ID="h",ED="b",tg=function(t){return t.FirstChild="f",t.NextSibling="n",t}(tg||{}),IF="e",EF="t",Zg="c",CD="x",Il="r",CF="i",TF="n",DF="d",bF="__nghData__",TD=bF,Rp="ngh",SF="nghm",DD=()=>null;function AF(t,e,n=!1){let r=t.getAttribute(Rp);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",a=n?i:o,c={};if(r!==""){let l=e.get(ui,null,{optional:!0});l!==null&&(c=l.get(TD,[])[Number(r)])}let u={data:c,firstChild:t.firstChild??null};return n&&(u.firstChild=t,Gl(u,0,t.nextSibling)),a?t.setAttribute(Rp,a):t.removeAttribute(Rp),u}function RF(){DD=AF}function em(t,e,n=!1){return DD(t,e,n)}function NF(t){let e=t._lView;return e[j].type===2?null:(OT(e)&&(e=e[rt]),e)}function MF(t){return t.textContent?.replace(/\s/gm,"")}function PF(t){let e=ql(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=MF(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Gl(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function ng(t,e){return t.segmentHeads?.[e]??null}function xF(t,e){let n=t.data,r=n[IF]?.[e]??null;return r===null&&n[Zg]?.[e]&&(r=tm(t,e)),r}function bD(t,e){return t.data[Zg]?.[e]??null}function tm(t,e){let n=bD(t,e)??[],r=0;for(let i of n)r+=i[Il]*(i[CD]??1);return r}function zl(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[DF];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var Ju=new A(""),SD=!1,AD=new A("",{providedIn:"root",factory:()=>SD}),OF=new A(""),Xu;function kF(){if(Xu===void 0&&(Xu=null,We.trustedTypes))try{Xu=We.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Xu}function FF(t){return kF()?.createScriptURL(t)||t}var Zu;function LF(){if(Zu===void 0&&(Zu=null,We.trustedTypes))try{Zu=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Zu}function OC(t){return LF()?.createScriptURL(t)||t}var El=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nT})`}};function fa(t){return t instanceof El?t.changingThisBreaksApplicationSecurity:t}function nm(t,e){let n=VF(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nT})`)}return n===e}function VF(t){return t instanceof El&&t.getTypeName()||null}var UF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RD(t){return t=String(t),t.match(UF)?t:"unsafe:"+t}var Wl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wl||{});function jF(t){let e=MD();return e?e.sanitize(Wl.URL,t)||"":nm(t,"URL")?fa(t):RD(Vl(t))}function BF(t){let e=MD();if(e)return OC(e.sanitize(Wl.RESOURCE_URL,t)||"");if(nm(t,"ResourceURL"))return OC(fa(t));throw new S(904,!1)}function $7(t){return FF(t[0])}function $F(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?BF:jF}function ND(t,e,n){return $F(e,n)(t)}function MD(){let t=re();return t&&t[tn].sanitizer}var HF=/^>|^->|<!--|-->|--!>|<!-$/g,qF=/(<|>)/g,GF="\u200B$1\u200B";function zF(t){return t.replace(HF,e=>e.replace(qF,GF))}function WF(t){return t.ownerDocument.body}function PD(t){return t instanceof Function?t():t}function Go(t){return(t??w(Ve)).get(Ot)==="browser"}var Wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wn||{}),KF;function rm(t,e){return KF(t,e)}function ms(t,e,n,r,i){if(r!=null){let s,o=!1;_n(r)?s=r:qn(r)&&(o=!0,r=r[Mt]);let a=nn(r);t===0&&n!==null?i==null?FD(e,n,a):Cl(e,n,a,i||null,!0):t===1&&n!==null?Cl(e,n,a,i||null,!0):t===2?cm(e,a,o):t===3&&e.destroyNode(a),s!=null&&d1(e,t,s,n,i)}}function im(t,e){return t.createText(e)}function QF(t,e,n){t.setValue(e,n)}function sm(t,e){return t.createComment(zF(e))}function Kl(t,e,n){return t.createElement(e,n)}function YF(t,e){xD(t,e),e[Mt]=null,e[rn]=null}function JF(t,e,n,r,i,s){r[Mt]=i,r[rn]=e,Ql(t,r,n,1,i,s)}function xD(t,e){e[tn].changeDetectionScheduler?.notify(1),Ql(t,e,e[me],2,null,null)}function XF(t){let e=t[Xo];if(!e)return Np(t[j],t);for(;e;){let n=null;if(qn(e))n=e[Xo];else{let r=e[Ct];r&&(n=r)}if(!n){for(;e&&!e[Xt]&&e!==t;)qn(e)&&Np(e[j],e),e=e[Fe];e===null&&(e=t),qn(e)&&Np(e[j],e),n=e&&e[Xt]}e=n}}function ZF(t,e,n,r){let i=Ct+r,s=n.length;r>0&&(n[i-1][Xt]=e),r<s-Ct?(e[Xt]=n[i],hT(n,Ct+r,e)):(n.push(e),e[Xt]=null),e[Fe]=n;let o=e[ca];o!==null&&n!==o&&e1(o,e);let a=e[Gn];a!==null&&a.insertView(t),zp(e),e[x]|=128}function e1(t,e){let n=t[Cs],i=e[Fe][Fe][Bt];e[Bt]!==i&&(t[x]|=Ug.HasTransplantedViews),n===null?t[Cs]=[e]:n.push(e)}function OD(t,e){let n=t[Cs],r=n.indexOf(e);n.splice(r,1)}function rg(t,e){if(t.length<=Ct)return;let n=Ct+e,r=t[n];if(r){let i=r[ca];i!==null&&i!==t&&OD(i,r),e>0&&(t[n-1][Xt]=r[Xt]);let s=hl(t,Ct+e);YF(r[j],r);let o=s[Gn];o!==null&&o.detachView(s[j]),r[Fe]=null,r[Xt]=null,r[x]&=-129}return r}function kD(t,e){if(!(e[x]&256)){let n=e[me];n.destroyNode&&Ql(t,e,n,3,null,null),XF(e)}}function Np(t,e){if(e[x]&256)return;let n=ie(null);try{e[x]&=-129,e[x]|=256,e[ei]&&GE(e[ei]),n1(t,e),t1(t,e),e[j].type===1&&e[me].destroy();let r=e[ca];if(r!==null&&_n(e[Fe])){r!==e[Fe]&&OD(r,e);let i=e[Gn];i!==null&&i.detachView(t)}yF(e)}finally{ie(n)}}function t1(t,e){let n=t.cleanup,r=e[Jo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Jo]=null);let i=e[_r];if(i!==null){e[_r]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function n1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ni)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];pn(4,a,c);try{c.call(a)}finally{pn(5,a,c)}}else{pn(4,i,s);try{s.call(i)}finally{pn(5,i,s)}}}}}function r1(t,e,n){return i1(t,e.parent,n)}function i1(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Mt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===mn.None||s===mn.Emulated)return null}return Pt(r,n)}}function Cl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function FD(t,e,n){t.appendChild(e,n)}function kC(t,e,n,r,i){r!==null?Cl(t,e,n,r,i):FD(t,e,n)}function s1(t,e,n,r){t.removeChild(e,n,r)}function om(t,e){return t.parentNode(e)}function o1(t,e){return t.nextSibling(e)}function a1(t,e,n){return u1(t,e,n)}function c1(t,e,n){return t.type&40?Pt(t,n):null}var u1=c1,FC;function am(t,e,n,r){let i=r1(t,r,e),s=e[me],o=r.parent||e[rn],a=a1(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)kC(s,i,n[c],a,!1);else kC(s,i,n,a,!1);FC!==void 0&&FC(s,r,e,n,i)}function cl(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return ig(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return cl(t,r);{let i=t[e.index];return _n(i)?ig(-1,i):nn(i)}}else{if(n&32)return rm(e,t)()||nn(t[e.index]);{let r=LD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ta(t[Bt]);return cl(i,r)}else return cl(t,e.next)}}}return null}function LD(t,e){if(e!==null){let r=t[Bt][rn],i=e.projection;return r.projection[i]}return null}function ig(t,e){let n=Ct+t+1;if(n<e.length){let r=e[n],i=r[j].firstChild;if(i!==null)return cl(r,i)}return e[zn]}function cm(t,e,n){let r=om(t,e);r&&s1(t,r,e,n)}function VD(t){t.textContent=""}function um(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&ii(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)um(t,e,n.child,r,i,s,!1),ms(e,t,i,a,s);else if(c&32){let u=rm(n,r),l;for(;l=u();)ms(e,t,i,l,s);ms(e,t,i,a,s)}else c&16?l1(t,e,r,n,i,s):ms(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ql(t,e,n,r,i,s){um(n,r,t.firstChild,e,i,s,!1)}function l1(t,e,n,r,i,s){let o=n[Bt],c=o[rn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];ms(e,t,i,l,s)}else{let u=c,l=o[Fe];wl(r)&&(u.flags|=128),um(t,e,u,l,i,s,!0)}}function d1(t,e,n,r,i){let s=n[zn],o=nn(n);s!==o&&ms(e,t,r,s,i);for(let a=Ct;a<n.length;a++){let c=n[a];Ql(c[j],c,t,e,r,s)}}function h1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wn.Important),t.setStyle(n,r,i,s))}}function f1(t,e,n){t.setAttribute(e,"style",n)}function UD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function jD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bp(t,e,r),i!==null&&UD(t,e,i),s!==null&&f1(t,e,s)}var Tr={};function H7(t=1){BD(Le(),re(),Ss()+t,!1)}function BD(t,e,n,r){if(!r)if((e[x]&3)===3){let s=t.preOrderCheckHooks;s!==null&&sl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ol(e,s,0,n)}ti(n)}function G(t,e=z.Default){let n=re();if(n===null)return N(t,e);let r=gt();return uD(r,n,ft(t),e)}function $D(){let t="invalid";throw new Error(t)}function HD(t,e,n,r,i,s){let o=ie(null);try{let a=null;i&Ke.SignalBased&&(a=e[r][tp]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ke.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):kT(e,a,r,s)}finally{ie(o)}}function p1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ti(~i);else{let s=i,o=n[++r],a=n[++r];Bk(o,s);let c=e[s];a(2,c)}}}finally{ti(-1)}}function Yl(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Mt]=i,d[x]=r|4|128|8|64,(u!==null||t&&t[x]&2048)&&(d[x]|=2048),$T(d),d[Fe]=d[bs]=t,d[en]=n,d[tn]=o||t&&t[tn],d[me]=a||t&&t[me],d[Es]=c||t&&t[Es]||null,d[rn]=s,d[Bl]=gF(),d[Zt]=l,d[MT]=u,d[Bt]=e.type==2?t[Bt]:d,d}function Jl(t,e,n,r,i){let s=t.data[e];if(s===null)s=g1(t,e,n,r,i),jk()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=kk();s.injectorIndex=o===null?-1:o.injectorIndex}return da(s,!0),s}function g1(t,e,n,r,i){let s=GT(),o=zT(),a=o?s:s&&s.parent,c=t.data[e]=E1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function qD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function GD(t,e,n,r,i){let s=Ss(),o=r&2;try{ti(-1),o&&e.length>rt&&BD(t,e,rt,!1),pn(o?2:0,i),n(r,i)}finally{ti(s),pn(o?3:1,i)}}function zD(t,e,n){if(xT(e)){let r=ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ie(r)}}}function WD(t,e,n){qT()&&(A1(t,e,n,Pt(n,e)),(n.flags&64)===64&&ZD(t,e,n))}function KD(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function QD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=lm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function lm(t,e,n,r,i,s,o,a,c,u,l){let d=rt+r,h=d+i,f=m1(d,h),p=typeof u=="function"?u():u;return f[j]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function m1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Tr);return n}function y1(t,e,n,r){let s=r.get(AD,SD)||n===mn.ShadowDom,o=t.selectRootElement(e,s);return v1(o),o}function v1(t){YD(t)}var YD=()=>null;function _1(t){gD(t)?VD(t):PF(t)}function w1(){YD=_1}function I1(t,e,n,r){let i=nb(e);i.push(n),t.firstCreatePass&&rb(t).push(r,i.length-1)}function E1(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return la()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LC(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ke.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?VC(r,n,u,a,c):VC(r,n,u,a)}return r}function VC(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function C1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=LC(0,d.inputs,l,c,f),u=LC(1,d.outputs,l,u,p);let y=c!==null&&o!==null&&!Fg(e)?U1(c,l,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function T1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dm(t,e,n,r,i,s,o,a){let c=Pt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(hm(t,n,l,r,i),ua(e)&&D1(n,e.index)):e.type&3?(r=T1(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function D1(t,e){let n=Cr(e,t);n[x]&16||(n[x]|=64)}function JD(t,e,n,r){if(qT()){let i=r===null?null:{"":-1},s=N1(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&XD(t,e,n,o,i,a),i&&M1(n,r,i)}n.mergedAttrs=Qo(n.mergedAttrs,n.attrs)}function XD(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Qp(_l(n,e),t,r[u].type);x1(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=qD(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Qo(n.mergedAttrs,l.hostAttrs),O1(t,n,e,c,l),P1(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}C1(t,n,s)}function b1(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;S1(o)!=a&&o.push(a),o.push(n,r,s)}}function S1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function A1(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ua(n)&&k1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||_l(n,e),ii(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ri(e,t,a,n);if(ii(u,e),o!==null&&V1(e,a-i,u,c,n,o),Ir(c)){let l=Cr(n.index,e);l[en]=ri(e,t,a,n)}}}function ZD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=$k();try{ti(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Wp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&R1(c,u)}}finally{ti(-1),Wp(o)}}function R1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function N1(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(KO(e,o.selectors,!1))if(r||(r=[]),Ir(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;sg(t,e,c)}else r.unshift(o),sg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function sg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function M1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new S(-301,!1);r.push(e[i],s)}}}function P1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ir(e)&&(n[""]=t)}}function x1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function O1(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Xr(i.type,!0)),o=new ni(s,Ir(i),G);t.blueprint[r]=o,n[r]=o,b1(t,e,r,qD(t,n,i.hostVars,Tr),i)}function k1(t,e,n){let r=Pt(e,t),i=QD(n),s=t[tn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Xl(t,Yl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function F1(t,e,n,r,i,s){let o=Pt(t,e);L1(e[me],o,s,t.value,n,r,i)}function L1(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Vl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function V1(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];HD(r,n,c,u,l,d)}}function U1(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function eb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function tb(t,e){let n=t.contentQueries;if(n!==null){let r=ie(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Hg(s),a.contentQueries(2,e[o],o)}}}finally{ie(r)}}}function Xl(t,e){return t[Xo]?t[SC][Xt]=e:t[Xo]=e,t[SC]=e,e}function og(t,e,n){Hg(0);let r=ie(null);try{e(t,n)}finally{ie(r)}}function nb(t){return t[Jo]||(t[Jo]=[])}function rb(t){return t.cleanup||(t.cleanup=[])}function ib(t,e){let n=t[Es],r=n?n.get(yn,null):null;r&&r.handleError(e)}function hm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];HD(l,u,r,a,c,i)}}function j1(t,e,n){let r=UT(e,t);QF(t[me],r,n)}function B1(t,e){let n=Cr(e,t),r=n[j];$1(r,n);let i=n[Mt];i!==null&&n[Zt]===null&&(n[Zt]=em(i,n[Es])),fm(r,n,n[en])}function $1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function fm(t,e,n){qg(e);try{let r=t.viewQuery;r!==null&&og(1,r,n);let i=t.template;i!==null&&GD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Gn]?.finishViewCreation(t),t.staticContentQueries&&tb(t,e),t.staticViewQueries&&og(2,t.viewQuery,n);let s=t.components;s!==null&&H1(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[x]&=-5,Gg()}}function H1(t,e){for(let n=0;n<e.length;n++)B1(t,e[n])}function q1(t,e,n,r){let i=ie(null);try{let s=e.tView,a=t[x]&4096?4096:16,c=Yl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[ca]=u;let l=t[Gn];return l!==null&&(c[Gn]=l.createEmbeddedView(s)),fm(s,c,n),c}finally{ie(i)}}function UC(t,e){return!e||e.firstChild===null||wl(t)}function G1(t,e,n,r=!0){let i=e[j];if(ZF(i,e,t,n),r){let o=ig(n,t),a=e[me],c=om(a,t[zn]);c!==null&&JF(i,t[rn],a,e,c,o)}let s=e[Zt];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Tl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(nn(s)),_n(s)&&z1(s,r);let o=n.type;if(o&8)Tl(t,e,n.child,r);else if(o&32){let a=rm(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=LD(e,n);if(Array.isArray(a))r.push(...a);else{let c=ta(e[Bt]);Tl(c[j],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function z1(t,e){for(let n=Ct;n<t.length;n++){let r=t[n],i=r[j].firstChild;i!==null&&Tl(r[j],r,i,e)}t[zn]!==t[Mt]&&e.push(t[zn])}var sb=[];function W1(t){return t[ei]??K1(t)}function K1(t){let e=sb.pop()??Object.create(Y1);return e.lView=t,e}function Q1(t){t.lView[ei]!==t&&(t.lView=null,sb.push(t))}var Y1=ue(T({},$E),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ea(t.lView)},consumerOnSignalRead(){this.lView[ei]=this}}),ob=100;function ab(t,e=!0,n=0){let r=t[tn],i=r.rendererFactory,s=!1;s||i.begin?.();try{J1(t,n)}catch(o){throw e&&ib(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function J1(t,e){ag(t,e);let n=0;for(;$g(t);){if(n===ob)throw new S(103,!1);n++,ag(t,1)}}function X1(t,e,n,r){let i=e[x];if((i&256)===256)return;let s=!1;!s&&e[tn].inlineEffectRunner?.flush(),qg(e);let o=null,a=null;!s&&Z1(t)&&(a=W1(e),o=HE(a));try{$T(e),Vk(t.bindingStartIndex),n!==null&&GD(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&sl(e,d,null)}else{let d=t.preOrderHooks;d!==null&&ol(e,d,0,null),Dp(e,0)}if(eL(e),cb(e,0),t.contentQueries!==null&&tb(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&sl(e,d)}else{let d=t.contentHooks;d!==null&&ol(e,d,1),Dp(e,1)}p1(t,e);let u=t.components;u!==null&&lb(e,u,0);let l=t.viewQuery;if(l!==null&&og(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&sl(e,d)}else{let d=t.viewHooks;d!==null&&ol(e,d,2),Dp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tp]){for(let d of e[Tp])d();e[Tp]=null}s||(e[x]&=-73)}catch(c){throw ea(e),c}finally{a!==null&&(qE(a,o),Q1(a)),Gg()}}function Z1(t){return t.type!==2}function cb(t,e){for(let n=yD(t);n!==null;n=vD(n))for(let r=Ct;r<n.length;r++){let i=n[r];ub(i,e)}}function eL(t){for(let e=yD(t);e!==null;e=vD(e)){if(!(e[x]&Ug.HasTransplantedViews))continue;let n=e[Cs];for(let r=0;r<n.length;r++){let i=n[r],s=i[Fe];bk(i)}}}function tL(t,e,n){let r=Cr(e,t);ub(r,n)}function ub(t,e){Bg(t)&&ag(t,e)}function ag(t,e){let r=t[j],i=t[x],s=t[ei],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&np(s)),s&&(s.dirty=!1),t[x]&=-9217,o)X1(r,t,r.template,t[en]);else if(i&8192){cb(t,1);let a=r.components;a!==null&&lb(t,a,1)}}function lb(t,e,n){for(let r=0;r<e.length;r++)tL(t,e[r],n)}function pm(t){for(t[tn].changeDetectionScheduler?.notify();t;){t[x]|=64;let e=ta(t);if(OT(t)&&!e)return t;t=e}return null}var si=class{get rootNodes(){let e=this._lView,n=e[j];return Tl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[en]}set context(e){this._lView[en]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(_n(e)){let n=e[pl],r=n?n.indexOf(this):-1;r>-1&&(rg(e,r),hl(n,r))}this._attachedToViewContainer=!1}kD(this._lView[j],this._lView)}onDestroy(e){HT(this._lView,e)}markForCheck(){pm(this._cdRefInjectingView||this._lView)}detach(){this._lView[x]&=-129}reattach(){zp(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,ab(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,xD(this._lView[j],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e,zp(this._lView)}},oi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=iL;let t=e;return t})(),nL=oi,rL=class extends nL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=q1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new si(i)}};function iL(){return gm(gt(),re())}function gm(t,e){return t.type&4?new rL(e,t,Rs(t,e)):null}function db(t){let e=t[Zo]??[],r=t[Fe][me];for(let i of e)sL(i,r);t[Zo]=Rt}function sL(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Il];for(;n<i;){let s=r.nextSibling;cm(e,r,!1),r=s,n++}}}function hb(t){db(t);for(let e=Ct;e<t.length;e++)Dl(t[e])}function oL(t){let e=t[Zt]?.i18nNodes;if(e){let n=t[me];for(let r of e.values())cm(n,r,!1);t[Zt].i18nNodes=void 0}}function Dl(t){oL(t);let e=t[j];for(let n=rt;n<e.bindingStartIndex;n++)if(_n(t[n])){let r=t[n];hb(r)}else qn(t[n])&&Dl(t[n])}function aL(t){let e=t._views;for(let n of e){let r=NF(n);if(r!==null&&r[Mt]!==null)if(qn(r))Dl(r);else{let i=r[Mt];Dl(i),hb(r)}}}var cL=new RegExp(`^(\\d+)*(${ED}|${ID})*(.*)`);function uL(t){let e=t.match(cL),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,u,l]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(u,d)}return[o,...a]}function lL(t){return!t.prev&&t.parent?.type===8}function Mp(t){return t.index-rt}function dL(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function Zl(t,e,n,r){let i=Mp(r),s=dL(t,i);if(!s){let o=t.data[TF];if(o?.[i])s=fL(o[i],n);else if(e.firstChild===r)s=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(lL(r)){let u=Mp(r.parent);s=ng(t,u)}else{let u=Pt(c,n);if(a)s=u.firstChild;else{let l=Mp(c),d=ng(t,l);if(c.type===2&&d){let f=tm(t,l)+1;s=ed(f,d)}else s=u.nextSibling}}}}return s}function ed(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function hL(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case tg.FirstChild:n=n.firstChild;break;case tg.NextSibling:n=n.nextSibling;break}}return n}function fL(t,e){let[n,...r]=uL(t),i;if(n===ID)i=e[Bt][Mt];else if(n===ED)i=WF(e[Bt][Mt]);else{let s=Number(n);i=nn(e[s+rt])}return hL(i,r)}function pL(t,e){let n=[];for(let r of e)for(let i=0;i<(r[CD]??1);i++){let s={data:r,firstChild:null};r[Il]>0&&(s.firstChild=t,t=ed(r[Il],t)),n.push(s)}return[t,n]}var fb=()=>null;function gL(t,e){let n=t[Zo];return!e||n===null||n.length===0?null:n[0].data[CF]===e?n.shift():(db(t),null)}function mL(){fb=gL}function jC(t,e){return fb(t,e)}var bl=class{},cg=class{},Sl=class{};function yL(t){let e=Error(`No component factory found for ${pt(t)}.`);return e[vL]=t,e}var vL="ngComponent";var ug=class{resolveComponentFactory(e){throw yL(e)}},td=(()=>{let e=class e{};e.NULL=new ug;let t=e;return t})(),na=class{},Yn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>_L();let t=e;return t})();function _L(){let t=re(),e=gt(),n=Cr(e.index,t);return(qn(n)?n:t)[me]}var wL=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Pp={};var BC=new Set;function Ns(t){BC.has(t)||(BC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function $C(...t){}function IL(){let t=typeof We.requestAnimationFrame=="function",e=We[t?"requestAnimationFrame":"setTimeout"],n=We[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=IL().nativeRequestAnimationFrame,TL(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new S(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,EL,$C,$C);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},EL={};function mm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function CL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(We,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,lg(t),t.isCheckStableRunning=!0,mm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),lg(t))}function TL(t){let e=()=>{CL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(DL(a))return n.invokeTask(i,s,o,a);try{return HC(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),qC(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return HC(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),qC(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,lg(t),mm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function lg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function HC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qC(t){t._nesting--,mm(t)}var dg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function DL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function bL(t="zone.js",e){return t==="noop"?new dg:t==="zone.js"?new J(e):t}var ys=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ys||{}),SL={destroy(){}};function ym(t,e){!e&&pk(ym);let n=e?.injector??w(Ve);if(!Go(n))return SL;Ns("NgAfterNextRender");let r=n.get(vm),i=r.handler??=new fg,s=e?.phase??ys.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(Yg).onDestroy(o),c=vn(n,()=>new hg(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var hg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=w(J),this.errorHandler=w(yn,{optional:!0}),w(bl,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},fg=class{constructor(){this.executingCallbacks=!1,this.buckets={[ys.EarlyRead]:new Set,[ys.Write]:new Set,[ys.MixedReadWrite]:new Set,[ys.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},vm=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function pg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=yC(i,a);else if(s==2){let c=a,u=e[++o];r=yC(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Al=class extends td{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new Ts(n,this.ngModule)}};function GC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function AL(t){let e=t.toLowerCase();return e==="svg"?wk:e==="math"?Ik:null}var gg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ul(r);let i=this.injector.get(e,Pp,r);return i!==Pp||n===Pp?i:this.parentInjector.get(e,n,r)}},Ts=class extends Sl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=GC(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return GC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=XO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ie(null);try{i=i||this.ngModule;let o=i instanceof Nt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new gg(e,o):e,c=a.get(na,null);if(c===null)throw new S(407,!1);let u=a.get(wL,null),l=a.get(vm,null),d=a.get(bl,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?y1(f,r,this.componentDef.encapsulation,a):Kl(f,p,AL(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let D=null;y!==null&&(D=em(y,a,!0));let F=lm(0,null,null,1,0,null,null,null,null,null,null),U=Yl(null,F,null,v,null,null,h,f,a,null,D);qg(U);let de,Ge;try{let ae=this.componentDef,tt,fn=null;ae.findHostDirectiveDefs?(tt=[],fn=new Map,ae.findHostDirectiveDefs(ae,tt,fn),tt.push(ae)):tt=[ae];let zr=RL(U,y),Zi=NL(zr,y,ae,tt,U,h,f);Ge=jT(F,rt),y&&xL(f,ae,y,r),n!==void 0&&OL(Ge,this.ngContentSelectors,n),de=PL(Zi,ae,tt,fn,U,[kL]),fm(F,U,null)}finally{Gg()}return new mg(this.componentType,de,Rs(Ge,U),U,Ge)}finally{ie(s)}}},mg=class extends cg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new si(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;hm(s[j],s,i,e,n),this.previousInputValues.set(e,n);let o=Cr(this._tNode.index,s);pm(o)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RL(t,e){let n=t[j],r=rt;return t[r]=e,Jl(n,r,2,"#host",null)}function NL(t,e,n,r,i,s,o){let a=i[j];ML(r,t,e,o);let c=null;e!==null&&(c=em(e,i[Es]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Yl(i,QD(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&sg(a,t,r.length-1),Xl(i,d),i[t.index]=d}function ML(t,e,n,r){for(let i of t)e.mergedAttrs=Qo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(pg(e,e.mergedAttrs,!0),n!==null&&jD(r,n,e))}function PL(t,e,n,r,i,s){let o=gt(),a=i[j],c=Pt(o,i);XD(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ri(i,a,d,o);ii(h,i)}ZD(a,i,o),c&&ii(c,i);let u=ri(i,a,o.directiveStart+o.componentOffset,o);if(t[en]=i[en]=u,s!==null)for(let l of s)l(u,e);return zD(a,o,i),u}function xL(t,e,n,r){if(r)Bp(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=ZO(e.selectors[0]);i&&Bp(t,n,i),s&&s.length>0&&UD(t,n,s.join(" "))}}function OL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function kL(){let t=gt();Wg(re()[j],t)}var Dr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FL;let t=e;return t})();function FL(){let t=gt();return gb(t,re())}var LL=Dr,pb=class extends LL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rs(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kg(this._hostTNode,this._hostLView);if(rD(e)){let n=yl(e,this._hostLView),r=ml(e),i=n[j].data[r+8];return new Jr(i,n)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=zC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=jC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,UC(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!mk(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Ts(wr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?u:this.parentInjector).get(Nt,null);y&&(s=y)}let l=wr(c.componentType??{}),d=jC(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,UC(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Dk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Fe],u=new pb(c,c[rn],c[Fe]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return G1(o,i,s,r),e.attachToViewContainerRef(),hT(xp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=zC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);r&&(hl(xp(this._lContainer),n),kD(r[j],r))}detach(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);return r&&hl(xp(this._lContainer),n)!=null?new si(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function zC(t){return t[pl]}function xp(t){return t[pl]||(t[pl]=[])}function gb(t,e){let n,r=e[t.index];return _n(r)?n=r:(n=eb(r,e,null,t),e[t.index]=n,Xl(e,n)),mb(n,e,t,r),new pb(n,t,e)}function VL(t,e){let n=t[me],r=n.createComment(""),i=Pt(e,t),s=om(n,i);return Cl(n,s,r,o1(n,i),!1),r}var mb=yb,_m=()=>!1;function UL(t,e,n){return _m(t,e,n)}function yb(t,e,n,r){if(t[zn])return;let i;n.type&8?i=nn(r):i=VL(e,n),t[zn]=i}function jL(t,e,n){if(t[zn]&&t[Zo])return!0;let r=n[Zt],i=e.index-rt;if(!r||fF(e)||zl(r,i))return!1;let o=ng(r,i),a=r.data[Zg]?.[i],[c,u]=pL(o,a);return t[zn]=c,t[Zo]=u,!0}function BL(t,e,n,r){_m(t,n,e)||yb(t,e,n,r)}function $L(){mb=BL,_m=jL}var yg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},vg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wm(e,n).matches!==null&&this.queries[n].setDirty()}},Rl=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=YL(e):this.predicate=e}},_g=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},wg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,HL(n,s)),this.matchTNodeWithReadOption(e,n,al(n,e,s,!1,!1))}else r===oi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,al(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===xt||i===Dr||i===oi&&n.type&4)this.addMatch(n.index,-2);else{let s=al(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function HL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function qL(t,e){return t.type&11?Rs(t,e):t.type&4?gm(t,e):null}function GL(t,e,n,r){return n===-1?qL(e,t):n===-2?zL(t,e,r):ri(t,t[j],n,e)}function zL(t,e,n){if(n===xt)return Rs(e,t);if(n===oi)return gm(e,t);if(n===Dr)return gb(e,t)}function vb(t,e,n,r){let i=e[Gn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let l=s[u];a.push(GL(e,l,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Ig(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=vb(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],l=e[-c];for(let d=Ct;d<l.length;d++){let h=l[d];h[ca]===h[Fe]&&Ig(h[j],h,u,r)}if(l[Cs]!==null){let d=l[Cs];for(let h=0;h<d.length;h++){let f=d[h];Ig(f[j],f,u,r)}}}}}return r}function WL(t,e){return t[Gn].queries[e].queryList}function _b(t,e,n){let r=new Zp((n&4)===4);return I1(t,e,r,r.destroy),(e[Gn]??=new vg).queries.push(new yg(r))-1}function KL(t,e,n){let r=Le();return r.firstCreatePass&&(wb(r,new Rl(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),_b(r,re(),e)}function QL(t,e,n,r){let i=Le();if(i.firstCreatePass){let s=gt();wb(i,new Rl(e,n,r),s.index),JL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return _b(i,re(),n)}function YL(t){return t.split(",").map(e=>e.trim())}function wb(t,e,n){t.queries===null&&(t.queries=new _g),t.queries.track(new wg(e,n))}function JL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function wm(t,e){return t.queries.getByIndex(e)}function XL(t,e){let n=t[j],r=wm(n,e);return r.crossesNgTemplate?Ig(n,t,e,[]):vb(n,t,r,e)}function ZL(t){return typeof t=="function"&&t[tp]!==void 0}function Ib(t){return ZL(t)&&typeof t.set=="function"}function eV(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(iV))}return s}return Nl.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>sV(s));e.push(c)}),nV(),Promise.all(e).then(()=>{})}var Nl=new Map,tV=new Set;function nV(){let t=Nl;return Nl=new Map,t}function rV(){return Nl.size===0}function iV(t){return typeof t=="string"?t:t.text()}function sV(t){tV.delete(t)}function oV(t){return Object.getPrototypeOf(t.prototype).constructor}function Jn(t){let e=oV(t.type),n=!0,r=[t];for(;e;){let i;if(Ir(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=el(t.inputs),o.inputTransforms=el(t.inputTransforms),o.declaredInputs=el(t.declaredInputs),o.outputs=el(t.outputs);let a=i.hostBindings;a&&dV(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&uV(t,c),u&&lV(t,u),aV(t,i),vO(t.outputs,i.outputs),Ir(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Jn&&(n=!1)}}e=Object.getPrototypeOf(e)}cV(r)}function aV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function cV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qo(i.hostAttrs,n=Qo(n,i.hostAttrs))}}function el(t){return t===ws?{}:t===Rt?[]:t}function uV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function lV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function dV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Im(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Er=class{},ra=class{};var Ml=class extends Er{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Al(this);let i=CT(e);this._bootstrapComponents=PD(i.bootstrap),this._r3Injector=hD(e,n,[{provide:Er,useValue:this},{provide:td,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pl=class extends ra{constructor(e){super(),this.moduleType=e}create(e){return new Ml(this.moduleType,e,[])}};function hV(t,e,n){return new Ml(t,e,n)}var Eg=class extends Er{constructor(e){super(),this.componentFactoryResolver=new Al(this),this.instance=null;let n=new Yo([...e.providers,{provide:Er,useValue:this},{provide:td,useValue:this.componentFactoryResolver}],e.parent||Vg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nd(t,e,n=null){return new Eg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var pa=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Eb(t){return pV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function fV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function pV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function gV(t,e,n){return t[e]=n}function Ms(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ga(t){return(t.flags&32)===32}function mV(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Jl(e,t,4,o||null,gl(u,a));JD(e,n,l,gl(u,c)),Wg(e,l);let d=l.tView=lm(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function yV(t,e,n,r,i,s,o,a){let c=re(),u=Le(),l=t+rt,d=u.firstCreatePass?mV(l,u,c,e,n,r,i,s,o):u.data[l];da(d,!1);let h=Cb(u,c,d,t);zg()&&am(u,c,h,d),ii(h,c);let f=eb(h,c,h,d);return c[l]=f,Xl(c,f),UL(f,d,c),jg(d)&&WD(u,c,d),o!=null&&KD(c,d,a),yV}var Cb=Tb;function Tb(t,e,n,r){return wn(!0),e[me].createComment("")}function vV(t,e,n,r){let i=e[Zt],s=!i||la()||ga(n)||zl(i,r);if(wn(s),s)return Tb(t,e,n,r);let o=i.data[EF]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Zl(i,t,e,n);Gl(i,r,a);let c=tm(i,r);return ed(c,a)}function _V(){Cb=vV}function ma(t,e,n,r){let i=re(),s=$l();if(Ms(i,s,e)){let o=Le(),a=Hl();F1(a,i,t,e,n,r)}return ma}function Db(t,e,n,r){return Ms(t,$l(),n)?e+Vl(n)+r:Tr}function tl(t,e){return t<<17|e<<2}function ai(t){return t>>17&32767}function wV(t){return(t&2)==2}function IV(t,e){return t&131071|e<<17}function Cg(t){return t|2}function Ds(t){return(t&131068)>>2}function Op(t,e){return t&-131069|e<<2}function EV(t){return(t&1)===1}function Tg(t){return t|1}function CV(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ai(o),c=Ds(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||oa(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=ai(t[a+1]);t[r+1]=tl(h,a),h!==0&&(t[h+1]=Op(t[h+1],r)),t[a+1]=IV(t[a+1],r)}else t[r+1]=tl(a,0),a!==0&&(t[a+1]=Op(t[a+1],r)),a=r;else t[r+1]=tl(c,0),a===0?a=r:t[c+1]=Op(t[c+1],r),c=r;u&&(t[r+1]=Cg(t[r+1])),WC(t,l,r,!0),WC(t,l,r,!1),TV(e,l,t,r,s),o=tl(a,c),s?e.classBindings=o:e.styleBindings=o}function TV(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&oa(s,e)>=0&&(n[r+1]=Tg(n[r+1]))}function WC(t,e,n,r){let i=t[n+1],s=e===null,o=r?ai(i):Ds(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];DV(c,e)&&(a=!0,t[o+1]=r?Tg(u):Cg(u)),o=r?ai(u):Ds(u)}a&&(t[n+1]=r?Cg(i):Tg(i))}function DV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?oa(t,e)>=0:!1}function bV(t,e,n){let r=re(),i=$l();if(Ms(r,i,e)){let s=Le(),o=Hl();dm(s,o,r,t,e,r[me],n,!1)}return bV}function KC(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";hm(t,n,s[o],o,r)}function rd(t,e){return SV(t,e,null,!0),rd}function SV(t,e,n,r){let i=re(),s=Le(),o=Uk(2);if(s.firstUpdatePass&&RV(s,t,o,r),e!==Tr&&Ms(i,o,e)){let a=s.data[Ss()];OV(s,a,i,i[me],t,i[o+1]=kV(e,n),r,o)}}function AV(t,e){return e>=t.expandoStartIndex}function RV(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ss()],o=AV(t,n);FV(s,r)&&e===null&&!o&&(e=!1),e=NV(i,s,e,r),CV(i,s,e,n,o,r)}}function NV(t,e,n,r){let i=Hk(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=kp(null,t,e,n,r),n=ia(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=kp(i,t,e,n,r),s===null){let c=MV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=kp(null,t,e,c[1],r),c=ia(c,e.attrs,r),PV(t,e,r,c))}else s=xV(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function MV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ds(r)!==0)return t[ai(r)]}function PV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ai(i)]=r}function xV(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ia(r,o,n)}return ia(r,e.attrs,n)}function kp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ia(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ia(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),jO(t,o,n?!0:e[++s]))}return t===void 0?null:t}function OV(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=EV(u)?QC(c,e,n,i,Ds(u),o):void 0;if(!xl(l)){xl(s)||wV(u)&&(s=QC(c,null,n,i,a,o));let d=UT(Ss(),n);h1(r,o,d,i,s)}}function QC(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Tr&&(h=d?Rt:void 0);let f=d?Ep(h,r):l===r?h:void 0;if(u&&!xl(f)&&(f=Ep(c,r)),xl(f)&&(a=f,o))return a;let p=t[i+1];i=o?ai(p):Ds(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ep(c,r))}return a}function xl(t){return t!==void 0}function kV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(fa(t)))),t}function FV(t,e){return(t.flags&(e?8:16))!==0}function LV(t,e,n,r,i,s){let o=e.consts,a=gl(o,i),c=Jl(e,t,2,r,a);return JD(e,n,c,gl(o,s)),c.attrs!==null&&pg(c,c.attrs,!1),c.mergedAttrs!==null&&pg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function bb(t,e,n,r){let i=re(),s=Le(),o=rt+t,a=i[me],c=s.firstCreatePass?LV(o,s,i,e,n,r):s.data[o],u=Ab(s,i,c,a,e,t);i[o]=u;let l=jg(c);return da(c,!0),jD(a,u,c),!ga(c)&&zg()&&am(s,i,u,c),Rk()===0&&ii(u,i),Nk(),l&&(WD(s,i,c),zD(s,c,i)),r!==null&&KD(i,c),bb}function Sb(){let t=gt();zT()?Fk():(t=t.parent,da(t,!1));let e=t;Pk(e)&&Ok(),Mk();let n=Le();return n.firstCreatePass&&(Wg(n,t),xT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Qk(e)&&KC(n,e,re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Yk(e)&&KC(n,e,re(),e.stylesWithoutHost,!1),Sb}function Em(t,e,n,r){return bb(t,e,n,r),Sb(),Em}var Ab=(t,e,n,r,i,s)=>(wn(!0),Kl(r,i,eD()));function VV(t,e,n,r,i,s){let o=e[Zt],a=!o||la()||ga(n)||zl(o,s);if(wn(a),a)return Kl(r,i,eD());let c=Zl(o,t,e,n);return bD(o,s)&&Gl(o,s,c.nextSibling),o&&(pD(n)||gD(c))&&ua(n)&&(xk(n),VD(c)),c}function UV(){Ab=VV}var jV=(t,e,n,r)=>(wn(!0),sm(e[me],""));function BV(t,e,n,r){let i,s=e[Zt],o=!s||la()||ga(n);if(wn(o),o)return sm(e[me],"");let a=Zl(s,t,e,n),c=xF(s,r);return Gl(s,r,a),i=ed(c,a),i}function $V(){jV=BV}function z7(){return re()}var Ol="en-US";var HV=Ol;function qV(t){typeof t=="string"&&(HV=t.toLowerCase().replace(/_/g,"-"))}function Rb(t,e,n){let r=t[me];switch(n){case Node.COMMENT_NODE:return sm(r,e);case Node.TEXT_NODE:return im(r,e);case Node.ELEMENT_NODE:return Kl(r,e,null)}}var GV=(t,e,n,r)=>(wn(!0),Rb(t,n,r));function zV(t,e,n,r){return wn(!0),Rb(t,n,r)}function WV(){GV=zV}function Ps(t,e,n,r){let i=re(),s=Le(),o=gt();return Nb(s,i,i[me],o,t,e,r),Ps}function KV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Jo],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Nb(t,e,n,r,i,s,o){let a=jg(r),u=t.firstCreatePass&&rb(t),l=e[en],d=nb(e),h=!0;if(r.type&3||o){let y=Pt(r,e),v=o?o(y):y,D=d.length,F=o?de=>o(nn(de[r.index])):r.index,U=null;if(!o&&a&&(U=KV(t,e,i,r.index)),U!==null){let de=U.__ngLastListenerFn__||U;de.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,h=!1}else{s=JC(r,e,l,s,!1);let de=n.listen(v,i,s);d.push(s,de),u&&u.push(i,F,D,D+1)}}else s=JC(r,e,l,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let y=p.length;if(y)for(let v=0;v<y;v+=2){let D=p[v],F=p[v+1],Ge=e[D][F].subscribe(s),ae=d.length;d.push(s,Ge),u&&u.push(i,r.index,ae,-(ae+1))}}}function YC(t,e,n,r){let i=ie(null);try{return pn(6,e,n),n(r)!==!1}catch(s){return ib(t,s),!1}finally{pn(7,e,n),ie(i)}}function JC(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Cr(t.index,e):e;pm(a);let c=YC(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=YC(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function W7(t=1){return Gk(t)}function QV(t,e,n){return Mb(t,"",e,"",n),QV}function Mb(t,e,n,r,i){let s=re(),o=Db(s,e,n,r);if(o!==Tr){let a=Le(),c=Hl();dm(a,c,s,t,o,s[me],i,!1)}return Mb}function Pb(t,e,n,r){QL(t,e,n,r)}function K7(t,e,n){KL(t,e,n)}function xb(t){let e=re(),n=Le(),r=KT();Hg(r+1);let i=wm(n,r);if(t.dirty&&Tk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=XL(e,r);t.reset(s,uF),t.notifyOnChanges()}return!0}return!1}function Ob(){return WL(re(),KT())}function YV(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Q7(t){let e=Lk();return BT(e,rt+t)}function Y7(t,e=""){let n=re(),r=Le(),i=t+rt,s=r.firstCreatePass?Jl(r,i,1,e,null):r.data[i],o=kb(r,n,s,e,t);n[i]=o,zg()&&am(r,n,o,s),da(s,!1)}var kb=(t,e,n,r,i)=>(wn(!0),im(e[me],r));function JV(t,e,n,r,i){let s=e[Zt],o=!s||la()||ga(n)||zl(s,i);return wn(o),o?im(e[me],r):Zl(s,t,e,n)}function XV(){kb=JV}function ZV(t){return Fb("",t,""),ZV}function Fb(t,e,n){let r=re(),i=Db(r,t,e,n);return i!==Tr&&j1(r,Ss(),i),Fb}function eU(t,e,n){Ib(e)&&(e=e());let r=re(),i=$l();if(Ms(r,i,e)){let s=Le(),o=Hl();dm(s,o,r,t,e,r[me],n,!1)}return eU}function J7(t,e){let n=Ib(t);return n&&t.set(e),n}function tU(t,e){let n=re(),r=Le(),i=gt();return Nb(r,n,n[me],i,t,e),tU}function nU(t,e,n){let r=Le();if(r.firstCreatePass){let i=Ir(t);Dg(n,r.data,r.blueprint,i,!0),Dg(e,r.data,r.blueprint,i,!1)}}function Dg(t,e,n,r,i){if(t=ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)Dg(t[s],e,n,r,i);else{let s=Le(),o=re(),a=gt(),c=Is(t)?t:ft(t.provide),u=RT(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Is(t)||!t.multi){let f=new ni(u,i,G),p=Lp(c,e,i?l:l+h,d);p===-1?(Qp(_l(a,o),s,c),Fp(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=Lp(c,e,l+h,d),p=Lp(c,e,l,l+h),y=f>=0&&n[f],v=p>=0&&n[p];if(i&&!v||!i&&!y){Qp(_l(a,o),s,c);let D=sU(i?iU:rU,n.length,i,r,u);!i&&v&&(n[p].providerFactory=D),Fp(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(D),o.push(D)}else{let D=Lb(n[i?p:f],u,!i&&r);Fp(s,t,f>-1?f:p,D)}!i&&r&&v&&n[p].componentProviders++}}}function Fp(t,e,n,r){let i=Is(e),s=ak(e);if(i||s){let c=(s?ft(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function Lb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function rU(t,e,n,r){return bg(this.multi,[])}function iU(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ri(n,n[j],this.providerFactory.index,r);s=a.slice(0,o),bg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],bg(i,s);return s}function bg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function sU(t,e,n,r,i){let s=new ni(t,n,G);return s.multi=[],s.index=e,s.componentProviders=0,Lb(s,i,r&&!n),s}function ya(t,e=[]){return n=>{n.providersResolver=(r,i)=>nU(r,i?i(t):t,e)}}var oU=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=bT(!1,r.type),s=i.length>0?nd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(N(Nt))});let t=e;return t})();function Vb(t){Ns("NgStandalone"),t.getStandaloneInjector=e=>e.get(oU).getOrCreateStandaloneInjector(t)}function X7(t,e,n,r){return Ub(re(),WT(),t,e,n,r)}function aU(t,e){let n=t[e];return n===Tr?void 0:n}function Ub(t,e,n,r,i,s){let o=e+n;return Ms(t,o,i)?gV(t,o+1,s?r.call(s,i):r(i)):aU(t,o+1)}function Z7(t,e){let n=Le(),r,i=t+rt;n.firstCreatePass?(r=cU(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Xr(r.type,!0)),o,a=Et(G);try{let c=vl(!1),u=s();return vl(c),YV(n,re(),i,u),u}finally{Et(a)}}function cU(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function eY(t,e,n){let r=t+rt,i=re(),s=BT(i,r);return uU(i,r)?Ub(i,WT(),e,s.transform,n,s):s.transform(n)}function uU(t,e){return t[j].data[e].pure}var nl=null;function lU(t){nl!==null&&(t.defaultEncapsulation!==nl.defaultEncapsulation||t.preserveWhitespaces!==nl.preserveWhitespaces)||(nl=t)}var Kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},jb=new Kn("17.3.5"),id=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Cm=new A(""),va=new A(""),sd=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Tm||(dU(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(N(J),N(od),N(va))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),od=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Tm?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function dU(t){Tm=t}var Tm;function li(t){return!!t&&typeof t.then=="function"}function Bb(t){return!!t&&typeof t.subscribe=="function"}var ad=new A(""),$b=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=w(ad,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(li(o))r.push(o);else if(Bb(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xs=new A("");function hU(){zE(()=>{throw new S(600,!1)})}function fU(t){return t.isBoundToModule}function pU(t,e,n){try{let r=n();return li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Hb(t,e){return Array.isArray(e)?e.reduce(Hb,t):T(T({},t),e)}var Xn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=w(fD),this.afterRenderEffectManager=w(vm),this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=w(pa).hasPendingTasks.pipe($(r=>!r)),this._injector=w(Nt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Sl;if(!this._injector.get($b).done){let f=!s&&ET(r),p=!1;throw new S(405,p)}let a;s?a=r:a=this._injector.get(td).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=fU(a)?void 0:this._injector.get(Er),u=i||a.selector,l=a.create(Ve.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Cm,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ul(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new S(101,!1);let i=ie(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,ie(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===ob)throw new S(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)gU(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;ul(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(xs,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ul(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new S(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ul(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var rl;function Dm(t){rl??=new WeakMap;let e=rl.get(t);if(e)return e;let n=t.isStable.pipe(Yt(r=>r)).toPromise().then(()=>{});return rl.set(t,n),t.onDestroy(()=>rl?.delete(t)),n}function gU(t,e,n){!e&&!Sg(t)||mU(t,n,e)}function Sg(t){return $g(t)}function mU(t,e,n){let r;n?(r=0,t[x]|=1024):t[x]&64?r=0:r=1,ab(t,e,r)}var Ag=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},cd=(()=>{let e=class e{compileModuleSync(r){return new Pl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=CT(r),o=PD(s.declarations).reduce((a,c)=>{let u=wr(c);return u&&a.push(new Ts(u)),a},[]);return new Ag(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yU=new A("");function vU(t,e,n){let r=new Pl(n);return Promise.resolve(r)}function XC(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var _U=(()=>{let e=class e{constructor(){this.zone=w(J),this.applicationRef=w(Xn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wU(t){return[{provide:J,useFactory:t},{provide:Zr,multi:!0,useFactory:()=>{let e=w(_U,{optional:!0});return()=>e.initialize()}},{provide:Zr,multi:!0,useFactory:()=>{let e=w(CU);return()=>{e.initialize()}}},{provide:fD,useFactory:IU}]}function IU(){let t=w(J),e=w(yn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function EU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var CU=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=w(J),this.pendingTasks=w(pa)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TU(){return typeof $localize<"u"&&$localize.locale||Ol}var bm=new A("",{providedIn:"root",factory:()=>w(bm,z.Optional|z.SkipSelf)||TU()});var qb=new A(""),Gb=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=bL(i?.ngZone,EU({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=hV(r.moduleType,this.injector,wU(()=>s)),a=o.injector.get(yn,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{ul(this._modules,o),c.unsubscribe()})}),pU(a,s,()=>{let c=o.injector.get($b);return c.runInitializers(),c.donePromise.then(()=>{let u=o.injector.get(bm,Ol);return qV(u||Ol),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=Hb({},i);return vU(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(Xn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new S(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(qb,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(N(Ve))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Wo=null,zb=new A("");function DU(t){if(Wo&&!Wo.get(zb,!1))throw new S(400,!1);hU(),Wo=t;let e=t.get(Gb);return AU(t),e}function Sm(t,e,n=[]){let r=`Platform: ${e}`,i=new A(r);return(s=[])=>{let o=Wb();if(!o||o.injector.get(zb,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):DU(bU(a,r))}return SU(i)}}function bU(t=[],e){return Ve.create({name:e,providers:[{provide:jl,useValue:"platform"},{provide:qb,useValue:new Set([()=>Wo=null])},...t]})}function SU(t){let e=Wb();if(!e)throw new S(401,!1);return e}function Wb(){return Wo?.get(Gb)??null}function AU(t){t.get(Jg,null)?.forEach(n=>n())}var br=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RU;let t=e;return t})();function RU(t){return NU(gt(),re(),(t&16)===16)}function NU(t,e,n){if(ua(t)&&!n){let r=Cr(t.index,e);return new si(r,r)}else if(t.type&47){let r=e[Bt];return new si(r,e)}return null}var Rg=class{constructor(){}supports(e){return Eb(e)}create(e){return new Ng(e)}},MU=(t,e)=>e,Ng=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MU}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<ZC(r,i,s)?n:r,a=ZC(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Eb(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,fV(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Mg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new kl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Pg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},kl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Pg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ZC(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function eT(){return new Am([new Rg])}var Am=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||eT()),deps:[[e,new Og,new Ye]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new S(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:eT});let t=e;return t})();var Kb=Sm(null,"core",[]),Qb=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(N(Xn))},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})();var tT=!1,PU=!1;function xU(){tT||(tT=!0,RF(),UV(),XV(),$V(),_V(),$L(),mL(),w1(),WV())}function OU(t,e){return Dm(t)}function Yb(){return aa([{provide:Ju,useFactory:()=>{let t=!0;return Go()&&(t=!!w(ui,{optional:!0})?.get(TD,null)),t&&Ns("NgHydration"),t}},{provide:Zr,useValue:()=>{PU=!!w(OF,{optional:!0}),Go()&&w(Ju)&&(kU(),xU())},multi:!0},{provide:AD,useFactory:()=>Go()&&w(Ju)},{provide:xs,useFactory:()=>{if(Go()&&w(Ju)){let t=w(Xn),e=w(Ve);return()=>{OU(t,e).then(()=>{aL(t)})}}return()=>{}},multi:!0}])}function kU(){let t=ql(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===SF){e=n;break}if(!e)throw new S(-507,!1)}function Sr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Jb(t){let e=wr(t);if(!e)return null;let n=new Ts(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var rS=null;function In(){return rS}function iS(t){rS??=t}var ud=class{};var mt=new A(""),Om=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(FU),providedIn:"platform"});let t=e;return t})(),sS=new A(""),FU=(()=>{let e=class e extends Om{constructor(){super(),this._doc=w(mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(r){let i=In().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=In().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function km(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Xb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Zn(t){return t&&t[0]!=="?"?"?"+t:t}var er=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(Fm),providedIn:"root"});let t=e;return t})(),oS=new A(""),Fm=(()=>{let e=class e extends er{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??w(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return km(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Zn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Zn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Zn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(N(Om),N(oS,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aS=(()=>{let e=class e extends er{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=km(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Zn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Zn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(N(Om),N(oS,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Os=(()=>{let e=class e{constructor(r){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=UU(Xb(Zb(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Zn(i))}normalize(r){return e.stripTrailingSlash(VU(this._basePath,Zb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Zn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Zn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Zn,e.joinWithSlash=km,e.stripTrailingSlash=Xb,e.\u0275fac=function(i){return new(i||e)(N(er))},e.\u0275prov=R({token:e,factory:()=>LU(),providedIn:"root"});let t=e;return t})();function LU(){return new Os(N(er))}function VU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Zb(t){return t.replace(/\/index.html$/,"")}function UU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Lm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Rm=/\s+/,eS=[],DY=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=eS,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Rm):eS}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Rm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Rm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(G(xt),G(Yn))},e.\u0275dir=Oe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Ke.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Nm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bY=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Nm(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),tS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);tS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(G(Dr),G(oi),G(Am))},e.\u0275dir=Oe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function tS(t,e){t.context.$implicit=e.item}var SY=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Mm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){nS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){nS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(G(Dr),G(oi))},e.\u0275dir=Oe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Mm=class{constructor(){this.$implicit=null,this.ngIf=null}};function nS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}function jU(t,e){return new S(2100,!1)}var BU=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,AY=(()=>{let e=class e{transform(r){if(r==null)return null;if(typeof r!="string")throw jU(e,r);return r.replace(BU,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=_T({name:"titlecase",type:e,pure:!0,standalone:!0});let t=e;return t})();var cS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})(),Vm="browser",$U="server";function HU(t){return t===Vm}function _a(t){return t===$U}var uS=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>HU(w(Ot))?new Pm(w(mt),window):new xm});let t=e;return t})(),Pm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=qU(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function qU(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ld=class{};var hd=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var yS=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(yS||{}),Um=class{constructor(e,n=vS.Ok,r="OK"){this.headers=e.headers||new hd,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var fd=class t extends Um{constructor(e={}){super(e),this.type=yS.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var vS=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(vS||{});var WU=new A("");var lS="b",dS="h",hS="s",fS="st",pS="u",gS="rt",dd=new A(""),KU=["GET","HEAD"];function QU(t,e){let d=w(dd),{isCacheActive:n}=d,r=jE(d,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!KU.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=w(ui),a=JU(t),c=o.get(a,null),u=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(u=i.includeHeaders),c){let{[lS]:h,[gS]:f,[dS]:p,[hS]:y,[fS]:v,[pS]:D}=c,F=h;switch(f){case"arraybuffer":F=new TextEncoder().encode(h).buffer;break;case"blob":F=new Blob([h]);break}let U=new hd(p);return P(new fd({body:F,headers:U,status:y,statusText:v,url:D}))}let l=_a(w(Ot));return e(t).pipe(Ae(h=>{h instanceof fd&&l&&o.set(a,{[lS]:h.body,[dS]:YU(h.headers,u),[hS]:h.status,[fS]:h.statusText,[pS]:h.url||"",[gS]:t.responseType})}))}function YU(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function mS(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function JU(t){let{params:e,method:n,responseType:r,url:i}=t,s=mS(e),o=t.serializeBody();o instanceof URLSearchParams?o=mS(o):typeof o!="string"&&(o="");let a=[n,r,i,o,s].join("|"),c=XU(a);return c}function XU(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function _S(t){return[{provide:dd,useFactory:()=>(Ns("NgHttpTransferCache"),T({isCacheActive:!0},t))},{provide:WU,useValue:QU,multi:!0,deps:[ui,dd]},{provide:xs,multi:!0,useFactory:()=>{let e=w(Xn),n=w(dd);return()=>{Dm(e).then(()=>{n.isCacheActive=!1})}}}]}var $m=class extends ud{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Hm=class t extends $m{static makeCurrent(){iS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ZU();return n==null?null:ej(n)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lm(document.cookie,e)}},wa=null;function ZU(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}function ej(t){return new URL(t,document.baseURI).pathname}var qm=class{addToWindow(e){We.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new S(5103,!1);return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=We.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?In().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},tj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Gm=new A(""),CS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new S(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(N(Gm),N(J))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),pd=class{constructor(e){this._doc=e}},jm="ng-app-id",TS=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_a(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${jm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(jm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(jm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(N(mt),N(ha),N(Xg,8),N(Ot))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Km=/%COMP%/g,DS="%COMP%",nj=`_nghost-${DS}`,rj=`_ngcontent-${DS}`,ij=!0,sj=new A("",{providedIn:"root",factory:()=>ij});function oj(t){return rj.replace(Km,t)}function aj(t){return nj.replace(Km,t)}function bS(t,e){return e.map(n=>n.replace(Km,t))}var wS=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_a(c),this.defaultRenderer=new Ia(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===mn.ShadowDom&&(i=ue(T({},i),{encapsulation:mn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof gd?s.applyToHost(r):s instanceof Ea&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case mn.Emulated:o=new gd(u,l,i,this.appId,d,a,c,h);break;case mn.ShadowDom:return new zm(u,l,r,i,a,c,this.nonce,h);default:o=new Ea(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(N(CS),N(TS),N(ha),N(sj),N(mt),N(Ot),N(J),N(Xg))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Ia=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Bm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(IS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(IS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Bm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Bm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(n,r,i&Wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=In().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function IS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var zm=class extends Ia{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=bS(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ea=class extends Ia{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?bS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},gd=class extends Ea{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=oj(u),this.hostAttr=aj(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},cj=(()=>{let e=class e extends pd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(N(mt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),ES=["alt","control","meta","shift"],uj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dj=(()=>{let e=class e extends pd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),ES.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=uj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ES.forEach(a=>{if(a!==s){let c=lj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(N(mt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function hj(){Hm.makeCurrent()}function fj(){return new yn}function pj(){return wD(document),document}var gj=[{provide:Ot,useValue:Vm},{provide:Jg,useValue:hj,multi:!0},{provide:mt,useFactory:pj,deps:[]}],rJ=Sm(Kb,"browser",gj),mj=new A(""),yj=[{provide:va,useClass:qm,deps:[]},{provide:Cm,useClass:sd,deps:[J,od,va]},{provide:sd,useClass:sd,deps:[J,od,va]}],vj=[{provide:jl,useValue:"root"},{provide:yn,useFactory:fj,deps:[]},{provide:Gm,useClass:cj,multi:!0,deps:[mt,J,Ot]},{provide:Gm,useClass:dj,multi:!0,deps:[mt]},wS,TS,CS,{provide:na,useExisting:wS},{provide:ld,useClass:tj,deps:[]},[]],iJ=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ha,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(N(mj,12))},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({providers:[...vj,...yj],imports:[cS,Qb]});let t=e;return t})();var SS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(N(mt))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wm=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(Wm||{});function sJ(...t){let e=[],n=new Set,r=n.has(Wm.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return aa([[],Yb(),n.has(Wm.NoHttpTransferCache)||r?[]:_S({}),e])}var H="primary",La=Symbol("RouteTitle"),Zm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Us(t){return new Zm(t)}function wj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ij(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!En(t[n],e[n]))return!1;return!0}function En(t,e){let n=t?ey(t):void 0,r=e?ey(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!LS(t[i],e[i]))return!1;return!0}function ey(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function VS(t){return t.length>0?t[t.length-1]:null}function Pr(t){return yp(t)?t:li(t)?ge(Promise.resolve(t)):P(t)}var Ej={exact:jS,subset:BS},US={exact:Cj,subset:Tj,ignored:()=>!0};function AS(t,e,n){return Ej[n.paths](t.root,e.root,n.matrixParams)&&US[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Cj(t,e){return En(t,e)}function jS(t,e,n){if(!hi(t.segments,e.segments)||!vd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!jS(t.children[r],e.children[r],n))return!1;return!0}function Tj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LS(t[n],e[n]))}function BS(t,e,n){return $S(t,e,e.segments,n)}function $S(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!hi(i,n)||e.hasChildren()||!vd(i,n,r))}else if(t.segments.length===n.length){if(!hi(t.segments,n)||!vd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!BS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!hi(t.segments,i)||!vd(t.segments,i,r)||!t.children[H]?!1:$S(t.children[H],e,s,r)}}function vd(t,e,n){return e.every((r,i)=>US[n](t[i].parameters,r.parameters))}var Rr=class{constructor(e=new ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){return Sj.serialize(this)}},ce=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _d(this)}},di=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Us(this.parameters),this._parameterMap}toString(){return qS(this)}};function Dj(t,e){return hi(t,e)&&t.every((n,r)=>En(n.parameters,e[r].parameters))}function hi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function bj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===H&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==H&&(n=n.concat(e(i,r)))}),n}var Va=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new Ra,providedIn:"root"});let t=e;return t})(),Ra=class{parse(e){let n=new ny(e);return new Rr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ca(e.root,!0)}`,r=Nj(e.queryParams),i=typeof e.fragment=="string"?`#${Aj(e.fragment)}`:"";return`${n}${r}${i}`}},Sj=new Ra;function _d(t){return t.segments.map(e=>qS(e)).join("/")}function Ca(t,e){if(!t.hasChildren())return _d(t);if(e){let n=t.children[H]?Ca(t.children[H],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==H&&r.push(`${i}:${Ca(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=bj(t,(r,i)=>i===H?[Ca(t.children[H],!1)]:[`${i}:${Ca(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[H]!=null?`${_d(t)}/${n[0]}`:`${_d(t)}/(${n.join("//")})`}}function HS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function md(t){return HS(t).replace(/%3B/gi,";")}function Aj(t){return encodeURI(t)}function ty(t){return HS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wd(t){return decodeURIComponent(t)}function RS(t){return wd(t.replace(/\+/g,"%20"))}function qS(t){return`${ty(t.path)}${Rj(t.parameters)}`}function Rj(t){return Object.entries(t).map(([e,n])=>`;${ty(e)}=${ty(n)}`).join("")}function Nj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${md(n)}=${md(i)}`).join("&"):`${md(n)}=${md(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Mj=/^[^\/()?;#]+/;function Qm(t){let e=t.match(Mj);return e?e[0]:""}var Pj=/^[^\/()?;=#]+/;function xj(t){let e=t.match(Pj);return e?e[0]:""}var Oj=/^[^=?&#]+/;function kj(t){let e=t.match(Oj);return e?e[0]:""}var Fj=/^[^&#]+/;function Lj(t){let e=t.match(Fj);return e?e[0]:""}var ny=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[H]=new ce(e,n)),r}parseSegment(){let e=Qm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new di(wd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=xj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qm(this.remaining);i&&(r=i,this.capture(r))}e[wd(n)]=wd(r)}parseQueryParam(e){let n=kj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Lj(this.remaining);o&&(r=o,this.capture(r))}let i=RS(n),s=RS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=H);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[H]:new ce([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}};function GS(t){return t.segments.length>0?new ce([],{[H]:t}):t}function zS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=zS(i);if(r===H&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ce(t.segments,e);return Vj(n)}function Vj(t){if(t.numberOfChildren===1&&t.children[H]){let e=t.children[H];return new ce(t.segments.concat(e.segments),e.children)}return t}function js(t){return t instanceof Rr}function Uj(t,e,n=null,r=null){let i=WS(t);return KS(i,e,n,r)}function WS(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new ce(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=GS(r);return e??i}function KS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ym(i,i,i,n,r);let s=jj(e);if(s.toRoot())return Ym(i,i,new ce([],{}),n,r);let o=Bj(s,i,t),a=o.processChildren?ba(o.segmentGroup,o.index,s.commands):YS(o.segmentGroup,o.index,s.commands);return Ym(i,o.segmentGroup,a,n,r)}function Id(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Na(t){return typeof t=="object"&&t!=null&&t.outlets}function Ym(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=QS(t,e,n);let a=GS(zS(o));return new Rr(a,s,i)}function QS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=QS(s,e,n)}),new ce(t.segments,r)}var Ed=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Id(r[0]))throw new S(4003,!1);let i=r.find(Na);if(i&&i!==VS(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ed(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ed(n,e,r)}var Ls=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Bj(t,e,n){if(t.isAbsolute)return new Ls(e,!0,0);if(!n)return new Ls(e,!1,NaN);if(n.parent===null)return new Ls(n,!0,0);let r=Id(t.commands[0])?0:1,i=n.segments.length-1+r;return $j(n,i,t.numberOfDoubleDots)}function $j(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new Ls(r,!1,i-s)}function Hj(t){return Na(t[0])?t[0].outlets:{[H]:t}}function YS(t,e,n){if(t??=new ce([],{}),t.segments.length===0&&t.hasChildren())return ba(t,e,n);let r=qj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ce(t.segments.slice(0,r.pathIndex),{});return s.children[H]=new ce(t.segments.slice(r.pathIndex),t.children),ba(s,0,i)}else return r.match&&i.length===0?new ce(t.segments,{}):r.match&&!t.hasChildren()?ry(t,e,n):r.match?ba(t,0,i):ry(t,e,n)}function ba(t,e,n){if(n.length===0)return new ce(t.segments,{});{let r=Hj(n),i={};if(Object.keys(r).some(s=>s!==H)&&t.children[H]&&t.numberOfChildren===1&&t.children[H].segments.length===0){let s=ba(t.children[H],e,n);return new ce(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=YS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ce(t.segments,i)}}function qj(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Na(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!MS(c,u,o))return s;r+=2}else{if(!MS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ry(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Na(s)){let c=Gj(s.outlets);return new ce(r,c)}if(i===0&&Id(n[0])){let c=t.segments[e];r.push(new di(c.path,NS(n[0]))),i++;continue}let o=Na(s)?s.outlets[H]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Id(a)?(r.push(new di(o,NS(a))),i+=2):(r.push(new di(o,{})),i++)}return new ce(r,{})}function Gj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ry(new ce([],{}),0,r))}),e}function NS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function MS(t,e,n){return t==n.path&&En(e,n.parameters)}var Sa="imperative",Ue=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ue||{}),$t=class{constructor(e,n){this.id=e,this.url=n}},Bs=class extends $t{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ue.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends $t{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ue.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ft=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ft||{}),Cd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Cd||{}),Nr=class extends $t{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ue.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends $t{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ue.NavigationSkipped}},Ma=class extends $t{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ue.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Td=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iy=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sy=class extends $t{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ue.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},oy=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ay=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cy=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uy=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ly=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dy=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hy=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fy=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ue.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pa=class{},xa=class{constructor(e){this.url=e}};var py=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ua,this.attachRef=null}},Ua=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new py,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=gy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=gy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=my(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return my(e,this._root).map(n=>n.value)}};function gy(t,e){if(t===e.value)return e;for(let n of e.children){let r=gy(t,n);if(r)return r}return null}function my(t,e){if(t===e.value)return[e];for(let n of e.children){let r=my(t,n);if(r.length)return r.unshift(e),r}return[]}var kt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Sd=class extends bd{constructor(e,n){super(e),this.snapshot=n,by(this,e)}toString(){return this.snapshot.toString()}};function JS(t){let e=zj(t),n=new ze([new di("",{})]),r=new ze({}),i=new ze({}),s=new ze({}),o=new ze(""),a=new fi(n,r,s,o,i,H,t,e.root);return a.snapshot=e.root,new Sd(new kt(a,[]),e)}function zj(t){let e={},n={},r={},i="",s=new Oa([],e,r,i,n,H,t,null,{});return new Ad("",new kt(s,[]))}var fi=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($(u=>u[La]))??P(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>Us(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>Us(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),i?.data),t._resolvedData)}:r={params:T({},t.params),data:T({},t.data),resolve:T(T({},t.data),t._resolvedData??{})},i&&ZS(i)&&(r.resolve[La]=i.title),r}var Oa=class{get title(){return this.data?.[La]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Us(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ad=class extends bd{constructor(e,n){super(n),this.url=e,by(this,n)}toString(){return XS(this._root)}};function by(t,e){e.value._routerState=t,e.children.forEach(n=>by(t,n))}function XS(t){let e=t.children.length>0?` { ${t.children.map(XS).join(", ")} } `:"";return`${t.value}${e}`}function Jm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,En(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),En(e.params,n.params)||t.paramsSubject.next(n.params),Ij(e.url,n.url)||t.urlSubject.next(n.url),En(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function yy(t,e){let n=En(t.params,e.params)&&Dj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||yy(t.parent,e.parent))}function ZS(t){return typeof t.title=="string"||t.title===null}var Wj=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=H,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=w(Ua),this.location=w(Dr),this.changeDetector=w(br),this.environmentInjector=w(Nt),this.inputBinder=w(xd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new vy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qn]});let t=e;return t})(),vy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===fi?this.route:e===Ua?this.childContexts:this.parent.get(e,n)}},xd=new A(""),PS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=qo([i.queryParams,i.params,i.data]).pipe(At(([o,a,c],u)=>(c=T(T(T({},o),a),c),u===0?P(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Jb(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function Kj(t,e,n){let r=ka(t,e._root,n?n._root:void 0);return new Sd(r,e)}function ka(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Qj(t,e,n);return new kt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ka(t,a)),o}}let r=Yj(e.value),i=e.children.map(s=>ka(t,s));return new kt(r,i)}}function Qj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ka(t,r,i);return ka(t,r)})}function Yj(t){return new fi(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var e0="ngNavigationCancelingError";function t0(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=js(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=n0(!1,Ft.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function n0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[e0]=!0,n.cancellationCode=e,n}function Jj(t){return r0(t)&&js(t.url)}function r0(t){return!!t&&t[e0]}var Xj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vT({type:e,selectors:[["ng-component"]],standalone:!0,features:[Vb],decls:1,vars:0,template:function(i,s){i&1&&Em(0,"router-outlet")},dependencies:[Wj],encapsulation:2});let t=e;return t})();function Zj(t,e){return t.providers&&!t._injector&&(t._injector=nd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Sy(t){let e=t.children&&t.children.map(Sy),n=e?ue(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==H&&(n.component=Xj),n}function Cn(t){return t.outlet||H}function eB(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function ja(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var tB=(t,e,n,r)=>$(i=>(new _y(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),_y=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Jm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Jm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Jm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ja(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Rd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vs=class{constructor(e,n){this.component=e,this.route=n}};function nB(t,e,n){let r=t._root,i=e?e._root:null;return Ta(r,i,n,[r.value])}function rB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Hs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sT(t)?t:e.get(t):r}function Ta(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fs(e);return t.children.forEach(o=>{iB(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Aa(a,n.getContext(o),i)),i}function iB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=sB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Rd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ta(t,e,a?a.children:null,r,i):Ta(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Vs(a.outlet.component,o))}else o&&Aa(e,a,i),i.canActivateChecks.push(new Rd(r)),s.component?Ta(t,null,a?a.children:null,r,i):Ta(t,null,n,r,i);return i}function sB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(t.url,e.url)||!En(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yy(t,e)||!En(t.queryParams,e.queryParams);case"paramsChange":default:return!yy(t,e)}}function Aa(t,e,n){let r=Fs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Aa(o,e.children.getContext(s),n):Aa(o,null,n):Aa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vs(e.outlet.component,i)):n.canDeactivateChecks.push(new Vs(null,i)):n.canDeactivateChecks.push(new Vs(null,i))}function Ba(t){return typeof t=="function"}function oB(t){return typeof t=="boolean"}function aB(t){return t&&Ba(t.canLoad)}function cB(t){return t&&Ba(t.canActivate)}function uB(t){return t&&Ba(t.canActivateChild)}function lB(t){return t&&Ba(t.canDeactivate)}function dB(t){return t&&Ba(t.canMatch)}function i0(t){return t instanceof $n||t?.name==="EmptyError"}var yd=Symbol("INITIAL_VALUE");function $s(){return At(t=>qo(t.map(e=>e.pipe(Hn(1),Qu(yd)))).pipe($(e=>{for(let n of e)if(n!==!0){if(n===yd)return yd;if(n===!1||n instanceof Rr)return n}return!0}),It(e=>e!==yd),Hn(1)))}function hB(t,e){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?P(ue(T({},n),{guardsResult:!0})):fB(o,r,i,t).pipe(Ne(a=>a&&oB(a)?pB(r,s,t,e):P(a)),$(a=>ue(T({},n),{guardsResult:a})))})}function fB(t,e,n,r){return ge(t).pipe(Ne(i=>_B(i.component,i.route,n,e,r)),Yt(i=>i!==!0,!0))}function pB(t,e,n,r){return ge(e).pipe(mr(i=>ds(mB(i.route.parent,r),gB(i.route,r),vB(t,i.path,n),yB(t,i.route,n))),Yt(i=>i!==!0,!0))}function gB(t,e){return t!==null&&e&&e(new hy(t)),P(!0)}function mB(t,e){return t!==null&&e&&e(new ly(t)),P(!0)}function yB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return P(!0);let i=r.map(s=>zu(()=>{let o=ja(e)??n,a=Hs(s,o),c=cB(a)?a.canActivate(e,t):vn(o,()=>a(e,t));return Pr(c).pipe(Yt())}));return P(i).pipe($s())}function vB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>rB(o)).filter(o=>o!==null).map(o=>zu(()=>{let a=o.guards.map(c=>{let u=ja(o.node)??n,l=Hs(c,u),d=uB(l)?l.canActivateChild(r,t):vn(u,()=>l(r,t));return Pr(d).pipe(Yt())});return P(a).pipe($s())}));return P(s).pipe($s())}function _B(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return P(!0);let o=s.map(a=>{let c=ja(e)??i,u=Hs(a,c),l=lB(u)?u.canDeactivate(t,e,n,r):vn(c,()=>u(t,e,n,r));return Pr(l).pipe(Yt())});return P(o).pipe($s())}function wB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return P(!0);let s=i.map(o=>{let a=Hs(o,t),c=aB(a)?a.canLoad(e,n):vn(t,()=>a(e,n));return Pr(c)});return P(s).pipe($s(),s0(r))}function s0(t){return Su(Ae(e=>{if(js(e))throw t0(t,e)}),$(e=>e===!0))}function IB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return P(!0);let s=i.map(o=>{let a=Hs(o,t),c=dB(a)?a.canMatch(e,n):vn(t,()=>a(e,n));return Pr(c)});return P(s).pipe($s(),s0(r))}var Fa=class{constructor(e){this.segmentGroup=e||null}},Nd=class extends Error{constructor(e){super(),this.urlTree=e}};function ks(t){return ls(new Fa(t))}function EB(t){return ls(new S(4e3,!1))}function CB(t){return ls(n0(!1,Ft.GuardRejected))}var wy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return P(r);if(i.numberOfChildren>1||!i.children[H])return EB(e.redirectTo);i=i.children[H]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Nd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Rr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ce(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Iy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TB(t,e,n,r,i){let s=Ay(t,e,n);return s.matched?(r=Zj(e,r),IB(r,e,n,i).pipe($(o=>o===!0?s:T({},Iy)))):P(s)}function Ay(t,e,n){if(e.path==="**")return DB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},Iy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wj)(n,t,e);if(!i)return T({},Iy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?T(T({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function DB(t){return{matched:!0,parameters:t.length>0?VS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function xS(t,e,n,r){return n.length>0&&AB(t,n,r)?{segmentGroup:new ce(e,SB(r,new ce(n,t.children))),slicedSegments:[]}:n.length===0&&RB(t,n,r)?{segmentGroup:new ce(t.segments,bB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ce(t.segments,t.children),slicedSegments:n}}function bB(t,e,n,r){let i={};for(let s of n)if(Od(t,e,s)&&!r[Cn(s)]){let o=new ce([],{});i[Cn(s)]=o}return T(T({},r),i)}function SB(t,e){let n={};n[H]=e;for(let r of t)if(r.path===""&&Cn(r)!==H){let i=new ce([],{});n[Cn(r)]=i}return n}function AB(t,e,n){return n.some(r=>Od(t,e,r)&&Cn(r)!==H)}function RB(t,e,n){return n.some(r=>Od(t,e,r))}function Od(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function NB(t,e,n,r){return Cn(t)!==r&&(r===H||!Od(e,n,t))?!1:Ay(e,t,n).matched}function MB(t,e,n){return e.length===0&&!t.children[n]}var Ey=class{};function PB(t,e,n,r,i,s,o="emptyOnly"){return new Cy(t,e,n,r,i,o,s).recognize()}var xB=31,Cy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new wy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){let e=xS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(n=>{let r=new Oa([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},H,this.rootComponentType,null,{}),i=new kt(r,n),s=new Ad("",i),o=Uj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,H).pipe(gr(r=>{if(r instanceof Nd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Dy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe($(s=>s instanceof kt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ge(i).pipe(mr(s=>{let o=r.children[s],a=eB(n,s);return this.processSegmentGroup(e,a,o,s)}),Ku((s,o)=>(s.push(...o),s)),yr(null),wp(),Ne(s=>{if(s===null)return ks(r);let o=o0(s);return OB(o),P(o)}))}processSegment(e,n,r,i,s,o){return ge(n).pipe(mr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(gr(c=>{if(c instanceof Fa)return P(null);throw c}))),Yt(a=>!!a),gr(a=>{if(i0(a))return MB(r,i,s)?P(new Ey):ks(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return NB(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):ks(i):ks(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Ay(n,i,s);if(!a)return ks(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xB&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ne(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=TB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(At(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(At(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Oa(l,h,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,FB(r),Cn(r),r.component??r._loadedComponent??null,r,LB(r)),{segmentGroup:p,slicedSegments:y}=xS(n,l,d,c);if(y.length===0&&p.hasChildren())return this.processChildren(u,c,p).pipe($(D=>D===null?null:new kt(f,D)));if(c.length===0&&y.length===0)return P(new kt(f,[]));let v=Cn(r)===s;return this.processSegment(u,c,p,y,v?H:s,!0).pipe($(D=>new kt(f,D instanceof kt?[D]:[])))}))):ks(n)))}getChildConfig(e,n,r){return n.children?P({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?P({routes:n._loadedRoutes,injector:n._loadedInjector}):wB(e,n,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(Ae(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):CB(n))):P({routes:[],injector:e})}};function OB(t){t.sort((e,n)=>e.value.outlet===H?-1:n.value.outlet===H?1:e.value.outlet.localeCompare(n.value.outlet))}function kB(t){let e=t.value.routeConfig;return e&&e.path===""}function o0(t){let e=[],n=new Set;for(let r of t){if(!kB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=o0(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!n.has(r))}function FB(t){return t.data||{}}function LB(t){return t.resolve||{}}function VB(t,e,n,r,i,s){return Ne(o=>PB(t,e,n,r,o.extractedUrl,i,s).pipe($(({state:a,tree:c})=>ue(T({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function UB(t,e){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return P(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of a0(c))o.add(u);let a=0;return ge(o).pipe(mr(c=>s.has(c)?jB(c,r,t,e):(c.data=Dy(c,c.parent,t).resolve,P(void 0))),Ae(()=>a++),fs(1),Ne(c=>a===o.size?P(n):St))})}function a0(t){let e=t.children.map(n=>a0(n)).flat();return[t,...e]}function jB(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!ZS(i)&&(s[La]=i.title),BB(s,t,e,r).pipe($(o=>(t._resolvedData=o,t.data=Dy(t,t.parent,n).resolve,null)))}function BB(t,e,n,r){let i=ey(t);if(i.length===0)return P({});let s={};return ge(i).pipe(Ne(o=>$B(t[o],e,n,r).pipe(Yt(),Ae(a=>{s[o]=a}))),fs(1),_p(s),gr(o=>i0(o)?St:ls(o)))}function $B(t,e,n,r){let i=ja(e)??r,s=Hs(t,i),o=s.resolve?s.resolve(e,n):vn(i,()=>s(e,n));return Pr(o)}function Xm(t){return At(e=>{let n=t(e);return n?ge(n).pipe($(()=>e)):P(e)})}var c0=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===H);return i}getResolvedTitleForRoute(r){return r.data[La]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(HB),providedIn:"root"});let t=e;return t})(),HB=(()=>{let e=class e extends c0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(N(SS))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$a=new A("",{providedIn:"root",factory:()=>({})}),Md=new A(""),Ry=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w(cd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return P(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Pr(r.loadComponent()).pipe($(u0),Ae(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),hs(()=>{this.componentLoaders.delete(r)})),s=new os(i,()=>new nt).pipe(ss());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return P({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=qB(i,this.compiler,r,this.onLoadEndListener).pipe(hs(()=>{this.childrenLoaders.delete(i)})),a=new os(o,()=>new nt).pipe(ss());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qB(t,e,n,r){return Pr(t.loadChildren()).pipe($(u0),Ne(i=>i instanceof ra||Array.isArray(i)?P(i):ge(e.compileModuleAsync(i))),$(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Md,[],{optional:!0,self:!0}).flat()),{routes:o.map(Sy),injector:s}}))}function GB(t){return t&&typeof t=="object"&&"default"in t}function u0(t){return GB(t)?t.default:t}var Ny=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(zB),providedIn:"root"});let t=e;return t})(),zB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),l0=new A(""),d0=new A("");function WB(t,e,n){let r=t.get(d0),i=t.get(mt);return t.get(J).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),KB(t))),{onViewTransitionCreated:c}=r;return c&&vn(t,()=>c({transition:a,from:e,to:n})),o})}function KB(t){return new Promise(e=>{ym(e,{injector:t})})}var My=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=w(Ry),this.environmentInjector=w(Nt),this.urlSerializer=w(Va),this.rootContexts=w(Ua),this.location=w(Os),this.inputBindingEnabled=w(xd,{optional:!0})!==null,this.titleStrategy=w(c0),this.options=w($a,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Ny),this.createViewTransition=w(l0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>P(void 0),this.rootComponentType=null;let r=s=>this.events.next(new cy(s)),i=s=>this.events.next(new uy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ue(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sa,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(It(o=>o.id!==0),$(o=>ue(T({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),At(o=>{let a=!1,c=!1;return P(o).pipe(At(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ft.SupersededByNewNavigation),St;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ue(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Cd.IgnoredSameUrlNavigation)),u.resolve(null),St}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return P(u).pipe(At(h=>{let f=this.transitions?.getValue();return this.events.next(new Bs(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?St:Promise.resolve(h)}),VB(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ue(T({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Td(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:y,extras:v}=u,D=new Bs(h,this.urlSerializer.serialize(f),p,y);this.events.next(D);let F=JS(this.rootComponentType).snapshot;return this.currentTransition=o=ue(T({},u),{targetSnapshot:F,urlAfterRedirects:f,extras:ue(T({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,P(o)}else{let h="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Cd.IgnoredByUrlHandlingStrategy)),u.resolve(null),St}}),Ae(u=>{let l=new iy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),$(u=>(this.currentTransition=o=ue(T({},u),{guards:nB(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),hB(this.environmentInjector,u=>this.events.next(u)),Ae(u=>{if(o.guardsResult=u.guardsResult,js(u.guardsResult))throw t0(this.urlSerializer,u.guardsResult);let l=new sy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),It(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ft.GuardRejected),!1)),Xm(u=>{if(u.guards.canActivateChecks.length)return P(u).pipe(Ae(l=>{let d=new oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),At(l=>{let d=!1;return P(l).pipe(UB(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Ft.NoDataFromResolver)}}))}),Ae(l=>{let d=new ay(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Xm(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ae(f=>{d.component=f}),$(()=>{})));for(let f of d.children)h.push(...l(f));return h};return qo(l(u.targetSnapshot.root)).pipe(yr(null),Hn(1))}),Xm(()=>this.afterPreactivation()),At(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ge(d).pipe($(()=>o)):P(o)}),$(u=>{let l=Kj(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ue(T({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ae(()=>{this.events.next(new Pa)}),tB(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Hn(1),Ae({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Ip(this.transitionAbortSubject.pipe(Ae(u=>{throw u}))),hs(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ft.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),gr(u=>{if(c=!0,r0(u))this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Jj(u)?this.events.next(new xa(u.url)):o.resolve(!1);else{this.events.next(new Ma(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return St}))}))}cancelNavigationTransition(r,i,s){let o=new Nr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QB(t){return t!==Sa}var YB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(JB),providedIn:"root"});let t=e;return t})(),Ty=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},JB=(()=>{let e=class e extends Ty{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),h0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>w(XB),providedIn:"root"});let t=e;return t})(),XB=(()=>{let e=class e extends h0{constructor(){super(...arguments),this.location=w(Os),this.urlSerializer=w(Va),this.options=w($a,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Ny),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Bs)this.stateMemento=this.createStateMemento();else if(r instanceof Mr)this.rawUrlTree=i.initialUrl;else if(r instanceof Td){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Pa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Nr&&(r.code===Ft.GuardRejected||r.code===Ft.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ma?this.restoreHistory(i,!0):r instanceof sn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Da=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Da||{});function f0(t,e){t.events.pipe(It(n=>n instanceof sn||n instanceof Nr||n instanceof Ma||n instanceof Mr),$(n=>n instanceof sn||n instanceof Mr?Da.COMPLETE:(n instanceof Nr?n.code===Ft.Redirect||n.code===Ft.SupersededByNewNavigation:!1)?Da.REDIRECTING:Da.FAILED),It(n=>n!==Da.REDIRECTING),Hn(1)).subscribe(()=>{e()})}function ZB(t){throw t}var e2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tr=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=w(id),this.stateManager=w(h0),this.options=w($a,{optional:!0})||{},this.pendingTasks=w(pa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(My),this.urlSerializer=w(Va),this.location=w(Os),this.urlHandlingStrategy=w(Ny),this._events=new nt,this.errorHandler=this.options.errorHandler||ZB,this.navigated=!1,this.routeReuseStrategy=w(YB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(Md,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(xd,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=w(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Nr&&i.code!==Ft.Redirect&&i.code!==Ft.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof sn)this.navigated=!0;else if(i instanceof xa){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||QB(s.source)};this.scheduleNavigation(a,Sa,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}r2(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=T({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Sy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=T(T({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=WS(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return KS(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=js(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Sa,null,i)}navigate(r,i={skipLocationChange:!1}){return n2(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=T({},e2):i===!1?s=T({},t2):s=i,js(r))return AS(this.currentUrlTree,r,s);let o=this.parseUrl(r);return AS(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return f0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function n2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new S(4008,!1)}function r2(t){return!(t instanceof Pa)&&!(t instanceof xa)}var OS=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new nt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:ND(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(G(tr),G(fi),Qg("tabindex"),G(Yn),G(xt),G(er))},e.\u0275dir=Oe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ps("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ma("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ke.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Sr],skipLocationChange:[Ke.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Sr],replaceUrl:[Ke.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Sr],routerLink:"routerLink"},standalone:!0,features:[Im,Qn]});let t=e;return t})(),CJ=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ce,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof sn&&this.update()})}ngAfterContentInit(){P(this.links.changes,P(null)).pipe(pr()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ge(r).pipe(pr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=i2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?r.isActive(o,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(G(tr),G(xt),G(Yn),G(br),G(OS,8))},e.\u0275dir=Oe({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&Pb(o,OS,5),i&2){let a;xb(a=Ob())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Qn]});let t=e;return t})();function i2(t){return!!t.paths}var Pd=class{};var s2=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(It(r=>r instanceof sn),mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=nd(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return ge(s).pipe(pr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=P(null);let o=s.pipe(Ne(a=>a===null?P(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ge([o,a]).pipe(pr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(N(tr),N(cd),N(Nt),N(Pd),N(Ry))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),p0=new A(""),o2=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Bs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof sn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Mr&&r.code===Cd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Dd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){$D()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function a2(t){return t.routerState.root}function Ha(t,e){return{\u0275kind:t,\u0275providers:e}}function c2(){let t=w(Ve);return e=>{let n=t.get(Xn);if(e!==n.components[0])return;let r=t.get(tr),i=t.get(g0);t.get(Py)===1&&r.initialNavigation(),t.get(m0,null,z.Optional)?.setUpPreloading(),t.get(p0,null,z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var g0=new A("",{factory:()=>new nt}),Py=new A("",{providedIn:"root",factory:()=>1});function u2(){return Ha(2,[{provide:Py,useValue:0},{provide:ad,multi:!0,deps:[Ve],useFactory:e=>{let n=e.get(sS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(tr),s=e.get(g0);f0(i,()=>{r(!0)}),e.get(My).afterPreactivation=()=>(r(!0),s.closed?P(void 0):s),i.initialNavigation()}))}}])}function l2(){return Ha(3,[{provide:ad,multi:!0,useFactory:()=>{let e=w(tr);return()=>{e.setUpLocationChangeListener()}}},{provide:Py,useValue:2}])}var m0=new A("");function d2(t){return Ha(0,[{provide:m0,useExisting:s2},{provide:Pd,useExisting:t}])}function h2(){return Ha(8,[PS,{provide:xd,useExisting:PS}])}function f2(t){let e=[{provide:l0,useValue:WB},{provide:d0,useValue:T({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ha(9,e)}var kS=new A("ROUTER_FORROOT_GUARD"),p2=[Os,{provide:Va,useClass:Ra},tr,Ua,{provide:fi,useFactory:a2,deps:[tr]},Ry,[]],TJ=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[p2,[],{provide:Md,multi:!0,useValue:r},{provide:kS,useFactory:v2,deps:[[tr,new Ye,new Og]]},{provide:$a,useValue:i||{}},i?.useHash?m2():y2(),g2(),i?.preloadingStrategy?d2(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?_2(i):[],i?.bindToComponentInputs?h2().\u0275providers:[],i?.enableViewTransitions?f2().\u0275providers:[],w2()]}}static forChild(r){return{ngModule:e,providers:[{provide:Md,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(N(kS,8))},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})();function g2(){return{provide:p0,useFactory:()=>{let t=w(uS),e=w(J),n=w($a),r=w(My),i=w(Va);return n.scrollOffset&&t.setOffset(n.scrollOffset),new o2(i,r,t,e,n)}}}function m2(){return{provide:er,useClass:aS}}function y2(){return{provide:er,useClass:Fm}}function v2(t){return"guarded"}function _2(t){return[t.initialNavigation==="disabled"?l2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?u2().\u0275providers:[]]}var FS=new A("");function w2(){return[{provide:FS,useFactory:c2},{provide:xs,multi:!0,useExisting:FS}]}var Oy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw gi(e)},gi=function(t){return new Error("Firebase Database ("+Oy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var v0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},I2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new ky;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ky=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ly=function(t){let e=v0(t);return Fd.encodeByteArray(e,!0)},qa=function(t){return Ly(t).replace(/\./g,"")},Ga=function(t){try{return Fd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _0(t){return w0(void 0,t)}function w0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!E2(n)||(t[n]=w0(t[n],e[n]));return t}function E2(t){return t!=="__proto__"}function C2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var T2=()=>C2().__FIREBASE_DEFAULTS__,D2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ga(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return T2()||D2()||b2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I0=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vd=t=>{let e=I0(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vy=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},E0=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};var pi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ud(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qa(JSON.stringify(n)),qa(JSON.stringify(o)),""].join(".")}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function za(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function S2(){var t;let e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tn(){return Oy.NODE_CLIENT===!0||Oy.NODE_ADMIN===!0}function T0(){return!S2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bd(){try{return typeof indexedDB=="object"}catch{return!1}}function D0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var A2="FirebaseError",Ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=A2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nr.prototype.create)}},nr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ht(i,a,r)}};function R2(t,e){return t.replace(N2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var N2=/\{\$([^}]+)}/g;function qs(t){return JSON.parse(t)}function je(t){return JSON.stringify(t)}var b0=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=qs(Ga(s[0])||""),n=qs(Ga(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var S0=function(t){let e=b0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},A0=function(t){let e=b0(t).claims;return typeof e=="object"&&e.admin===!0};function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $d(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Gs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(y0(s)&&y0(o)){if(!Gs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function y0(t){return t!==null&&typeof t=="object"}function Ka(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var kd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function R0(t,e){let n=new Fy(t,e);return n.subscribe.bind(n)}var Fy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xy),i.error===void 0&&(i.error=xy),i.complete===void 0&&(i.complete=xy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function M2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}function N0(t,e){return`${t} failed: ${e} argument `}var M0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qa=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var SJ=4*60*60*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var Tt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var yi="[DEFAULT]";var Hd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new pi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x2(e))try{this.getOrInitializeService({instanceIdentifier:yi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=yi){return this.instances.has(e)}getOptions(e=yi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yi){return this.component?this.component.multipleInstances?e:yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function P2(t){return t===yi?void 0:t}function x2(t){return t.instantiationMode==="EAGER"}var Ya=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Hd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var O2=[],W=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(W||{}),k2={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},F2=W.INFO,L2={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},V2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=L2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bn=class{constructor(e){this.name=e,this._logLevel=F2,this._logHandler=V2,this._userLogHandler=null,O2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};var U2=(t,e)=>e.some(n=>t instanceof n),P0,x0;function j2(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B2(){return x0||(x0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var O0=new WeakMap,jy=new WeakMap,k0=new WeakMap,Uy=new WeakMap,$y=new WeakMap;function $2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Sn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&O0.set(n,t)}).catch(()=>{}),$y.set(e,t),e}function H2(t){if(jy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jy.set(t,e)}var By={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F0(t){By=t(By)}function q2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(qd(this),e,...n);return k0.set(r,e.sort?e.sort():[e]),Sn(r)}:B2().includes(t)?function(...e){return t.apply(qd(this),e),Sn(O0.get(this))}:function(...e){return Sn(t.apply(qd(this),e))}}function G2(t){return typeof t=="function"?q2(t):(t instanceof IDBTransaction&&H2(t),U2(t,j2())?new Proxy(t,By):t)}function Sn(t){if(t instanceof IDBRequest)return $2(t);if(Uy.has(t))return Uy.get(t);let e=G2(t);return e!==t&&(Uy.set(t,e),$y.set(e,t)),e}var qd=t=>$y.get(t);function V0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Sn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Sn(o.result),c.oldVersion,c.newVersion,Sn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var z2=["get","getKey","getAll","getAllKeys","count"],W2=["put","add","delete","clear"],Hy=new Map;function L0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hy.get(e))return Hy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=W2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||z2.includes(n)))return;let s=function(o,...a){return g(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Hy.set(e,s),s}F0(t=>ue(T({},t),{get:(e,n,r)=>L0(e,n)||t.get(e,n,r),has:(e,n)=>!!L0(e,n)||t.has(e,n)}));var Gy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function K2(t){let e=t.getComponent();return e?.type==="VERSION"}var zy="@firebase/app",U0="0.10.1";var vi=new bn("@firebase/app"),Q2="@firebase/app-compat",Y2="@firebase/analytics-compat",J2="@firebase/analytics",X2="@firebase/app-check-compat",Z2="@firebase/app-check",e$="@firebase/auth",t$="@firebase/auth-compat",n$="@firebase/database",r$="@firebase/database-compat",i$="@firebase/functions",s$="@firebase/functions-compat",o$="@firebase/installations",a$="@firebase/installations-compat",c$="@firebase/messaging",u$="@firebase/messaging-compat",l$="@firebase/performance",d$="@firebase/performance-compat",h$="@firebase/remote-config",f$="@firebase/remote-config-compat",p$="@firebase/storage",g$="@firebase/storage-compat",m$="@firebase/firestore",y$="@firebase/firestore-compat",v$="firebase",_$="10.11.0";var Wy="[DEFAULT]",w$={[zy]:"fire-core",[Q2]:"fire-core-compat",[J2]:"fire-analytics",[Y2]:"fire-analytics-compat",[Z2]:"fire-app-check",[X2]:"fire-app-check-compat",[e$]:"fire-auth",[t$]:"fire-auth-compat",[n$]:"fire-rtdb",[r$]:"fire-rtdb-compat",[i$]:"fire-fn",[s$]:"fire-fn-compat",[o$]:"fire-iid",[a$]:"fire-iid-compat",[c$]:"fire-fcm",[u$]:"fire-fcm-compat",[l$]:"fire-perf",[d$]:"fire-perf-compat",[h$]:"fire-rc",[f$]:"fire-rc-compat",[p$]:"fire-gcs",[g$]:"fire-gcs-compat",[m$]:"fire-fst",[y$]:"fire-fst-compat","fire-js":"fire-js",[v$]:"fire-js-all"};var Ja=new Map,I$=new Map,Ky=new Map;function j0(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function An(t){let e=t.name;if(Ky.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Ky.set(e,t);for(let n of Ja.values())j0(n,t);for(let n of I$.values())j0(n,t);return!0}function Za(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zs(t){return t.settings!==void 0}var E$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new nr("app","Firebase",E$);var Qy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}};var Or=_$;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Wy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xr.create("bad-app-name",{appName:String(i)});if(n||(n=Vy()),!n)throw xr.create("no-options");let s=Ja.get(i);if(s){if(Gs(n,s.options)&&Gs(r,s.config))return s;throw xr.create("duplicate-app",{appName:i})}let o=new Ya(i);for(let c of Ky.values())o.addComponent(c);let a=new Qy(n,r,o);return Ja.set(i,a),a}function _i(t=Wy){let e=Ja.get(t);if(!e&&t===Wy&&Vy())return Xy();if(!e)throw xr.create("no-app",{appName:t});return e}function Gd(){return Array.from(Ja.values())}function we(t,e,n){var r;let i=(r=w$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}An(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var C$="firebase-heartbeat-database",T$=1,Xa="firebase-heartbeat-store",qy=null;function q0(){return qy||(qy=V0(C$,T$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),qy}function D$(t){return g(this,null,function*(){try{let n=(yield q0()).transaction(Xa),r=yield n.objectStore(Xa).get(G0(t));return yield n.done,r}catch(e){if(e instanceof Ht)vi.warn(e.message);else{let n=xr.create("idb-get",{originalErrorMessage:e?.message});vi.warn(n.message)}}})}function B0(t,e){return g(this,null,function*(){try{let r=(yield q0()).transaction(Xa,"readwrite");yield r.objectStore(Xa).put(e,G0(t)),yield r.done}catch(n){if(n instanceof Ht)vi.warn(n.message);else{let r=xr.create("idb-set",{originalErrorMessage:n?.message});vi.warn(r.message)}}})}function G0(t){return`${t.name}!${t.options.appId}`}var b$=1024,S$=30*24*60*60*1e3,Yy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Jy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=S$}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return g(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=$0(),{heartbeatsToSend:r,unsentEntries:i}=A$(this._heartbeatsCache.heartbeats),s=qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function $0(){return new Date().toISOString().substring(0,10)}function A$(t,e=b$){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),H0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Jy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Bd()?D0().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield D$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return B0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return B0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function H0(t){return qa(JSON.stringify({version:2,heartbeats:t})).length}function R$(t){An(new Tt("platform-logger",e=>new Gy(e),"PRIVATE")),An(new Tt("heartbeat",e=>new Yy(e),"PRIVATE")),we(zy,U0,t),we(zy,U0,"esm2017"),we("fire-js","")}R$("");var N$="firebase",M$="10.11.0";we(N$,M$,"app");var kr=new Kn("ANGULARFIRE2_VERSION");function ec(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ei=(t,e)=>{let n=e?[e]:Gd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ii=class{constructor(){return Ei(P$)}},P$="app-check";function Ws(){}var zd=class{zone;delegate;constructor(e,n=gp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Zy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),n.pipe(Ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ci=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new zd(Zone.current)),this.insideAngular=n.run(()=>new zd(Zone.current,pp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(N(J))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Wd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function x$(t){return Wd().ngZone.runOutsideAngular(()=>t())}function wi(t){return Wd().ngZone.run(()=>t())}function O$(t){return k$(Wd())(t)}function k$(t){return function(n){return n=n.lift(new Zy(t.ngZone)),n.pipe(fr(t.outsideAngular),hr(t.insideAngular))}}var F$=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),wi(()=>t.apply(void 0,r))},st=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=wi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws))),r[s]=F$(r[s],n));let i=x$(()=>t.apply(this,r));if(!e)if(i instanceof K){let s=Wd();return i.pipe(fr(s.outsideAngular),hr(s.insideAngular))}else return wi(()=>i);return i instanceof K?i.pipe(O$):i instanceof Promise?wi(()=>new Promise((s,o)=>i.then(a=>wi(()=>s(a)),a=>wi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:wi(()=>i)};var rr=class{constructor(e){return e}},Ti=class{constructor(){return Gd()}};function L$(t){return t&&t.length===1?t[0]:new rr(_i())}var ev=new A("angularfire2._apps"),V$={provide:rr,useFactory:L$,deps:[[new Ye,ev]]},U$={provide:Ti,deps:[[new Ye,ev]]};function j$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new rr(r)}}var B$=(()=>{class t{constructor(n){we("angularfire",kr.full,"core"),we("angularfire",kr.full,"app"),we("angular",jb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(N(Ot))};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[V$,U$]})}return t})();function dX(t,...e){return{ngModule:B$,providers:[{provide:ev,useFactory:j$(t),multi:!0,deps:[J,Ve,Ci,...e]}]}}var hX=st(Xy,!0);function Z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eA=Z0,tA=new nr("auth","Firebase",Z0());var Jd=new bn("@firebase/auth");function H$(t,...e){Jd.logLevel<=W.WARN&&Jd.warn(`Auth (${Or}): ${t}`,...e)}function Qd(t,...e){Jd.logLevel<=W.ERROR&&Jd.error(`Auth (${Or}): ${t}`,...e)}function z0(t,...e){throw hv(t,...e)}function dv(t,...e){return hv(t,...e)}function nA(t,e,n){let r=Object.assign(Object.assign({},eA()),{[e]:n});return new nr("auth","Firebase",r).create(e,{appName:t.name})}function Yd(t){return nA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tA.create(t,...e)}function se(t,e,...n){if(!t)throw hv(e,...n)}function tc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function Xd(t,e){t||tc(e)}function q$(){return W0()==="http:"||W0()==="https:"}function W0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function G$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q$()||C0()||"connection"in navigator)?navigator.onLine:!0}function z$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var bi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xd(n>e,"Short delay should be less than long delay!"),this.isMobile=za()||jd()}get(){return G$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function W$(t,e){Xd(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Zd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var K$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Q$=new bi(3e4,6e4);function rA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function rh(s,o,a,c){return g(this,arguments,function*(t,e,n,r,i={}){return iA(t,i,()=>g(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Ka(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Zd.fetch()(sA(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function iA(t,e,n){return g(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},K$),e);try{let i=new rv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Kd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Kd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Kd(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nA(t,l,u);z0(t,l)}}catch(i){if(i instanceof Ht)throw i;z0(t,"network-request-failed",{message:String(i)})}})}function sA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?W$(t.config,i):`${t.config.apiScheme}://${i}`}var rv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dv(this.auth,"network-request-failed")),Q$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Kd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=dv(t,e,r);return i.customData._tokenResponse=n,i}function Y$(t,e){return g(this,null,function*(){return rh(t,"POST","/v1/accounts:delete",e)})}function oA(t,e){return g(this,null,function*(){return rh(t,"POST","/v1/accounts:lookup",e)})}function nc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fv(t,e=!1){return g(this,null,function*(){let n=ke(t),r=yield n.getIdToken(e),i=aA(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:nc(tv(i.auth_time)),issuedAtTime:nc(tv(i.iat)),expirationTime:nc(tv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function tv(t){return Number(t)*1e3}function aA(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ga(n);return i?JSON.parse(i):(Qd("Failed to decode base64 JWT payload"),null)}catch(i){return Qd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function K0(t){let e=aA(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function iv(t,e,n=!1){return g(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ht&&J$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function J$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var sv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),n)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ic=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function eh(t){return g(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield iv(t,oA(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cA(s.providerUserInfo):[],a=X$(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ic(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function pv(t){return g(this,null,function*(){let e=ke(t);yield eh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cA(t){return t.map(e=>{var{providerId:n}=e,r=mp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Z$(t,e){return g(this,null,function*(){let n=yield iA(t,{},()=>g(this,null,function*(){let r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=sA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function eH(t,e){return g(this,null,function*(){return rh(t,"POST","/v2/accounts:revokeToken",rA(t,e))})}var rc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");let n=K0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return g(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Z$(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return tc("not implemented")}};function Fr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var sc=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=mp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ic(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let n=yield iv(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return fv(this,e)}reload(){return pv(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield eh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(zs(this.auth.app))return Promise.reject(Yd(this.auth));let e=yield this.getIdToken();return yield iv(this,Y$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,D=(u=n.createdAt)!==null&&u!==void 0?u:void 0,F=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:U,emailVerified:de,isAnonymous:Ge,providerData:ae,stsTokenManager:tt}=n;se(U&&tt,e,"internal-error");let fn=rc.fromJSON(this.name,tt);se(typeof U=="string",e,"internal-error"),Fr(d,e.name),Fr(h,e.name),se(typeof de=="boolean",e,"internal-error"),se(typeof Ge=="boolean",e,"internal-error"),Fr(f,e.name),Fr(p,e.name),Fr(y,e.name),Fr(v,e.name),Fr(D,e.name),Fr(F,e.name);let zr=new t({uid:U,auth:e,email:h,emailVerified:de,displayName:d,isAnonymous:Ge,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:fn,createdAt:D,lastLoginAt:F});return ae&&Array.isArray(ae)&&(zr.providerData=ae.map(Zi=>Object.assign({},Zi))),v&&(zr._redirectEventId=v),zr}static _fromIdTokenResponse(e,n,r=!1){return g(this,null,function*(){let i=new rc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield eh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return g(this,null,function*(){let i=n.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?cA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new rc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ic(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Q0=new Map;function Di(t){Xd(t instanceof Function,"Expected a class definition");let e=Q0.get(t);return e?(Xd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Q0.set(t,e),e)}var tH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(n,r){return g(this,null,function*(){this.storage[n]=r})}_get(n){return g(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return g(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ov=tH;function nv(t,e,n){return`firebase:${t}:${e}:${n}`}var th=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=nv(this.userKey,i.apiKey,s),this.fullPersistenceKey=nv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?sc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return g(this,null,function*(){if(!n.length)return new t(Di(ov),e,r);let i=(yield Promise.all(n.map(u=>g(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Di(ov),o=nv(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=sc._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>g(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function Y0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aH(e))return"Blackberry";if(cH(e))return"Webos";if(rH(e))return"Safari";if((e.includes("chrome/")||iH(e))&&!e.includes("edge/"))return"Chrome";if(oH(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function nH(t=it()){return/firefox\//i.test(t)}function rH(t=it()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iH(t=it()){return/crios\//i.test(t)}function sH(t=it()){return/iemobile/i.test(t)}function oH(t=it()){return/android/i.test(t)}function aH(t=it()){return/blackberry/i.test(t)}function cH(t=it()){return/webos/i.test(t)}function uA(t,e=[]){let n;switch(t){case"Browser":n=Y0(it());break;case"Worker":n=`${Y0(it())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Or}/${r}`}var av=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function uH(n){return g(this,arguments,function*(t,e={}){return rh(t,"GET","/v2/passwordPolicy",rA(t,e))})}var lH=6,cv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var uv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nh(this),this.idTokenSubscription=new nh(this),this.beforeStateQueue=new av(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield th.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let n=yield oA(this,{idToken:e}),r=yield sc._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var n;if(zs(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=z$()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(zs(this.app))return Promise.reject(Yd(this));let n=e?ke(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return g(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return zs(this.app)?Promise.reject(Yd(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zs(this.app)?Promise.reject(Yd(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(Di(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield uH(this),n=new cv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Di(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield th.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return g(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&H$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function dH(t){return ke(t)}var nh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=R0(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hH={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fH(t){hH=t}function pH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function gH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Di);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var CX=pH("rcb"),TX=new bi(3e4,6e4);var DX=new bi(2e3,1e4);var bX=10*60*1e3;var SX=new bi(3e4,6e4);var AX=new bi(5e3,15e3);var RX=encodeURIComponent("fac");var J0="@firebase/auth",X0="1.7.1";var lv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function mH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yH(t){An(new Tt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uA(t)},u=new uv(r,i,s,c);return gH(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),An(new Tt("auth-internal",e=>{let n=dH(e.getProvider("auth").getImmediate());return(r=>new lv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(J0,X0,mH(t)),we(J0,X0,"esm2017")}var vH=5*60,NX=E0("authIdTokenMaxAge")||vH;function _H(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=dv("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",_H().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yH("Browser");var vq="auth";var Ks=class{constructor(){return Ei(vq)}};var _q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},an={},E,Fv=Fv||{},k=_q||self;function yh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _c(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function wq(t){return Object.prototype.hasOwnProperty.call(t,gv)&&t[gv]||(t[gv]=++Iq)}var gv="closure_uid_"+(1e9*Math.random()>>>0),Iq=0;function Eq(t,e,n){return t.call.apply(t.bind,arguments)}function Cq(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ot(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ot=Eq:ot=Cq,ot.apply(null,arguments)}function ih(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $e(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Lr(){this.s=this.s,this.o=this.o}var Tq=0;Lr.prototype.s=!1;Lr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Tq!=0)&&wq(this)};Lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var EA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Lv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function lA(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(yh(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function at(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var Dq=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};k.addEventListener("test",n,e),k.removeEventListener("test",n,e)}catch{}return t}();function dc(t){return/^[\s\xa0]*$/.test(t)}function vh(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function Rn(t){return vh().indexOf(t)!=-1}function Vv(t){return Vv[" "](t),t}Vv[" "]=function(){};function bq(t,e){var n=pG;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Sq=Rn("Opera"),Xs=Rn("Trident")||Rn("MSIE"),CA=Rn("Edge"),wv=CA||Xs,TA=Rn("Gecko")&&!(vh().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge"))&&!(Rn("Trident")||Rn("MSIE"))&&!Rn("Edge"),Aq=vh().toLowerCase().indexOf("webkit")!=-1&&!Rn("Edge");function DA(){var t=k.document;return t?t.documentMode:void 0}var Iv;e:{if(sh="",oh=function(){var t=vh();if(TA)return/rv:([^\);]+)(\)|;)/.exec(t);if(CA)return/Edge\/([\d\.]+)/.exec(t);if(Xs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Aq)return/WebKit\/(\S+)/.exec(t);if(Sq)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),oh&&(sh=oh?oh[1]:""),Xs&&(ah=DA(),ah!=null&&ah>parseFloat(sh))){Iv=String(ah);break e}Iv=sh}var sh,oh,ah,Ev;k.document&&Xs?(mv=DA(),Ev=mv||parseInt(Iv,10)||void 0):Ev=void 0;var mv,Rq=Ev;function hc(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(TA){e:{try{Vv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Nq[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&hc.$.h.call(this)}}$e(hc,at);var Nq={2:"touch",3:"pen",4:"mouse"};hc.prototype.h=function(){hc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),Mq=0;function Pq(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Mq,this.fa=this.ia=!1}function _h(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Uv(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function xq(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function bA(t){let e={};for(let n in t)e[n]=t[n];return e}var dA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<dA.length;s++)n=dA[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wh(t){this.src=t,this.g={},this.h=0}wh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Tv(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Pq(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Cv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=EA(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(_h(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Tv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var jv="closure_lm_"+(1e6*Math.random()|0),yv={};function AA(t,e,n,r,i){if(r&&r.once)return NA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)AA(t,e[s],n,r,i);return null}return n=Hv(n),t&&t[wc]?t.O(e,n,_c(r)?!!r.capture:!!r,i):RA(t,e,n,!1,r,i)}function RA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_c(i)?!!i.capture:!!i,a=$v(t);if(a||(t[jv]=a=new wh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Oq(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Dq||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(PA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Oq(){function t(n){return e.call(t.src,t.listener,n)}let e=kq;return t}function NA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)NA(t,e[s],n,r,i);return null}return n=Hv(n),t&&t[wc]?t.P(e,n,_c(r)?!!r.capture:!!r,i):RA(t,e,n,!0,r,i)}function MA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)MA(t,e[s],n,r,i);else r=_c(r)?!!r.capture:!!r,n=Hv(n),t&&t[wc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Tv(s,n,r,i),-1<n&&(_h(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=$v(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Tv(e,n,r,i)),(n=-1<t?e[t]:null)&&Bv(n))}function Bv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[wc])Cv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(PA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=$v(e))?(Cv(n,t),n.h==0&&(n.src=null,e[jv]=null)):_h(t)}}}function PA(t){return t in yv?yv[t]:yv[t]="on"+t}function kq(t,e){if(t.fa)t=!0;else{e=new hc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Bv(t),t=n.call(r,e)}return t}function $v(t){return t=t[jv],t instanceof wh?t:null}var vv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hv(t){return typeof t=="function"?t:(t[vv]||(t[vv]=function(e){return t.handleEvent(e)}),t[vv])}function Be(){Lr.call(this),this.i=new wh(this),this.S=this,this.J=null}$e(Be,Lr);Be.prototype[wc]=!0;Be.prototype.removeEventListener=function(t,e,n,r){MA(this,t,e,n,r)};function Ze(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new at(e,t);else if(e instanceof at)e.target=e.target||t;else{var i=e;e=new at(r,t),SA(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ch(o,r,!0,e)&&i}if(o=e.g=t,i=ch(o,r,!0,e)&&i,i=ch(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=ch(o,r,!1,e)&&i}Be.prototype.N=function(){if(Be.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_h(n[r]);delete t.g[e],t.h--}}this.J=null};Be.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Be.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ch(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Cv(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var qv=k.JSON.stringify,Dv=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Fq(){var t=Gv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var bv=class{constructor(){this.h=this.g=null}add(e,n){let r=xA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},xA=new Dv(()=>new Sv,t=>t.reset()),Sv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Lq(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Vq(t){k.setTimeout(()=>{throw t},0)}var fc,pc=!1,Gv=new bv,OA=()=>{let t=k.Promise.resolve(void 0);fc=()=>{t.then(Uq)}},Uq=()=>{for(var t;t=Fq();){try{t.h.call(t.g)}catch(n){Vq(n)}var e=xA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}pc=!1};function Ih(t,e){Be.call(this),this.h=t||1,this.g=e||k,this.j=ot(this.qb,this),this.l=Date.now()}$e(Ih,Be);E=Ih.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ze(this,"tick"),this.ga&&(zv(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}E.N=function(){Ih.$.N.call(this),zv(this),delete this.g};function Wv(t,e,n){if(typeof t=="function")n&&(t=ot(t,n));else if(t&&typeof t.handleEvent=="function")t=ot(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function kA(t){t.g=Wv(()=>{t.g=null,t.i&&(t.i=!1,kA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Av=class extends Lr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kA(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function gc(t){Lr.call(this),this.h=t,this.g={}}$e(gc,Lr);var hA=[];function FA(t,e,n,r){Array.isArray(n)||(n&&(hA[0]=n.toString()),n=hA);for(var i=0;i<n.length;i++){var s=AA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function LA(t){Uv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Bv(e)},t),t.g={}}gc.prototype.N=function(){gc.$.N.call(this),LA(this)};gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Eh(){this.g=!0}Eh.prototype.Ea=function(){this.g=!1};function jq(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Bq(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ys(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Hq(t,n)+(r?" "+r:"")})}function $q(t,e){t.info(function(){return"TIMEOUT: "+e})}Eh.prototype.info=function(){};function Hq(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return qv(n)}catch{return e}}var Ni={},fA=null;function Ch(){return fA=fA||new Be}Ni.Ta="serverreachability";function VA(t){at.call(this,Ni.Ta,t)}$e(VA,at);function mc(t){let e=Ch();Ze(e,new VA(e))}Ni.STAT_EVENT="statevent";function UA(t,e){at.call(this,Ni.STAT_EVENT,t),this.stat=e}$e(UA,at);function yt(t){let e=Ch();Ze(e,new UA(e,t))}Ni.Ua="timingevent";function jA(t,e){at.call(this,Ni.Ua,t),this.size=e}$e(jA,at);function Ic(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var Th={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kv(){}Kv.prototype.h=null;function pA(t){return t.h||(t.h=t.i())}function $A(){}var Ec={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qv(){at.call(this,"d")}$e(Qv,at);function Yv(){at.call(this,"c")}$e(Yv,at);var Rv;function Dh(){}$e(Dh,Kv);Dh.prototype.g=function(){return new XMLHttpRequest};Dh.prototype.i=function(){return{}};Rv=new Dh;function Cc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new gc(this),this.P=qq,t=wv?125:void 0,this.V=new Ih(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new HA}function HA(){this.i=null,this.g="",this.h=!1}var qq=45e3,qA={},Nv={};E=Cc.prototype;E.setTimeout=function(t){this.P=t};function Mv(t,e,n){t.L=1,t.A=Sh(sr(e)),t.u=n,t.S=!0,GA(t,null)}function GA(t,e){t.G=Date.now(),Tc(t),t.B=sr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ZA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new HA,t.g=wR(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Av(ot(t.Pa,t,t.g),t.O)),FA(t.U,t.g,"readystatechange",t.nb),e=t.I?bA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),mc(),jq(t.j,t.v,t.B,t.m,t.W,t.u)}E.nb=function(t){t=t.target;let e=this.M;e&&Nn(t)==3?e.l():this.Pa(t)};E.Pa=function(t){try{if(t==this.g)e:{let l=Nn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||wv||this.g&&(this.h.h||this.g.ja()||vA(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?mc(3):mc(2)),bh(this);var n=this.g.da();this.ca=n;t:if(zA(this)){var r=vA(this.g);t="";var i=r.length,s=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),lc(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Bq(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dc(a)){var u=a;break t}}u=null}if(n=u)Ys(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pv(this,n);else{this.i=!1,this.s=3,yt(12),Si(this),lc(this);break e}}this.S?(WA(this,l,o),wv&&this.i&&l==3&&(FA(this.U,this.V,"tick",this.mb),this.V.start())):(Ys(this.j,this.m,o,null),Pv(this,o)),l==4&&Si(this),this.i&&!this.J&&(l==4?mR(this.l,this):(this.i=!1,Tc(this)))}else dG(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Si(this),lc(this)}}}catch{}finally{}};function zA(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function WA(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Gq(t,n),i==Nv){e==4&&(t.s=4,yt(14),r=!1),Ys(t.j,t.m,null,"[Incomplete Response]");break}else if(i==qA){t.s=4,yt(15),Ys(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ys(t.j,t.m,i,null),Pv(t,i);zA(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,yt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),n_(e),e.M=!0,yt(11))):(Ys(t.j,t.m,n,"[Invalid Chunked Response]"),Si(t),lc(t))}E.mb=function(){if(this.g){var t=Nn(this.g),e=this.g.ja();this.o<e.length&&(bh(this),WA(this,t,e),this.i&&t!=4&&Tc(this))}};function Gq(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Nv:(n=Number(e.substring(n,r)),isNaN(n)?qA:(r+=1,r+n>e.length?Nv:(e=e.slice(r,r+n),t.o=r+n,e)))}E.cancel=function(){this.J=!0,Si(this)};function Tc(t){t.Y=Date.now()+t.P,KA(t,t.P)}function KA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ic(ot(t.lb,t),e)}function bh(t){t.C&&(k.clearTimeout(t.C),t.C=null)}E.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?($q(this.j,this.B),this.L!=2&&(mc(),yt(17)),Si(this),this.s=2,lc(this)):KA(this,this.Y-t)};function lc(t){t.l.H==0||t.J||mR(t.l,t)}function Si(t){bh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,zv(t.V),LA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Pv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||xv(n.i,t))){if(!t.K&&xv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)fh(n),Nh(n);else break e;t_(n),yt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ic(ot(n.ib,n),6e3));if(1>=nR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ai(n,11)}else if((t.K||n.g==t)&&fh(n),!dc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Jv(s,s.h),s.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,ve(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=_R(r,r.J?r.pa:null,r.Y),o.K){rR(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(bh(a),Tc(a)),r.g=o}else pR(r);0<n.j.length&&Mh(n)}else u[0]!="stop"&&u[0]!="close"||Ai(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ai(n,7):e_(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}mc(4)}catch{}}function zq(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(yh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Wq(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(yh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function QA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(yh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Wq(t),r=zq(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var YA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kq(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ri(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ri){this.h=t.h,dh(this,t.j),this.s=t.s,this.g=t.g,hh(this,t.m),this.l=t.l;var e=t.i,n=new yc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),gA(this,n),this.o=t.o}else t&&(e=String(t).match(YA))?(this.h=!1,dh(this,e[1]||"",!0),this.s=cc(e[2]||""),this.g=cc(e[3]||"",!0),hh(this,e[4]),this.l=cc(e[5]||"",!0),gA(this,e[6]||"",!0),this.o=cc(e[7]||"")):(this.h=!1,this.i=new yc(null,this.h))}Ri.prototype.toString=function(){var t=[],e=this.j;e&&t.push(uc(e,mA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(uc(e,mA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(uc(n,n.charAt(0)=="/"?Jq:Yq,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",uc(n,Zq)),t.join("")};function sr(t){return new Ri(t)}function dh(t,e,n){t.j=n?cc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gA(t,e,n){e instanceof yc?(t.i=e,eG(t.i,t.h)):(n||(e=uc(e,Xq)),t.i=new yc(e,t.h))}function ve(t,e,n){t.i.set(e,n)}function Sh(t){return ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function uc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Qq),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qq(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var mA=/[#\/\?@]/g,Yq=/[#\?:]/g,Jq=/[#\?]/g,Xq=/[#\?@]/g,Zq=/#/g;function yc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new Map,t.h=0,t.i&&Kq(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}E=yc.prototype;E.add=function(t,e){Vr(this),this.i=null,t=Zs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function JA(t,e){Vr(t),e=Zs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function XA(t,e){return Vr(t),e=Zs(t,e),t.g.has(e)}E.forEach=function(t,e){Vr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};E.ta=function(){Vr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};E.Z=function(t){Vr(this);let e=[];if(typeof t=="string")XA(this,t)&&(e=e.concat(this.g.get(Zs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};E.set=function(t,e){return Vr(this),this.i=null,t=Zs(this,t),XA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};E.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ZA(t,e,n){JA(t,e),0<n.length&&(t.i=null,t.g.set(Zs(t,e),Lv(n)),t.h+=n.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Zs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function eG(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(JA(this,r),ZA(this,i,n))},t)),t.j=e}var tG=class{constructor(t,e){this.g=t,this.map=e}};function eR(t){this.l=t||nG,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nG=10;function tR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function nR(t){return t.h?1:t.g?t.g.size:0}function xv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Jv(t,e){t.g?t.g.add(e):t.h=e}function rR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}eR.prototype.cancel=function(){if(this.i=iR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function iR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Lv(t.i)}var rG=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function iG(){this.g=new rG}function sG(t,e,n){let r=n||"";try{QA(t,function(i,s){let o=i;_c(i)&&(o=qv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function oG(t,e){let n=new Eh;if(k.Image){let r=new Image;r.onload=ih(uh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ih(uh,n,r,"TestLoadImage: error",!1,e),r.onabort=ih(uh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ih(uh,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function uh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Dc(t){this.l=t.ec||null,this.j=t.ob||!1}$e(Dc,Kv);Dc.prototype.g=function(){return new Ah(this.l,this.j)};Dc.prototype.i=function(t){return function(){return t}}({});function Ah(t,e){Be.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Xv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(Ah,Be);var Xv=0;E=Ah.prototype;E.open=function(t,e){if(this.readyState!=Xv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vc(this)};E.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bc(this)),this.readyState=Xv};E.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function sR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}E.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?bc(this):vc(this),this.readyState==3&&sR(this)}};E.Za=function(t){this.g&&(this.response=this.responseText=t,bc(this))};E.Ya=function(t){this.g&&(this.response=t,bc(this))};E.ka=function(){this.g&&bc(this)};function bc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vc(t)}E.setRequestHeader=function(t,e){this.v.append(t,e)};E.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function vc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var aG=k.JSON.parse;function Te(t){Be.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oR,this.L=this.M=!1}$e(Te,Be);var oR="",cG=/^https?$/i,uG=["POST","PUT"];E=Te.prototype;E.Oa=function(t){this.M=t};E.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rv.g(),this.C=this.u?pA(this.u):pA(Rv),this.g.onreadystatechange=ot(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){yA(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=k.FormData&&t instanceof k.FormData,!(0<=EA(uG,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uR(this),0<this.B&&((this.L=lG(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ot(this.ua,this)):this.A=Wv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){yA(this,s)}};function lG(t){return Xs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}E.ua=function(){typeof Fv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ze(this,"timeout"),this.abort(8))};function yA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,aR(t),Rh(t)}function aR(t){t.F||(t.F=!0,Ze(t,"complete"),Ze(t,"error"))}E.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ze(this,"complete"),Ze(this,"abort"),Rh(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rh(this,!0)),Te.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?cR(this):this.kb())};E.kb=function(){cR(this)};function cR(t){if(t.h&&typeof Fv<"u"&&(!t.C[1]||Nn(t)!=4||t.da()!=2)){if(t.v&&Nn(t)==4)Wv(t.La,0,t);else if(Ze(t,"readystatechange"),Nn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(YA)[1]||null;!i&&k.self&&k.self.location&&(i=k.self.location.protocol.slice(0,-1)),r=!cG.test(i?i.toLowerCase():"")}n=r}if(n)Ze(t,"complete"),Ze(t,"success");else{t.m=6;try{var s=2<Nn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",aR(t)}}finally{Rh(t)}}}}function Rh(t,e){if(t.g){uR(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ze(t,"ready");try{n.onreadystatechange=r}catch{}}}function uR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}E.isActive=function(){return!!this.g};function Nn(t){return t.g?t.g.readyState:0}E.da=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),aG(e)}};function vA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case oR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function dG(t){let e={};t=(t.g&&2<=Nn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(dc(t[r]))continue;var n=Lq(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}xq(e,function(r){return r.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function lR(t){let e="";return Uv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Zv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=lR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ve(t,e,n))}function oc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dR(t){this.Ga=0,this.j=[],this.l=new Eh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oc("baseRetryDelayMs",5e3,t),this.hb=oc("retryDelaySeedMs",1e4,t),this.eb=oc("forwardChannelMaxRetries",2,t),this.xa=oc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new eR(t&&t.concurrentRequestLimit),this.Ja=new iG,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=dR.prototype;E.ra=8;E.H=1;function e_(t){if(hR(t),t.H==3){var e=t.W++,n=sr(t.I);if(ve(n,"SID",t.K),ve(n,"RID",e),ve(n,"TYPE","terminate"),Sc(t,n),e=new Cc(t,t.l,e),e.L=2,e.A=Sh(sr(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.A,n=!0),n||(e.g=wR(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Tc(e)}vR(t)}function Nh(t){t.g&&(n_(t),t.g.cancel(),t.g=null)}function hR(t){Nh(t),t.u&&(k.clearTimeout(t.u),t.u=null),fh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function Mh(t){if(!tR(t.i)&&!t.m){t.m=!0;var e=t.Na;fc||OA(),pc||(fc(),pc=!0),Gv.add(e,t),t.C=0}}function hG(t,e){return nR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ic(ot(t.Na,t,e),yR(t,t.C)),t.C++,!0)}E.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Cc(this,this.l,t),s=this.s;if(this.U&&(s?(s=bA(s),SA(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=fR(this,i,e),n=sr(this.I),ve(n,"RID",t),ve(n,"CVER",22),this.F&&ve(n,"X-HTTP-Session-Id",this.F),Sc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(lR(s)))+"&"+e:this.o&&Zv(n,this.o,s)),Jv(this.i,i),this.bb&&ve(n,"TYPE","init"),this.P?(ve(n,"$req",e),ve(n,"SID","null"),i.aa=!0,Mv(i,n,null)):Mv(i,n,e),this.H=2}}else this.H==3&&(t?_A(this,t):this.j.length==0||tR(this.i)||_A(this))};function _A(t,e){var n;e?n=e.m:n=t.W++;let r=sr(t.I);ve(r,"SID",t.K),ve(r,"RID",n),ve(r,"AID",t.V),Sc(t,r),t.o&&t.s&&Zv(r,t.o,t.s),n=new Cc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=fR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Jv(t.i,n),Mv(n,r,e)}function Sc(t,e){t.na&&Uv(t.na,function(n,r){ve(e,r,n)}),t.h&&QA({},function(n,r){ve(e,r,n)})}function fR(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ot(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{sG(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function pR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;fc||OA(),pc||(fc(),pc=!0),Gv.add(e,t),t.A=0}}function t_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ic(ot(t.Ma,t),yR(t,t.A)),t.A++,!0)}E.Ma=function(){if(this.u=null,gR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ic(ot(this.jb,this),t)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,yt(10),Nh(this),gR(this))};function n_(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function gR(t){t.g=new Cc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=sr(t.wa);ve(e,"RID","rpc"),ve(e,"SID",t.K),ve(e,"AID",t.V),ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ve(e,"TO",t.qa),ve(e,"TYPE","xmlhttp"),Sc(t,e),t.o&&t.s&&Zv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Sh(sr(e)),n.u=null,n.S=!0,GA(n,t)}E.ib=function(){this.v!=null&&(this.v=null,Nh(this),t_(this),yt(19))};function fh(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function mR(t,e){var n=null;if(t.g==e){fh(t),n_(t),t.g=null;var r=2}else if(xv(t.i,e))n=e.F,rR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Ch(),Ze(r,new jA(r,n)),Mh(t)}else pR(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&hG(t,e)||r==2&&t_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ai(t,5);break;case 4:Ai(t,10);break;case 3:Ai(t,6);break;default:Ai(t,2)}}}function yR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ai(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ot(t.pb,t);n||(n=new Ri("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||dh(n,"https"),Sh(n)),oG(n.toString(),r)}else yt(2);t.H=0,t.h&&t.h.za(e),vR(t),hR(t)}E.pb=function(t){t?(this.l.info("Successfully pinged google.com"),yt(2)):(this.l.info("Failed to ping google.com"),yt(1))};function vR(t){if(t.H=0,t.ma=[],t.h){let e=iR(t.i);(e.length!=0||t.j.length!=0)&&(lA(t.ma,e),lA(t.ma,t.j),t.i.i.length=0,Lv(t.j),t.j.length=0),t.h.ya()}}function _R(t,e,n){var r=n instanceof Ri?sr(n):new Ri(n);if(r.g!="")e&&(r.g=e+"."+r.g),hh(r,r.m);else{var i=k.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ri(null);r&&dh(s,r),e&&(s.g=e),i&&hh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ve(r,n,e),ve(r,"VER",t.ra),Sc(t,r),r}function wR(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Te(new Dc({ob:n})):new Te(t.va),e.Oa(t.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function IR(){}E=IR.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function ph(){if(Xs&&!(10<=Number(Rq)))throw Error("Environmental error: no available transport.")}ph.prototype.g=function(t,e){return new Lt(t,e)};function Lt(t,e){Be.call(this),this.g=new dR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!dc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new eo(this)}$e(Lt,Be);Lt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;yt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=_R(t,null,t.Y),Mh(t)};Lt.prototype.close=function(){e_(this.g)};Lt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=qv(t),t=n);e.j.push(new tG(e.fb++,t)),e.H==3&&Mh(e)};Lt.prototype.N=function(){this.g.h=null,delete this.j,e_(this.g),delete this.g,Lt.$.N.call(this)};function ER(t){Qv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$e(ER,Qv);function CR(){Yv.call(this),this.status=1}$e(CR,Yv);function eo(t){this.g=t}$e(eo,IR);eo.prototype.Ba=function(){Ze(this.g,"a")};eo.prototype.Aa=function(t){Ze(this.g,new ER(t))};eo.prototype.za=function(t){Ze(this.g,new CR)};eo.prototype.ya=function(){Ze(this.g,"b")};function fG(){this.blockSize=-1}function on(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$e(on,fG);on.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function _v(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}on.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)_v(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){_v(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){_v(this,r),i=0;break}}this.h=i,this.i+=e};on.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function le(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var pG={};function r_(t){return-128<=t&&128>t?bq(t,function(e){return new le([e|0],0>e?-1:0)}):new le([t|0],0>t?-1:0)}function Mn(t){if(isNaN(t)||!isFinite(t))return Js;if(0>t)return Xe(Mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ov;return new le(e,0)}function TR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Xe(TR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Mn(Math.pow(e,8)),r=Js,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Mn(Math.pow(e,s)),r=r.R(s).add(Mn(o))):(r=r.R(n),r=r.add(Mn(o)))}return r}var Ov=4294967296,Js=r_(0),kv=r_(1),wA=r_(16777216);E=le.prototype;E.ea=function(){if(qt(this))return-Xe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ov+r)*e,e*=Ov}return t};E.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ir(this))return"0";if(qt(this))return"-"+Xe(this).toString(t);for(var e=Mn(Math.pow(t,6)),n=this,r="";;){var i=mh(n,e).g;n=gh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ir(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};E.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ir(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qt(t){return t.h==-1}E.X=function(t){return t=gh(this,t),qt(t)?-1:ir(t)?0:1};function Xe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new le(n,~t.h).add(kv)}E.abs=function(){return qt(this)?Xe(this):this};E.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new le(n,n[n.length-1]&-2147483648?-1:0)};function gh(t,e){return t.add(Xe(e))}E.R=function(t){if(ir(this)||ir(t))return Js;if(qt(this))return qt(t)?Xe(this).R(Xe(t)):Xe(Xe(this).R(t));if(qt(t))return Xe(this.R(Xe(t)));if(0>this.X(wA)&&0>t.X(wA))return Mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,lh(n,2*r+2*i),n[2*r+2*i+1]+=s*c,lh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new le(n,0)};function lh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ac(t,e){this.g=t,this.h=e}function mh(t,e){if(ir(e))throw Error("division by zero");if(ir(t))return new ac(Js,Js);if(qt(t))return e=mh(Xe(t),e),new ac(Xe(e.g),Xe(e.h));if(qt(e))return e=mh(t,Xe(e)),new ac(Xe(e.g),e.h);if(30<t.g.length){if(qt(t)||qt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=kv,r=e;0>=r.X(t);)n=IA(n),r=IA(r);var i=Qs(n,1),s=Qs(r,1);for(r=Qs(r,2),n=Qs(n,2);!ir(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Qs(r,1),n=Qs(n,1)}return e=gh(t,i.R(e)),new ac(i,e)}for(i=Js;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Mn(n),o=s.R(e);qt(o)||0<o.X(t);)n-=r,s=Mn(n),o=s.R(e);ir(s)&&(s=kv),i=i.add(s),t=gh(t,o)}return new ac(i,t)}E.gb=function(t){return mh(this,t).h};E.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new le(n,this.h&t.h)};E.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new le(n,this.h|t.h)};E.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new le(n,this.h^t.h)};function IA(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new le(n,t.h)}function Qs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new le(i,t.h)}ph.prototype.createWebChannel=ph.prototype.g;Lt.prototype.send=Lt.prototype.u;Lt.prototype.open=Lt.prototype.m;Lt.prototype.close=Lt.prototype.close;Th.NO_ERROR=0;Th.TIMEOUT=8;Th.HTTP_ERROR=6;BA.COMPLETE="complete";$A.EventType=Ec;Ec.OPEN="a";Ec.CLOSE="b";Ec.ERROR="c";Ec.MESSAGE="d";Be.prototype.listen=Be.prototype.O;Te.prototype.listenOnce=Te.prototype.P;Te.prototype.getLastError=Te.prototype.Sa;Te.prototype.getLastErrorCode=Te.prototype.Ia;Te.prototype.getStatus=Te.prototype.da;Te.prototype.getResponseJson=Te.prototype.Wa;Te.prototype.getResponseText=Te.prototype.ja;Te.prototype.send=Te.prototype.ha;Te.prototype.setWithCredentials=Te.prototype.Oa;on.prototype.digest=on.prototype.l;on.prototype.reset=on.prototype.reset;on.prototype.update=on.prototype.j;le.prototype.add=le.prototype.add;le.prototype.multiply=le.prototype.R;le.prototype.modulo=le.prototype.gb;le.prototype.compare=le.prototype.X;le.prototype.toNumber=le.prototype.ea;le.prototype.toString=le.prototype.toString;le.prototype.getBits=le.prototype.D;le.fromNumber=Mn;le.fromString=TR;var DR=an.createWebChannelTransport=function(){return new ph},bR=an.getStatEventTarget=function(){return Ch()},Ph=an.ErrorCode=Th,SR=an.EventType=BA,AR=an.Event=Ni,i_=an.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wZ=an.FetchXmlHttpFactory=Dc,Ac=an.WebChannel=$A,RR=an.XhrIo=Te,NR=an.Md5=on,Mi=an.Integer=le;var MR="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var Eo="10.11.0";var Li=new bn("@firebase/firestore");function Rc(){return Li.logLevel}function C(t,...e){if(Li.logLevel<=W.DEBUG){let n=e.map(Ww);Li.debug(`Firestore (${Eo}): ${t}`,...n)}}function Un(t,...e){if(Li.logLevel<=W.ERROR){let n=e.map(Ww);Li.error(`Firestore (${Eo}): ${t}`,...n)}}function ao(t,...e){if(Li.logLevel<=W.WARN){let n=e.map(Ww);Li.warn(`Firestore (${Eo}): ${t}`,...n)}}function Ww(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function O(t="Unexpected state"){let e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function ye(t,e){t||O()}function V(t,e){return t}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},b=class extends Ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Lh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},u_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},l_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},d_=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>g(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Lh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new He(e)}},h_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},f_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new h_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},p_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},g_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,C("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new p_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function gG(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var et=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new et(0,0))}static max(){return new t(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&O(),r===void 0?r=e.length-n:r>e.length-n&&O(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ie=class t extends Uh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new b(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},mG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class t extends Uh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return mG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new b(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new b(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new b(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var M=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ie.fromString(e))}static fromName(e){return new t(Ie.fromString(e).popFirst(5))}static empty(){return new t(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ie(e.slice()))}};var m_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};m_.UNKNOWN_ID=-1;function yG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=B.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Vi(i,M.empty(),e)}function vG(t){return new Vi(t.readTime,t.key,-1)}var Vi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(B.min(),M.empty(),-1)}static max(){return new t(B.max(),M.empty(),-1)}};function _G(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var wG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",y_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Wc(t){return g(this,null,function*(){if(t.code!==m.FAILED_PRECONDITION||t.message!==wG)throw t;C("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var v_=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new xn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Kw(r.target.error);this.V.reject(new Fi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Fi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new w_(n)}},jh=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(it())===12.2&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return C("SimpleDb","Removing database:",e),Pi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Bd())return!1;if(t.C())return!0;let e=it(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return g(this,null,function*(){return this.db||(C("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new b(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new b(m.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fi(e,o))},i.onupgradeneeded=s=>{C("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{C("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return g(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=v_.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),_.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(C("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},__=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Pi(this.k.delete())}},Fi=class extends b{constructor(e,n){super(m.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Kc(t){return t.name==="IndexedDbTransactionError"}var w_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(C("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pi(r)}add(e){return C("SimpleDb","ADD",this.store.name,e,e),Pi(this.store.add(e))}get(e){return Pi(this.store.get(e)).next(n=>(n===void 0&&(n=null),C("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return C("SimpleDb","DELETE",this.store.name,e),Pi(this.store.delete(e))}count(){return C("SimpleDb","COUNT",this.store.name),Pi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new _((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){C("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new _((r,i)=>{n.onerror=s=>{let o=Kw(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new _((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new __(a),u=n(a.primaryKey,a.value,c);if(u instanceof _){let l=u.catch(d=>(c.done(),_.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Pi(t){return new _((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Kw(r.target.error);n(i)}})}var PR=!1;function Kw(t){let e=jh.S(it());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PR||(PR=!0,setTimeout(()=>{throw r},0)),r}}return t}var dN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function mf(t){return t==null}function kc(t){return t===0&&1/t==-1/0}function IG(t){return typeof t=="number"&&Number.isInteger(t)&&!kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var EG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NZ=[...EG,"documentOverlays"],CG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],TG=CG,MZ=[...TG,"indexConfiguration","indexState","indexEntries"];function xR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var be=class t{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new io(this.root,e,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new io(this.root,e,this.comparator,!0)}},io=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();let e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,n,r,i,s){return this}insert(e,n,r){return new On(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class t{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bh(this.data.getIterator())}getIteratorFrom(e){return new Bh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Bh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gt=class t{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new ut(Ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var $h=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _t=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $h("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var DG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ye(!!t),typeof t=="string"){let e=0,n=DG.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}function Qw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yw(t){let e=t.mapValue.fields.__previous_value__;return Qw(e)?Yw(e):e}function Fc(t){let e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}var I_=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Hh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qw(t)?4:fN(t)?9007199254740991:10:O()}function jn(t,e){if(t===e)return!0;let n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=or(i.timestampValue),a=or(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return jr(i.bytesValue).isEqual(jr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=De(i.doubleValue),a=De(s.doubleValue);return o===a?kc(o)===kc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(xR(o)!==xR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!jn(o[c],a[c])))return!1;return!0}(t,e);default:return O()}}function Lc(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function uo(t,e){if(t===e)return 0;let n=Ui(t),r=Ui(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=De(s.integerValue||s.doubleValue),c=De(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return OR(t.timestampValue,e.timestampValue);case 4:return OR(Fc(t),Fc(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=jr(s),c=jr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=oe(a[u],c[u]);if(l!==0)return l}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=oe(De(s.latitude),De(o.latitude));return a!==0?a:oe(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=uo(a[u],c[u]);if(l)return l}return oe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===xh.mapValue&&o===xh.mapValue)return 0;if(s===xh.mapValue)return 1;if(o===xh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=oe(c[d],l[d]);if(h!==0)return h;let f=uo(a[c[d]],u[l[d]]);if(f!==0)return f}return oe(c.length,l.length)}(t.mapValue,e.mapValue);default:throw O()}}function OR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=or(t),r=or(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function lo(t){return E_(t)}function E_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return M.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=E_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${E_(n.fields[o])}`;return i+"}"}(t.mapValue):O()}function kR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function C_(t){return!!t&&"integerValue"in t}function Jw(t){return!!t&&"arrayValue"in t}function FR(t){return!!t&&"nullValue"in t}function LR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kh(t){return!!t&&"mapValue"in t}function Mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(n)}setAll(e){let n=Ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Mc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Mc(this.value))}};function pN(t){let e=[];return qi(t.fields,(n,r)=>{let i=new Ut([n]);if(kh(r)){let s=pN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}var cn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,B.min(),B.min(),B.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,B.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,B.min(),B.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,B.min(),B.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ho=class{constructor(e,n){this.position=e,this.inclusive=n}};function VR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function UR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}var fo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function bG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var qh=class{},xe=class t extends qh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new D_(e,n,r):n==="array-contains"?new A_(e,r):n==="in"?new R_(e,r):n==="not-in"?new N_(e,r):n==="array-contains-any"?new M_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b_(e,r):new S_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},un=class t extends qh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return gN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function gN(t){return t.op==="and"}function mN(t){return SG(t)&&gN(t)}function SG(t){for(let e of t.filters)if(e instanceof un)return!1;return!0}function T_(t){if(t instanceof xe)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(mN(t))return t.filters.map(e=>T_(e)).join(",");{let e=t.filters.map(n=>T_(n)).join(",");return`${t.op}(${e})`}}function yN(t,e){return t instanceof xe?function(r,i){return i instanceof xe&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof un?function(r,i){return i instanceof un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&yN(o,i.filters[a]),!0):!1}(t,e):void O()}function vN(t){return t instanceof xe?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(vN).join(" ,")+"}"}(t):"Filter"}var D_=class extends xe{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){let n=M.comparator(e.key,this.key);return this.matchesComparison(n)}},b_=class extends xe{constructor(e,n){super(e,"in",n),this.keys=_N("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},S_=class extends xe{constructor(e,n){super(e,"not-in",n),this.keys=_N("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function _N(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}var A_=class extends xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Jw(n)&&Lc(n.arrayValue,this.value)}},R_=class extends xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}},N_=class extends xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Lc(this.value.arrayValue,n)}},M_=class extends xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Jw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lc(this.value.arrayValue,r))}};var P_=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function jR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new P_(t,e,n,r,i,s,o)}function Xw(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>T_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.ce=n}return e.ce}function Zw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UR(t.startAt,e.startAt)&&UR(t.endAt,e.endAt)}function x_(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ji=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function AG(t,e,n,r,i,s,o,a){return new ji(t,e,n,r,i,s,o,a)}function eI(t){return new ji(t)}function BR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wN(t){return t.collectionGroup!==null}function Pc(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(Ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new fo(s,r))}),n.has(Ut.keyField().canonicalString())||e.le.push(new fo(Ut.keyField(),r))}return e.le}function kn(t){let e=V(t);return e.he||(e.he=RG(e,Pc(t))),e.he}function RG(t,e){if(t.limitType==="F")return jR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new fo(i.field,s)});let n=t.endAt?new ho(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ho(t.startAt.position,t.startAt.inclusive):null;return jR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function O_(t,e){let n=t.filters.concat([e]);return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function k_(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yf(t,e){return Zw(kn(t),kn(e))&&t.limitType===e.limitType}function IN(t){return`${Xw(kn(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>vN(i)).join(", ")}]`),mf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lo(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function vf(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):M.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Pc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=VR(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Pc(r),i)||r.endAt&&!function(o,a,c){let u=VR(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Pc(r),i))}(t,e)}function NG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EN(t){return(e,n)=>{let r=!1;for(let i of Pc(t)){let s=MG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MG(t,e,n){let r=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?uo(c,u):O()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}var Br=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hN(this.inner)}size(){return this.innerSize}};var PG=new be(M.comparator);function ar(){return PG}var CN=new be(M.comparator);function Nc(...t){let e=CN;for(let n of t)e=e.insert(n.key,n);return e}function TN(t){let e=CN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xi(){return xc()}function DN(){return xc()}function xc(){return new Br(t=>t.toString(),(t,e)=>t.isEqual(e))}var xG=new be(M.comparator),OG=new ut(M.comparator);function Y(...t){let e=OG;for(let n of t)e=e.add(n);return e}var kG=new ut(oe);function FG(){return kG}function bN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function SN(t){return{integerValue:""+t}}function LG(t,e){return IG(e)?SN(e):bN(t,e)}var po=class{constructor(){this._=void 0}};function VG(t,e,n){return t instanceof go?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qw(s)&&(s=Yw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bi?RN(t,e):t instanceof $i?NN(t,e):function(i,s){let o=AN(i,s),a=$R(o)+$R(i.Ie);return C_(o)&&C_(i.Ie)?SN(a):bN(i.serializer,a)}(t,e)}function UG(t,e,n){return t instanceof Bi?RN(t,e):t instanceof $i?NN(t,e):n}function AN(t,e){return t instanceof mo?function(r){return C_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var go=class extends po{},Bi=class extends po{constructor(e){super(),this.elements=e}};function RN(t,e){let n=MN(e);for(let r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}var $i=class extends po{constructor(e){super(),this.elements=e}};function NN(t,e){let n=MN(e);for(let r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}var mo=class extends po{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function $R(t){return De(t.integerValue||t.doubleValue)}function MN(t){return Jw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jG(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bi&&i instanceof Bi||r instanceof $i&&i instanceof $i?co(r.elements,i.elements,jn):r instanceof mo&&i instanceof mo?jn(r.Ie,i.Ie):r instanceof go&&i instanceof go}(t.transform,e.transform)}var F_=class{constructor(e,n){this.version=e,this.transformResults=n}},Fn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var yo=class{};function PN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vc(t.key,Fn.none()):new Hi(t.key,t.data,Fn.none());{let n=t.data,r=Vt.empty(),i=new ut(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bn(t.key,r,new Gt(i.toArray()),Fn.none())}}function BG(t,e,n){t instanceof Hi?function(i,s,o){let a=i.value.clone(),c=qR(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bn?function(i,s,o){if(!Fh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=qR(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(xN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oc(t,e,n,r){return t instanceof Hi?function(s,o,a,c){if(!Fh(s.precondition,o))return a;let u=s.value.clone(),l=GR(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bn?function(s,o,a,c){if(!Fh(s.precondition,o))return a;let u=GR(s.fieldTransforms,c,o),l=o.data;return l.setAll(xN(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Fh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function $G(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=AN(r.transform,i||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,s))}return n||null}function HR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(s,o)=>jG(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Hi=class extends yo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bn=class extends yo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function qR(t,e,n){let r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,UG(o,a,n[i]))}return r}function GR(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,VG(s,o,e))}return r}var Vc=class extends yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},L_=class extends yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var V_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&BG(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Oc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=DN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=PN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(B.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>HR(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>HR(n,r))}},U_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=function(){return xG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var j_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var B_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Me,ee;function HG(t){switch(t){default:return O();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function ON(t){if(t===void 0)return Un("GRPC error has no .code"),m.UNKNOWN;switch(t){case Me.OK:return m.OK;case Me.CANCELLED:return m.CANCELLED;case Me.UNKNOWN:return m.UNKNOWN;case Me.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case Me.INTERNAL:return m.INTERNAL;case Me.UNAVAILABLE:return m.UNAVAILABLE;case Me.UNAUTHENTICATED:return m.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case Me.NOT_FOUND:return m.NOT_FOUND;case Me.ALREADY_EXISTS:return m.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return m.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case Me.ABORTED:return m.ABORTED;case Me.OUT_OF_RANGE:return m.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return m.UNIMPLEMENTED;case Me.DATA_LOSS:return m.DATA_LOSS;default:return O()}}(ee=Me||(Me={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";var zR=null;function qG(){return new TextEncoder}var GG=new Mi([4294967295,4294967295],0);function WR(t){let e=qG().encode(t),n=new NR;return n.update(e),new Uint8Array(n.digest())}function KR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mi([n,r],0),new Mi([i,s],0)]}var $_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oi(`Invalid padding: ${n}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Mi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Mi.fromNumber(r)));return i.compare(GG)===1&&(i=new Mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=WR(e),[r,i]=KR(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=WR(e),[r,i]=KR(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gh=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(B.min(),i,new be(oe),ar(),Y())}},Uc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Y(),Y(),Y())}};var so=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},zh=class{constructor(e,n){this.targetId=e,this.fe=n}},Wh=class{constructor(e,n,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Kh=class{constructor(){this.ge=0,this.pe=YR(),this.ye=_t.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Y(),n=Y(),r=Y();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:O()}}),new Uc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=YR()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ye(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},H_=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=ar(),this.Qe=QR(),this.Ke=new be(oe)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(x_(s))if(r===0){let o=new M(s.path);this.We(n,o,cn.newNoDocument(o,B.min()))}else ye(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}zR?.tt(function(l,d,h,f,p){var y,v,D,F,U,de;let Ge={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ae=d.unchangedNames;return ae&&(Ge.bloomFilter={applied:p===0,hashCount:(y=ae?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(F=(D=(v=ae?.bits)===null||v===void 0?void 0:v.bitmap)===null||D===void 0?void 0:D.length)!==null&&F!==void 0?F:0,padding:(de=(U=ae?.bits)===null||U===void 0?void 0:U.padding)!==null&&de!==void 0?de:0,mightContain:tt=>{var fn;return(fn=f?.mightContain(tt))!==null&&fn!==void 0&&fn}}),Ge}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=jr(r).toUint8Array()}catch(c){if(c instanceof $h)return ao("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new $_(o,i,s)}catch(c){return ao(c instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&x_(a.target)){let c=new M(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,cn.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Y();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Gh(e,n,this.Ke,this.qe,r);return this.qe=ar(),this.Qe=QR(),this.Ke=new be(oe),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Kh,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ut(oe),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||C("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Kh),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function QR(){return new be(M.comparator)}function YR(){return new be(M.comparator)}var zG={asc:"ASCENDING",desc:"DESCENDING"},WG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KG={and:"AND",or:"OR"},q_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function G_(t,e){return t.useProto3Json||mf(e)?e:{value:e}}function Qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QG(t,e){return Qh(t,e.toTimestamp())}function Ln(t){return ye(!!t),B.fromTimestamp(function(n){let r=or(n);return new et(r.seconds,r.nanos)}(t))}function tI(t,e){return z_(t,e).canonicalString()}function z_(t,e){let n=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FN(t){let e=Ie.fromString(t);return ye(BN(e)),e}function W_(t,e){return tI(t.databaseId,e.path)}function s_(t,e){let n=FN(e);if(n.get(1)!==t.databaseId.projectId)throw new b(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(VN(n))}function LN(t,e){return tI(t.databaseId,e)}function YG(t){let e=FN(t);return e.length===4?Ie.emptyPath():VN(e)}function K_(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VN(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JR(t,e,n){return{name:W_(t,e),fields:n.value.mapValue.fields}}function JG(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:O()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(ye(l===void 0||typeof l=="string"),_t.fromBase64String(l||"")):(ye(l===void 0||l instanceof Buffer||l instanceof Uint8Array),_t.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?m.UNKNOWN:ON(u.code);return new b(l,u.message||"")}(o);n=new Wh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=s_(t,r.document.name),s=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):B.min(),a=new Vt({mapValue:{fields:r.document.fields}}),c=cn.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new so(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=s_(t,r.document),s=r.readTime?Ln(r.readTime):B.min(),o=cn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new so([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=s_(t,r.document),s=r.removedTargetIds||[];n=new so([],s,i,null)}else{if(!("filter"in e))return O();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new B_(i,s),a=r.targetId;n=new zh(a,o)}}return n}function XG(t,e){let n;if(e instanceof Hi)n={update:JR(t,e.key,e.value)};else if(e instanceof Vc)n={delete:W_(t,e.key)};else if(e instanceof Bn)n={update:JR(t,e.key,e.data),updateMask:az(e.fieldMask)};else{if(!(e instanceof L_))return O();n={verify:W_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $i)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:O()}(t,e.precondition)),n}function ZG(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ln(i.updateTime):Ln(s);return o.isEqual(B.min())&&(o=Ln(s)),new F_(o,i.transformResults||[])}(n,e))):[]}function ez(t,e){return{documents:[LN(t,e.path)]}}function tz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LN(t,i);let s=function(u){if(u.length!==0)return jN(un.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:no(h.field),direction:iz(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=G_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function nz(t){let e=YG(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ye(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=UN(d);return h instanceof un&&mN(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new fo(ro(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,mf(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new ho(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new ho(f,h)}(n.endAt)),AG(e,i,o,s,a,"F",c,u)}function rz(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ro(n.unaryFilter.field);return xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ro(n.unaryFilter.field);return xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ro(n.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ro(n.unaryFilter.field);return xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(t):t.fieldFilter!==void 0?function(n){return xe.create(ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>UN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(n.compositeFilter.op))}(t):O()}function iz(t){return zG[t]}function sz(t){return WG[t]}function oz(t){return KG[t]}function no(t){return{fieldPath:t.canonicalString()}}function ro(t){return Ut.fromServerFormat(t.fieldPath)}function jN(t){return t instanceof xe?function(n){if(n.op==="=="){if(LR(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(FR(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LR(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(FR(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:sz(n.op),value:n.value}}}(t):t instanceof un?function(n){let r=n.getFilters().map(i=>jN(i));return r.length===1?r[0]:{compositeFilter:{op:oz(n.op),filters:r}}}(t):O()}function az(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var jc=class t{constructor(e,n,r,i,s=B.min(),o=B.min(),a=_t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Q_=class{constructor(e){this.ct=e}};function cz(t){let e=nz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k_(e,e.limit,"L"):e}var Yh=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),kc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=or(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(jr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?fN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):O()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),M.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Yh.bt=new Yh;var Y_=class{constructor(){this._n=new J_}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Vi.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},J_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(Ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Ie.comparator)).toArray()}};var xZ=new Uint8Array(0);var Pn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(41943040,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var Bc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var X_=class{constructor(){this.changes=new Br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Z_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ew=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Oc(r.mutation,i,Gt.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Y()){let i=xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Nc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Y()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ar(),o=xc(),a=function(){return xc()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Bn)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Oc(l.mutation,u,l.mutation.getFieldMask(),et.now())):o.set(u.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Z_(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=xc(),i=new be((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Gt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Y()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=DN();l.forEach(h=>{if(!s.has(h)){let f=PN(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(xi()),a=-1,c=s;return o.next(u=>_.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?_.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Y())).next(l=>({batchId:a,changes:TN(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=Nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Nc();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let u=function(d,h){return new ji(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,cn.newInvalidDocument(l)))});let a=Nc();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&Oc(l.mutation,u,Gt.empty(),et.now()),vf(n,u)&&(a=a.insert(c,u))}),a})}};var tw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:cz(i.bundledQuery),readTime:Ln(i.readTime)}}(n)),_.resolve()}};var nw=class{constructor(){this.overlays=new be(M.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xi();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){let i=xi(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=xi(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=xi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return _.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j_(n,r));let s=this.hr.get(n);s===void 0&&(s=Y(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var $c=class{constructor(){this.Pr=new ut(Pe.Ir),this.Tr=new ut(Pe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Pe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new M(new Ie([])),r=new Pe(n,e),i=new Pe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new M(new Ie([])),r=new Pe(n,e),i=new Pe(n,e+1),s=Y();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Pe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return M.comparator(e.key,n.key)||oe(e.pr,n.pr)}static Er(e,n){return oe(e.pr,n.pr)||M.comparator(e.key,n.key)}};var rw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ut(Pe.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new V_(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Pe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(oe);return n.forEach(i=>{let s=new Pe(i,0),o=new Pe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),_.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;M.isDocumentKey(s)||(s=s.child(""));let o=new Pe(new M(s),0),a=new ut(oe);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return _.forEach(n.mutations,i=>{let s=new Pe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Pe(n,0),i=this.wr.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var iw=class{constructor(e){this.vr=e,this.docs=function(){return new be(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cn.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar(),o=n.path,a=new M(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||_G(vG(l),r)<=0||(i.has(l.key)||vf(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){O()}Fr(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sw(this)}getSize(e){return _.resolve(this.size)}},sw=class extends X_{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var ow=class{constructor(e){this.persistence=e,this.Mr=new Br(n=>Xw(n),Zw),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $c,this.targetCount=0,this.Lr=Bc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Bc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var aw=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new dN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ow(this),this.indexManager=new Y_,this.remoteDocumentCache=function(i){return new iw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Q_(n),this.$r=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new rw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){C("MemoryPersistence","Starting transaction:",e);let i=new cw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},cw=class extends y_{constructor(e){super(),this.currentSequenceNumber=e}},uw=class t{constructor(e){this.persistence=e,this.zr=new $c,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,r=>{let i=M.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,B.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var lw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Y(),i=Y();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var dw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hw=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return T0()?8:jh.v(it())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new dw;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Rc()<=W.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(Rc()<=W.DEBUG&&C("QueryEngine","Query:",to(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Rc()<=W.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):_.resolve())}ji(e,n){if(BR(n))return _.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=k_(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Y(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,k_(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return BR(n)||i.isEqual(B.min())?_.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?_.resolve(null):(Rc()<=W.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),to(n)),this.es(e,o,n,yG(i,-1)).next(a=>a))})}Zi(e,n){let r=new ut(EN(e));return n.forEach((i,s)=>{vf(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Rc()<=W.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",to(n)),this.zi.getDocumentsMatchingQuery(e,n,Vi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var fw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new be(oe),this.rs=new Br(s=>Xw(s),Zw),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function uz(t,e,n,r){return new fw(t,e,n,r)}function $N(t,e){return g(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Y();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function lz(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=_.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(c,p)).next(y=>{let v=u.docVersions.get(p);ye(v!==null),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Y();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HN(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function dz(t,e){let n=V(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(_t.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(y,v,D){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=ar(),u=Y();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(hz(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(B.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function hz(t,e,n){let r=Y(),i=Y();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(B.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):C("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function fz(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pz(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new jc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function pw(t,e,n){return g(this,null,function*(){let r=V(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Kc(o))throw o;C("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function XR(t,e,n){let r=V(t),i=B.min(),s=Y();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=V(c),h=d.rs.get(l);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:B.min(),n?s:Y())).next(a=>(gz(r,NG(e),a),{documents:a,hs:s})))}function gz(t,e,n){let r=t.ss.get(e)||B.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Jh=class{constructor(){this.activeTargetIds=FG()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gw=class{constructor(){this.no=new Jh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Jh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mw=class{io(e){}shutdown(){}};var Xh=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Oh=null;function o_(){return Oh===null?Oh=function(){return 268435456+Math.round(2147483648*Math.random())}():Oh++,"0x"+Oh.toString(16)}var mz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var ct="WebChannelConnection",vw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=o_(),c=this.bo(n,r.toUriEncodedString());C("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(C("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ao("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=mz[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=o_();return new Promise((o,a)=>{let c=new RR;c.setWithCredentials(!0),c.listenOnce(SR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ph.NO_ERROR:let l=c.getResponseJson();C(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Ph.TIMEOUT:C(ct,`RPC '${e}' ${s} timed out`),a(new b(m.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:let d=c.getStatus();if(C(ct,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(v){let D=v.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(D)>=0?D:m.UNKNOWN}(f.status);a(new b(p,f.message))}else a(new b(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new b(m.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{C(ct,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);C(ct,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=o_(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DR(),a=bR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");C(ct,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,p=new yw({lo:v=>{f?C(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(C(ct,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),C(ct,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},ho:()=>d.close()}),y=(v,D,F)=>{v.listen(D,U=>{try{F(U)}catch(de){setTimeout(()=>{throw de},0)}})};return y(d,Ac.EventType.OPEN,()=>{f||C(ct,`RPC '${e}' stream ${i} transport opened.`)}),y(d,Ac.EventType.CLOSE,()=>{f||(f=!0,C(ct,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),y(d,Ac.EventType.ERROR,v=>{f||(f=!0,ao(ct,`RPC '${e}' stream ${i} transport errored:`,v),p.Vo(new b(m.UNAVAILABLE,"The operation could not be completed")))}),y(d,Ac.EventType.MESSAGE,v=>{var D;if(!f){let F=v.data[0];ye(!!F);let U=F,de=U.error||((D=U[0])===null||D===void 0?void 0:D.error);if(de){C(ct,`RPC '${e}' stream ${i} received error:`,de);let Ge=de.status,ae=function(zr){let Zi=Me[zr];if(Zi!==void 0)return ON(Zi)}(Ge),tt=de.message;ae===void 0&&(ae=m.INTERNAL,tt="Unknown error status: "+Ge+" with message "+de.message),f=!0,p.Vo(new b(ae,tt)),d.close()}else C(ct,`RPC '${e}' stream ${i} received:`,F),p.mo(F)}}),y(a,AR.STAT_EVENT,v=>{v.stat===i_.PROXY?C(ct,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===i_.NOPROXY&&C(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function a_(){return typeof document<"u"?document:null}function _f(t){return new q_(t,!0)}var Zh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&C("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var ef=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Zh(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return g(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return g(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return g(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new b(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>g(this,null,function*(){this.state=0,this.start()}))}__(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_w=class extends ef{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=JG(this.serializer,e),r=function(s){if(!("targetChange"in s))return B.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?B.min():o.readTime?Ln(o.readTime):B.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=K_(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=x_(c)?{documents:ez(s,c)}:{query:tz(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kN(s,o.resumeToken);let u=G_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(B.min())>0){a.readTime=Qh(s,o.snapshotVersion.toTimestamp());let u=G_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=rz(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=K_(this.serializer),n.removeTarget=e,this.t_(n)}},ww=class extends ef{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=ZG(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.T_(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=K_(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>XG(this.serializer,r))};this.t_(n)}};var Iw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new b(m.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,z_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(m.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,z_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new b(m.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Ew=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Un(n),this.g_=!1):C("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Cw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>g(this,null,function*(){Gi(this)&&(C("RemoteStore","Restarting streams for network reachability change."),yield function(c){return g(this,null,function*(){let u=V(c);u.v_.add(4),yield Qc(u),u.x_.set("Unknown"),u.v_.delete(4),yield wf(u)})}(this))}))}),this.x_=new Ew(r,i)}};function wf(t){return g(this,null,function*(){if(Gi(t))for(let e of t.F_)yield e(!0)})}function Qc(t){return g(this,null,function*(){for(let e of t.F_)yield e(!1)})}function qN(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),sI(n)?iI(n):Co(n).Jo()&&rI(n,e))}function nI(t,e){let n=V(t),r=Co(n);n.C_.delete(e),r.Jo()&&GN(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Gi(n)&&n.x_.set("Unknown"))}function rI(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(B.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).c_(e)}function GN(t,e){t.O_.Oe(e),Co(t).l_(e)}function iI(t){t.O_=new H_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.x_.p_()}function sI(t){return Gi(t)&&!Co(t).Ho()&&t.C_.size>0}function Gi(t){return V(t).v_.size===0}function zN(t){t.O_=void 0}function yz(t){return g(this,null,function*(){t.C_.forEach((e,n)=>{rI(t,e)})})}function vz(t,e){return g(this,null,function*(){zN(t),sI(t)?(t.x_.S_(e),iI(t)):t.x_.set("Unknown")})}function _z(t,e,n){return g(this,null,function*(){if(t.x_.set("Online"),e instanceof Wh&&e.state===2&&e.cause)try{yield function(i,s){return g(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){C("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tf(t,r)}else if(e instanceof so?t.O_.$e(e):e instanceof zh?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(B.min()))try{let r=yield HN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(_t.EMPTY_BYTE_STRING,l.snapshotVersion)),GN(s,c);let d=new jc(l.target,c,u,l.sequenceNumber);rI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){C("RemoteStore","Failed to raise snapshot:",r),yield tf(t,r)}})}function tf(t,e,n){return g(this,null,function*(){if(!Kc(e))throw e;t.v_.add(1),yield Qc(t),t.x_.set("Offline"),n||(n=()=>HN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){C("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield wf(t)}))})}function WN(t,e){return e().catch(n=>tf(t,n,e))}function If(t){return g(this,null,function*(){let e=V(t),n=$r(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;wz(e);)try{let i=yield fz(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,Iz(e,i)}catch(i){yield tf(e,i)}KN(e)&&QN(e)})}function wz(t){return Gi(t)&&t.D_.length<10}function Iz(t,e){t.D_.push(e);let n=$r(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function KN(t){return Gi(t)&&!$r(t).Ho()&&t.D_.length>0}function QN(t){$r(t).start()}function Ez(t){return g(this,null,function*(){$r(t).d_()})}function Cz(t){return g(this,null,function*(){let e=$r(t);for(let n of t.D_)e.I_(n.mutations)})}function Tz(t,e,n){return g(this,null,function*(){let r=t.D_.shift(),i=U_.from(r,e,n);yield WN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield If(t)})}function Dz(t,e){return g(this,null,function*(){e&&$r(t).P_&&(yield function(r,i){return g(this,null,function*(){if(function(o){return HG(o)&&o!==m.ABORTED}(i.code)){let s=r.D_.shift();$r(r).Zo(),yield WN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield If(r)}})}(t,e)),KN(t)&&QN(t)})}function ZR(t,e){return g(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");let r=Gi(n);n.v_.add(3),yield Qc(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield wf(n)})}function bz(t,e){return g(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield wf(n)):e||(n.v_.add(2),yield Qc(n),n.x_.set("Unknown"))})}function Co(t){return t.N_||(t.N_=function(n,r,i){let s=V(n);return s.R_(),new _w(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:yz.bind(null,t),To:vz.bind(null,t),u_:_z.bind(null,t)}),t.F_.push(e=>g(this,null,function*(){e?(t.N_.Zo(),sI(t)?iI(t):t.x_.set("Unknown")):(yield t.N_.stop(),zN(t))}))),t.N_}function $r(t){return t.L_||(t.L_=function(n,r,i){let s=V(n);return s.R_(),new ww(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:Ez.bind(null,t),To:Dz.bind(null,t),E_:Cz.bind(null,t),T_:Tz.bind(null,t)}),t.F_.push(e=>g(this,null,function*(){e?(t.L_.Zo(),yield If(t)):(yield t.L_.stop(),t.D_.length>0&&(C("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var Tw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function oI(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Kc(t))return new b(m.UNAVAILABLE,`${e}: ${t}`);throw t}var nf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Nc(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var rf=class{constructor(){this.B_=new be(M.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):O():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},vo=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,nf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dw=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},bw=class{constructor(){this.queries=new Br(e=>IN(e),yf),this.onlineState="Unknown",this.W_=new Set}};function Sz(t,e){return g(this,null,function*(){let n=V(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new Dw,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=oI(o,`Initialization of query '${to(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&aI(n)})}function Az(t,e){return g(this,null,function*(){let n=V(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Rz(t,e){let n=V(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&aI(n)}function Nz(t,e,n){let r=V(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function aI(t){t.W_.forEach(e=>{e.next()})}var Sw,eN;(eN=Sw||(Sw={})).j_="default",eN.Cache="cache";var Aw=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Sw.Cache}};var sf=class{constructor(e){this.key=e}},of=class{constructor(e){this.key=e}},Rw=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Y(),this.mutatedKeys=Y(),this.ha=EN(e),this.Pa=new nf(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new rf,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=vf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),v=!0):this.da(h,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.ha(f,c)>0||u&&this.ha(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(c||u)&&(a=!0)),v&&(f?(o=o.add(f),s=y?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,d)=>function(f,p){let y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return y(f)-y(p)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,o.length!==0||u?{snapshot:new vo(this.query,e.Pa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new rf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=Y(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new of(r))}),this.la.forEach(r=>{e.has(r)||n.push(new sf(r))}),n}fa(e){this.ua=e.hs,this.la=Y();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return vo.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},Nw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Mw=class{constructor(e){this.key=e,this.pa=!1}},Pw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Br(a=>IN(a),yf),this.Sa=new Map,this.ba=new Set,this.Da=new be(M.comparator),this.Ca=new Map,this.va=new $c,this.Fa={},this.Ma=new Map,this.xa=Bc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function Mz(t,e,n=!0){return g(this,null,function*(){let r=tM(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield YN(r,e,n,!0),i})}function Pz(t,e){return g(this,null,function*(){let n=tM(t);yield YN(n,e,!0,!1)})}function YN(t,e,n,r){return g(this,null,function*(){let i=yield pz(t.localStore,kn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield xz(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&qN(t.remoteStore,i),a})}function xz(t,e,n,r,i){return g(this,null,function*(){t.Na=(d,h,f)=>function(y,v,D,F){return g(this,null,function*(){let U=v.view.Ta(D);U.Xi&&(U=yield XR(y.localStore,v.query,!1).then(({documents:tt})=>v.view.Ta(tt,U)));let de=F&&F.targetChanges.get(v.targetId),Ge=F&&F.targetMismatches.get(v.targetId)!=null,ae=v.view.applyChanges(U,y.isPrimaryClient,de,Ge);return nN(y,v.targetId,ae.Va),ae.snapshot})}(t,d,h,f);let s=yield XR(t.localStore,e,!0),o=new Rw(e,s.hs),a=o.Ta(s.documents),c=Uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);nN(t,n,u.Va);let l=new Nw(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function Oz(t,e,n){return g(this,null,function*(){let r=V(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!yf(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nI(r.remoteStore,i.targetId),xw(r,i.targetId)}).catch(Wc))):(xw(r,i.targetId),yield pw(r.localStore,i.targetId,!0))})}function kz(t,e){return g(this,null,function*(){let n=V(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nI(n.remoteStore,r.targetId))})}function Fz(t,e,n){return g(this,null,function*(){let r=Hz(t);try{let i=yield function(o,a){let c=V(o),u=et.now(),l=a.reduce((f,p)=>f.add(p.key),Y()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=ar(),y=Y();return c.os.getEntries(f,l).next(v=>{p=v,p.forEach((D,F)=>{F.isValidDocument()||(y=y.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;let D=[];for(let F of a){let U=$G(F,d.get(F.key).overlayedDocument);U!=null&&D.push(new Bn(F.key,U,pN(U.value.mapValue),Fn.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,D,a)}).next(v=>{h=v;let D=v.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(f,v.batchId,D)})}).then(()=>({batchId:h.batchId,changes:TN(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Fa[o.currentUser.toKey()];u||(u=new be(oe)),u=u.insert(a,c),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Yc(r,i.changes),yield If(r.remoteStore)}catch(i){let s=oI(i,"Failed to persist write");n.reject(s)}})}function JN(t,e){return g(this,null,function*(){let n=V(t);try{let r=yield dz(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?ye(o.pa):i.removedDocuments.size>0&&(ye(o.pa),o.pa=!1))}),yield Yc(n,r,e)}catch(r){yield Wc(r)}})}function tN(t,e,n){let r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(u=!0)}),u&&aI(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lz(t,e,n){return g(this,null,function*(){let r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new be(M.comparator);o=o.insert(s,cn.newNoDocument(s,B.min()));let a=Y().add(s),c=new Gh(B.min(),new Map,new be(oe),o,a);yield JN(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),cI(r)}else yield pw(r.localStore,e,!1).then(()=>xw(r,e,n)).catch(Wc)})}function Vz(t,e){return g(this,null,function*(){let n=V(t),r=e.batch.batchId;try{let i=yield lz(n.localStore,e);ZN(n,r,null),XN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Yc(n,i)}catch(i){yield Wc(i)}})}function Uz(t,e,n){return g(this,null,function*(){let r=V(t);try{let i=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(ye(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);ZN(r,e,n),XN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Yc(r,i)}catch(i){yield Wc(i)}})}function XN(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function ZN(t,e,n){let r=V(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function xw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||eM(t,r)})}function eM(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(nI(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),cI(t))}function nN(t,e,n){for(let r of n)r instanceof sf?(t.va.addReference(r.key,e),jz(t,r)):r instanceof of?(C("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||eM(t,r.key)):O()}function jz(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(C("SyncEngine","New document in limbo: "+n),t.ba.add(r),cI(t))}function cI(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new M(Ie.fromString(e)),r=t.xa.next();t.Ca.set(r,new Mw(n)),t.Da=t.Da.insert(n,r),qN(t.remoteStore,new jc(kn(eI(n.path)),r,"TargetPurposeLimboResolution",dN._e))}}function Yc(t,e,n){return g(this,null,function*(){let r=V(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=lw.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,u){return g(this,null,function*(){let l=V(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(u,h=>_.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Kc(d))throw d;C("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),p=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(p);l.ns=l.ns.insert(h,y)}}})}(r.localStore,s))})}function Bz(t,e){return g(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){C("SyncEngine","User change. New user:",e.toKey());let r=yield $N(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new b(m.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yc(n,r.us)}})}function $z(t,e){let n=V(t),r=n.Ca.get(e);if(r&&r.pa)return Y().add(r.key);{let i=Y(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function tM(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$z.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lz.bind(null,e),e.ya.u_=Rz.bind(null,e.eventManager),e.ya.La=Nz.bind(null,e.eventManager),e}function Hz(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uz.bind(null,e),e}var af=class{constructor(){this.synchronizeTabs=!1}initialize(e){return g(this,null,function*(){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return uz(this.persistence,new hw,e.initialUser,this.serializer)}createPersistence(e){return new aw(uw.Hr,this.serializer)}createSharedClientState(e){return new gw}terminate(){return g(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ow=class{initialize(e,n){return g(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bz.bind(null,this.syncEngine),yield bz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new bw}()}createDatastore(e){let n=_f(e.databaseInfo.databaseId),r=function(s){return new vw(s)}(e.databaseInfo);return function(s,o,a,c){return new Iw(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Cw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tN(this.syncEngine,n,0),function(){return Xh.D()?new Xh:new mw}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Pw(i,s,o,a,c,u);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return g(this,null,function*(){var e;yield function(r){return g(this,null,function*(){let i=V(r);C("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Qc(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var kw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Fw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Vh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>g(this,null,function*(){C("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(C("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=oI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function c_(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>g(this,null,function*(){r.isEqual(i)||(yield $N(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function rN(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Gz(t);C("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZR(e.remoteStore,i)),t._onlineComponents=e})}function qz(t){return t.name==="FirebaseError"?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Gz(t){return g(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){C("FirestoreClient","Using user provided OfflineComponentProvider");try{yield c_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!qz(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),yield c_(t,new af)}}else C("FirestoreClient","Using default OfflineComponentProvider"),yield c_(t,new af);return t._offlineComponents})}function nM(t){return g(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(C("FirestoreClient","Using user provided OnlineComponentProvider"),yield rN(t,t._uninitializedComponentsProvider._online)):(C("FirestoreClient","Using default OnlineComponentProvider"),yield rN(t,new Ow))),t._onlineComponents})}function zz(t){return nM(t).then(e=>e.syncEngine)}function iN(t){return g(this,null,function*(){let e=yield nM(t),n=e.eventManager;return n.onListen=Mz.bind(null,e.syncEngine),n.onUnlisten=Oz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kz.bind(null,e.syncEngine),n})}function rM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sN=new Map;function iM(t,e,n){if(!n)throw new b(m.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Wz(t,e,n,r){if(e===!0&&r===!0)throw new b(m.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oN(t){if(!M.isDocumentKey(t))throw new b(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aN(t){if(M.isDocumentKey(t))throw new b(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ef(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":O()}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ef(t);throw new b(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var cf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new b(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_o=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u_;switch(r.type){case"firstParty":return new f_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=sN.get(n);r&&(C("ComponentProvider","Removing Datastore"),sN.delete(n),r.terminate())}(this),Promise.resolve()}};function sM(t,e,n,r={}){var i;let s=(t=Vn(t,_o))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=He.MOCK_USER;else{a=Ud(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new b(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new He(u)}t._authCredentials=new l_(new Lh(a,c))}}var wo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},vt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ur=class t extends wo{constructor(e,n,r){super(e,n,eI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new M(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function oM(t,e,...n){if(t=ke(t),iM("collection","path",e),t instanceof _o){let r=Ie.fromString(e,...n);return aN(r),new Ur(t,null,r)}{if(!(t instanceof vt||t instanceof Ur))throw new b(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return aN(r),new Ur(t.firestore,null,r)}}function uI(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Vh.newId()),iM("doc","path",e),t instanceof _o){let r=Ie.fromString(e,...n);return oN(r),new vt(t,null,new M(r))}{if(!(t instanceof vt||t instanceof Ur))throw new b(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return oN(r),new vt(t.firestore,t instanceof Ur?t.converter:null,new M(r))}}var Lw=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Zh(this,"async_queue_retry"),this.cu=()=>{let n=a_();n&&C("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=a_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=a_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new xn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return g(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Kc(e))throw e;C("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=Tw.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&O()}verifyOperationInProgress(){}Tu(){return g(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function cN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var cr=class extends _o{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Lw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uM(this),this._firestoreClient.terminate()}};function aM(t,e){let n=typeof t=="object"?t:_i(),r=typeof t=="string"?t:e||"(default)",i=Za(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Vd("firestore");s&&sM(i,...s)}return i}function cM(t){return t._firestoreClient||uM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new I_(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,rM(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Fw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Hc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(_t.fromBase64String(e))}catch(n){throw new b(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Io=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qc=class{constructor(e){this._methodName=e}};var Gc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Kz=/^__.*__$/,Vw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hi(e,this.data,n,this.fieldTransforms)}},uf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function lM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}var Uw=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return df(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(lM(this.Vu)&&Kz.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},jw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_f(e)}Cu(e,n,r,i=!1){return new Uw({Vu:e,methodName:n,Du:r,path:Ut.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Cf(t){let e=t._freezeSettings(),n=_f(t._databaseId);return new jw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dM(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);lI("Data must be an object, but it was:",o,r);let a=hM(r,o),c,u;if(s.merge)c=new Gt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=Bw(e,d,n);if(!o.contains(h))throw new b(m.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);pM(l,h)||l.push(h)}c=new Gt(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Vw(new Vt(a),c,u)}var lf=class t extends qc{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Qz(t,e,n,r){let i=t.Cu(1,e,n);lI("Data must be an object, but it was:",i,r);let s=[],o=Vt.empty();qi(r,(c,u)=>{let l=dI(e,c,n);u=ke(u);let d=i.yu(l);if(u instanceof lf)s.push(l);else{let h=Jc(u,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Gt(s);return new uf(o,a,i.fieldTransforms)}function Yz(t,e,n,r,i,s){let o=t.Cu(1,e,n),a=[Bw(e,r,n)],c=[i];if(s.length%2!=0)throw new b(m.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Bw(e,s[h])),c.push(s[h+1]);let u=[],l=Vt.empty();for(let h=a.length-1;h>=0;--h)if(!pM(u,a[h])){let f=a[h],p=c[h];p=ke(p);let y=o.yu(f);if(p instanceof lf)u.push(f);else{let v=Jc(p,y);v!=null&&(u.push(f),l.set(f,v))}}let d=new Gt(u);return new uf(l,d,o.fieldTransforms)}function Jz(t,e,n,r=!1){return Jc(n,t.Cu(r?4:3,e))}function Jc(t,e){if(fM(t=ke(t)))return lI("Unsupported field value:",e,t),hM(t,e);if(t instanceof qc)return function(r,i){if(!lM(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Jc(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=et.fromDate(r);return{timestampValue:Qh(i.serializer,s)}}if(r instanceof et){let s=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(i.serializer,s)}}if(r instanceof Gc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hc)return{bytesValue:kN(i.serializer,r._byteString)};if(r instanceof vt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Ef(r)}`)}(t,e)}function hM(t,e){let n={};return hN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,i)=>{let s=Jc(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Gc||t instanceof Hc||t instanceof vt||t instanceof qc)}function lI(t,e,n){if(!fM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ef(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Bw(t,e,n){if((e=ke(e))instanceof Io)return e._internalPath;if(typeof e=="string")return dI(t,e);throw df("Field path arguments must be of type string or ",t,!1,void 0,n)}var Xz=new RegExp("[~\\*/\\[\\]]");function dI(t,e,n){if(e.search(Xz)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Io(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function df(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new b(m.INVALID_ARGUMENT,a+t+c)}function pM(t,e){return t.some(n=>n.isEqual(e))}var hf=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $w(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(hI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},$w=class extends hf{data(){return super.data()}};function hI(t,e){return typeof e=="string"?dI(t,e):e instanceof Io?e._internalPath:e._delegate._internalPath}function Zz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zc=class{},Hw=class extends zc{};function eW(t,e,...n){let r=[];e instanceof zc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof qw).length,a=s.filter(c=>c instanceof ff).length;if(o>1||o>0&&a>0)throw new b(m.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ff=class t extends Hw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return gM(e._query,n),new wo(e.firestore,e.converter,O_(e._query,n))}_parse(e){let n=Cf(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new b(m.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){lN(d,l);let f=[];for(let p of d)f.push(uN(c,s,p));h={arrayValue:{values:f}}}else h=uN(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||lN(d,l),h=Jz(a,o,d,l==="in"||l==="not-in");return xe.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function tW(t,e,n){let r=e,i=hI("where",t);return ff._create(i,r,n)}var qw=class t extends zc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)gM(o,c),o=O_(o,c)}(e._query,n),new wo(e.firestore,e.converter,O_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function uN(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new b(m.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wN(e)&&n.indexOf("/")!==-1)throw new b(m.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ie.fromString(n));if(!M.isDocumentKey(r))throw new b(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kR(t,new M(r))}if(n instanceof vt)return kR(t,n._key);throw new b(m.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ef(n)}.`)}function lN(t,e){if(!Array.isArray(t)||t.length===0)throw new b(m.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gM(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new b(m.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new b(m.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Gw=class{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw O()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return qi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Gc(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Yw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){let n=or(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ie.fromString(e);ye(BN(r));let i=new Hh(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||Un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function mM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ki=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pf=class extends hf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(hI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},oo=class extends pf{data(e={}){return super.data(e)}},zw=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ki(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oo(this._firestore,this._userDataWriter,r.key,r,new ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ki(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ki(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:nW(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}var gf=class extends Gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}};function yM(t,e,n){t=Vn(t,vt);let r=Vn(t.firestore,cr),i=mM(t.converter,e,n);return Df(r,[dM(Cf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function vM(t,e,n,...r){t=Vn(t,vt);let i=Vn(t.firestore,cr),s=Cf(i),o;return o=typeof(e=ke(e))=="string"||e instanceof Io?Yz(s,"updateDoc",t._key,e,n,r):Qz(s,"updateDoc",t._key,e),Df(i,[o.toMutation(t._key,Fn.exists(!0))])}function _M(t){return Df(Vn(t.firestore,cr),[new Vc(t._key,Fn.none())])}function wM(t,e){let n=Vn(t.firestore,cr),r=uI(t),i=mM(t.converter,e);return Df(n,[dM(Cf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function Tf(t,...e){var n,r,i;t=ke(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||cN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(cN(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof vt)u=Vn(t.firestore,cr),l=eI(t._key.path),c={next:d=>{e[o]&&e[o](rW(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Vn(t,wo);u=Vn(d.firestore,cr),l=d._query;let h=new gf(u);c={next:f=>{e[o]&&e[o](new zw(u,h,d,f))},error:e[o+1],complete:e[o+2]},Zz(t._query)}return function(h,f,p,y){let v=new kw(y),D=new Aw(f,v,p);return h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Sz(yield iN(h),D)})),()=>{v.Qa(),h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Az(yield iN(h),D)}))}}(cM(u),l,a,c)}function Df(t,e){return function(r,i){let s=new xn;return r.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Fz(yield zz(r),i,s)})),s.promise}(cM(t),e)}function rW(t,e,n){let r=n.docs.get(e._key),i=new gf(t);return new pf(t,i,e._key,r,new ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Eo=i})(Or),An(new Tt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new cr(new d_(r.getProvider("auth-internal")),new g_(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new b(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hh(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),we(MR,"4.6.0",e),we(MR,"4.6.0","esm2017")})();var bf=function(){return bf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bf.apply(this,arguments)};var oW={includeMetadataChanges:!1};function fI(t,e){return e===void 0&&(e=oW),new K(function(n){var r=Tf(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function IM(t){return fI(t,{includeMetadataChanges:!0})}function EM(t,e){return e===void 0&&(e={}),IM(t).pipe($(function(n){return pI(n,e)}))}function pI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:bf(bf({},r),(n={},n[e.idField]=t.id,n))}function CM(t){return fI(t,{includeMetadataChanges:!0}).pipe($(function(e){return e.docs}))}function TM(t,e){return e===void 0&&(e={}),CM(t).pipe($(function(n){return n.map(function(r){return pI(r,e)})}))}var Xc=class{constructor(e){return e}},DM="firestore",gI=class{constructor(){return Ei(DM)}};var mI=new A("angularfire2.firestore-instances");function aW(t,e){let n=ec(DM,t,e);return n&&new Xc(n)}function cW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xc(r)}}var uW={provide:gI,deps:[[new Ye,mI]]},lW={provide:Xc,useFactory:aW,deps:[[new Ye,mI],rr]},dW=(()=>{class t{constructor(){we("angularfire",kr.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[lW,uW]})}return t})();function ote(t,...e){return{ngModule:dW,providers:[{provide:mI,useFactory:cW(t),multi:!0,deps:[J,Ve,Ci,Ti,[new Ye,Ks],[new Ye,Ii],...e]}]}}var ate=st(TM,!0);var cte=st(EM,!0);var ute=st(wM,!0);var lte=st(oM,!0);var dte=st(_M,!0);var hte=st(uI,!0);var fte=st(aM,!0);var pte=st(Tf,!0);var gte=st(yM,!0);var mte=st(vM,!0);var kM=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(G(Yn),G(xt))},e.\u0275dir=Oe({type:e});let t=e;return t})(),hW=(()=>{let e=class e extends kM{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,features:[Jn]});let t=e;return t})(),FM=new A("");var fW={provide:FM,useExisting:ci(()=>LM),multi:!0};function pW(){let t=In()?In().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var gW=new A(""),LM=(()=>{let e=class e extends kM{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!pW())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(G(Yn),G(xt),G(gW,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ps("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ya([fW]),Jn]});let t=e;return t})();function Hr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function VM(t){return t!=null&&typeof t.length=="number"}var wI=new A(""),UM=new A(""),mW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bM=class{static min(e){return yW(e)}static max(e){return vW(e)}static required(e){return jM(e)}static requiredTrue(e){return _W(e)}static email(e){return wW(e)}static minLength(e){return IW(e)}static maxLength(e){return EW(e)}static pattern(e){return CW(e)}static nullValidator(e){return Rf(e)}static compose(e){return zM(e)}static composeAsync(e){return WM(e)}};function yW(t){return e=>{if(Hr(e.value)||Hr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function vW(t){return e=>{if(Hr(e.value)||Hr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function jM(t){return Hr(t.value)?{required:!0}:null}function _W(t){return t.value===!0?null:{required:!0}}function wW(t){return Hr(t.value)||mW.test(t.value)?null:{email:!0}}function IW(t){return e=>Hr(e.value)||!VM(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function EW(t){return e=>VM(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function CW(t){if(!t)return Rf;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Hr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Rf(t){return null}function BM(t){return t!=null}function $M(t){return li(t)?ge(t):t}function HM(t){let e={};return t.forEach(n=>{e=n!=null?T(T({},e),n):e}),Object.keys(e).length===0?null:e}function qM(t,e){return e.map(n=>n(t))}function TW(t){return!t.validate}function GM(t){return t.map(e=>TW(e)?e:n=>e.validate(n))}function zM(t){if(!t)return null;let e=t.filter(BM);return e.length==0?null:function(n){return HM(qM(n,e))}}function II(t){return t!=null?zM(GM(t)):null}function WM(t){if(!t)return null;let e=t.filter(BM);return e.length==0?null:function(n){let r=qM(n,e).map($M);return vp(r).pipe($(HM))}}function EI(t){return t!=null?WM(GM(t)):null}function SM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function DW(t){return t._rawValidators}function bW(t){return t._rawAsyncValidators}function yI(t){return t?Array.isArray(t)?t:[t]:[]}function Nf(t,e){return Array.isArray(t)?t.includes(e):t===e}function AM(t,e){let n=yI(e);return yI(t).forEach(i=>{Nf(n,i)||n.push(i)}),n}function RM(t,e){return yI(e).filter(n=>!Nf(t,n))}var Mf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=II(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Do=class extends Mf{get formDirective(){return null}get path(){return null}},nu=class extends Mf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},SW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ote=ue(T({},SW),{"[class.ng-submitted]":"isSubmitted"}),kte=(()=>{let e=class e extends Pf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(nu,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&rd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Jn]});let t=e;return t})(),Fte=(()=>{let e=class e extends Pf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(Do,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&rd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Jn]});let t=e;return t})();var Zc="VALID",Sf="INVALID",To="PENDING",eu="DISABLED";function CI(t){return(xf(t)?t.validators:t)||null}function AW(t){return Array.isArray(t)?II(t):t||null}function TI(t,e){return(xf(e)?e.asyncValidators:t)||null}function RW(t){return Array.isArray(t)?EI(t):t||null}function xf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function KM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")}function QM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new S(1002,"")})}var bo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zc}get invalid(){return this.status===Sf}get pending(){return this.status==To}get disabled(){return this.status===eu}get enabled(){return this.status!==eu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RM(e,this._rawAsyncValidators))}hasValidator(e){return Nf(this._rawValidators,e)}hasAsyncValidator(e){return Nf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=To,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=eu,this.errors=null,this._forEachChild(r=>{r.disable(ue(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zc,this._forEachChild(r=>{r.enable(ue(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zc||this.status===To)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eu:Zc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=To,this._hasOwnPendingAsyncValidator=!0;let n=$M(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?eu:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(To)?To:this._anyControlsHaveStatus(Sf)?Sf:Zc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=AW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=RW(this._rawAsyncValidators)}},So=class extends bo{constructor(e,n,r){super(CI(n),TI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){QM(this,!0,e),Object.keys(e).forEach(r=>{KM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var vI=class extends So{};var Of=new A("CallSetDisabledState",{providedIn:"root",factory:()=>kf}),kf="always";function NW(t,e){return[...e.path,t]}function YM(t,e,n=kf){JM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),PW(t,e),OW(t,e),xW(t,e),MW(t,e)}function NM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function MW(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function JM(t,e){let n=DW(t);e.validator!==null?t.setValidators(SM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=bW(t);e.asyncValidator!==null?t.setAsyncValidators(SM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();NM(e._rawValidators,i),NM(e._rawAsyncValidators,i)}function PW(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&XM(t,e)})}function xW(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&XM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function XM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function OW(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function kW(t,e){t==null,JM(t,e)}function FW(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function LW(t){return Object.getPrototypeOf(t.constructor)===hW}function VW(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function UW(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===LM?n=s:LW(s)?r=s:i=s}),i||r||n||null}var jW={provide:Do,useExisting:ci(()=>BW)},tu=Promise.resolve(),BW=(()=>{let e=class e extends Do{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ce,this.form=new So({},II(r),EI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){tu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),YM(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){tu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){tu.then(()=>{let i=this._findContainer(r.path),s=new So({});kW(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){tu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){tu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,VW(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(G(wI,10),G(UM,10),G(Of,8))},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Ps("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[Ke.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ya([jW]),Jn]});let t=e;return t})();function MM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function PM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Af=class extends bo{constructor(e=null,n,r){super(CI(n),TI(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(PM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){PM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $W={provide:nu,useExisting:ci(()=>HW)},xM=Promise.resolve(),HW=(()=>{let e=class e extends nu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Af,this._registered=!1,this.name="",this.update=new Ce,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=UW(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),FW(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){xM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Sr(i);xM.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?NW(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(G(Do,9),G(wI,10),G(UM,10),G(FM,10),G(br,8),G(Of,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ke.None,"disabled","isDisabled"],model:[Ke.None,"ngModel","model"],options:[Ke.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ya([$W]),Jn,Qn]});let t=e;return t})(),Vte=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var qW=new A("");var GW=(()=>{let e=class e{constructor(){this._validator=Rf}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Rf,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,features:[Qn]});let t=e;return t})();var zW={provide:wI,useExisting:ci(()=>WW),multi:!0};var WW=(()=>{let e=class e extends GW{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Sr,this.createValidator=r=>jM}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ma("required",s._enabled?"":null)},inputs:{required:"required"},features:[ya([zW]),Jn]});let t=e;return t})();var ZM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})(),_I=class extends bo{constructor(e,n,r){super(CI(n),TI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){QM(this,!1,e),e.forEach((r,i)=>{KM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function OM(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ute=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return OM(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new So(s,o)}record(r,i=null){let s=this._reduceControls(r);return new vI(s,i)}control(r,i,s){let o={};return this.useNonNullable?(OM(i)?o=i:(o.validators=i,o.asyncValidators=s),new Af(r,ue(T({},o),{nonNullable:!0}))):new Af(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new _I(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Af)return r;if(r instanceof bo)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jte=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Of,useValue:r.callSetDisabledState??kf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({imports:[ZM]});let t=e;return t})(),Bte=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:qW,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Of,useValue:r.callSetDisabledState??kf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({imports:[ZM]});let t=e;return t})();var eP="@firebase/database",tP="1.0.4";var EE="";function KW(t){EE=t}var PI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),je(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var xI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Dn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var xP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PI(e)}}catch{}return new xI},Wi=xP("localStorage"),OI=xP("sessionStorage");var Mo=new bn("@firebase/database"),QW=function(){let t=1;return function(){return t++}}(),OP=function(t){let e=M0(t),n=new kd;n.update(e);let r=n.digest();return Fd.encodeByteArray(r)},gu=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gu.apply(null,r):typeof r=="object"?e+=je(r):e+=r,e+=" "}return e},Ki=null,nP=!0,YW=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Mo.logLevel=W.VERBOSE,Ki=Mo.log.bind(Mo),e&&OI.set("logging_enabled",!0)):typeof t=="function"?Ki=t:(Ki=null,OI.remove("logging_enabled"))},lt=function(...t){if(nP===!0&&(nP=!1,Ki===null&&OI.get("logging_enabled")===!0&&YW(!0)),Ki){let e=gu.apply(null,t);Ki(e)}},mu=function(t){return function(...e){lt(t,...e)}},kI=function(...t){let e="FIREBASE INTERNAL ERROR: "+gu(...t);Mo.error(e)},lr=function(...t){let e=`FIREBASE FATAL ERROR: ${gu(...t)}`;throw Mo.error(e),new Error(e)},jt=function(...t){let e="FIREBASE WARNING: "+gu(...t);Mo.warn(e)},JW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&jt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},XW=function(t){if(Tn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xo="[MIN_NAME]",Qi="[MAX_NAME]",jo=function(t,e){if(t===e)return 0;if(t===xo||e===Qi)return-1;if(e===xo||t===Qi)return 1;{let n=rP(t),r=rP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},ZW=function(t,e){return t===e?0:t<e?-1:1},ru=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+je(e))},CE=function(t){if(typeof t!="object"||t===null)return je(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=je(e[r]),n+=":",n+=CE(t[e[r]]);return n+="}",n},FP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Kt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var LP=function(t){I(!kP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},e4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},t4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var n4=new RegExp("^-?(0*)\\d{1,10}$"),r4=-2147483648,i4=2147483647,rP=function(t){if(n4.test(t)){let e=Number(t);if(e>=r4&&e<=i4)return e}return null},yu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw jt("Exception was thrown by user callback.",n),e},Math.floor(0))}},s4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var FI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){jt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var LI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jt(e)}},uu=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Lf="5",VP="v",UP="s",jP="r",BP="f",$P=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HP="ls",qP="p",VI="ac",GP="websocket",zP="long_polling";var Vf=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function o4(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function WP(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===GP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===zP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);o4(t)&&(n.ns=t.namespace);let i=[];return Kt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var UI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Dn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return _0(this.counters_)}};var DI={},bI={};function TE(t){let e=t.toString();return DI[e]||(DI[e]=new UI),DI[e]}function a4(t,e){let n=t.toString();return bI[n]||(bI[n]=e()),bI[n]}var jI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&yu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var iP="start",c4="close",u4="pLPCommand",l4="pRTLPCB",KP="id",QP="pw",YP="ser",d4="cb",h4="seg",f4="ts",p4="d",g4="dframe",JP=1870,XP=30,m4=JP-XP,y4=25e3,v4=3e4,BI=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mu(e),this.stats_=TE(n),this.urlFn=c=>(this.appCheckToken&&(c[VI]=this.appCheckToken),WP(n,zP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(v4)),XW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $I((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iP)this.id=a,this.password=c;else if(o===c4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[iP]="t",r[YP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[d4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[VP]=Lf,this.transportSessionId&&(r[UP]=this.transportSessionId),this.lastSessionId&&(r[HP]=this.lastSessionId),this.applicationId&&(r[qP]=this.applicationId),this.appCheckToken&&(r[VI]=this.appCheckToken),typeof location<"u"&&location.hostname&&$P.test(location.hostname)&&(r[jP]=BP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Tn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!e4()&&!t4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Ly(n),i=FP(r,m4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Tn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[g4]="t",r[KP]=e,r[QP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=je(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},$I=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Tn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=QW(),window[u4+this.uniqueCallbackIdentifier]=e,window[l4+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){lt("frame writing exception"),a.stack&&lt(a.stack),lt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||lt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[KP]=this.myID,e[QP]=this.myPW,e[YP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XP+r.length<=JP;){let o=this.pendingSegs.shift();r=r+"&"+h4+i+"="+o.seg+"&"+f4+i+"="+o.ts+"&"+p4+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(y4)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Tn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{lt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var _4=16384,w4=45e3,Uf=null;typeof MozWebSocket<"u"?Uf=MozWebSocket:typeof WebSocket<"u"&&(Uf=WebSocket);var iu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mu(this.connId),this.stats_=TE(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[VP]=Lf,!Tn()&&typeof location<"u"&&location.hostname&&$P.test(location.hostname)&&(a[jP]=BP),r&&(a[UP]=r),i&&(a[HP]=i),s&&(a[VI]=s),o&&(a[qP]=o),WP(n,GP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wi.set("previous_websocket_failure",!0);try{let i;if(Tn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Lf}/${EE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Uf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Uf!==null&&!t.forceDisallow_}static previouslyFailed(){return Wi.isInMemoryStorage||Wi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=qs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=je(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=FP(r,_4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(w4))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),I4=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[BI,iu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=iu&&iu.isAvailable(),i=r&&!iu.previouslyFailed();if(n.webSocketOnly&&(r||jt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[iu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),E4=6e4,C4=5e3,T4=10*1024,D4=100*1024,SI="t",sP="d",b4="s",oP="r",S4="e",aP="o",cP="a",uP="n",lP="p",A4="h",HI=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mu("c:"+this.id+":"),this.transportManager_=new I4(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>D4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>T4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(SI in e){let n=e[SI];n===cP?this.upgradeIfSecondaryHealthy_():n===oP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=ru("t",e),r=ru("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=ru("t",e),r=ru("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=ru(SI,e);if(sP in e){let r=e[sP];if(n===A4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===uP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===b4?this.onConnectionShutdown_(r):n===oP?this.onReset_(r):n===S4?kI("Server Error: "+r):n===aP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Lf!==r&&jt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),cu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(E4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(C4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var jf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Bf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var $f=class t extends Bf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!za()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var dP=32,hP=768,pe=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function he(){return new pe("")}function te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Gr(t){return t.pieces_.length-t.pieceNum_}function _e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new pe(t.pieces_,e)}function ZP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function R4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ex(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tx(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pe(e,0)}function qe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pe(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function zt(t,e){let n=te(t),r=te(e);if(n===null)return e;if(n===r)return zt(_e(t),_e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nx(t,e){if(Gr(t)!==Gr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function dn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Gr(t)>Gr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var qI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=ex(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Qa(this.parts_[r]);rx(this)}};function N4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Qa(e),rx(t)}function M4(t){let e=t.parts_.pop();t.byteLength_-=Qa(e),t.parts_.length>0&&(t.byteLength_-=1)}function rx(t){if(t.byteLength_>hP)throw new Error(t.errorPrefix_+"has a key path longer than "+hP+" bytes ("+t.byteLength_+").");if(t.parts_.length>dP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dP+") or object contains a cycle "+zi(t))}function zi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var GI=class t extends Bf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var su=1e3,P4=60*5*1e3,fP=30*1e3,x4=1.3,O4=3e4,k4="server_kill",pP=3,DE=(()=>{class t extends jf{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=mu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=su,this.maxReconnectDelay_=P4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Tn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&$f.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(je(o)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new pi,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Dn(n,"w")){let i=mi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();jt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||A0(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=S0(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+je(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):kI("Unrecognized action received from server: "+je(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=su,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=su,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>O4&&(this.reconnectDelay_=su),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*x4)}this.onConnectStatus_(!1)}establishConnection_(){return g(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?lt("getToken() completed but was canceled"):(lt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new HI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{jt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(k4)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&jt(h),u())}}})}interrupt(n){lt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){lt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],$d(this.interruptReasons_)&&(this.reconnectDelay_=su,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>CE(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new pe(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){lt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pP&&(this.reconnectDelay_=fP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){lt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Tn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+EE.replace(/\./g,"-")]=1,za()?n["framework.cordova"]=1:jd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=$f.getInstance().currentlyOnline();return $d(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),ne=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Oo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new ne(xo,e),i=new ne(xo,n);return this.compare(r,i)!==0}minPost(){return ne.MIN}};var Ff,Hf=class extends Oo{static get __EMPTY_NODE(){return Ff}static set __EMPTY_NODE(e){Ff=e}compare(e,n){return jo(e.name,n.name)}isDefinedOn(e){throw gi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ne.MIN}maxPost(){return new ne(Qi,Ff)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new ne(e,Ff)}toString(){return".key"}},Po=new Hf;var Ro=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ln=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Wt.EMPTY_NODE,this.right=o??Wt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Wt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),zI=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Wt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ln.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ro(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ro(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ro(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ro(this.root_,null,this.comparator_,!0,e)}};Wt.EMPTY_NODE=new zI;function F4(t,e){return jo(t.name,e.name)}function bE(t,e){return jo(t,e)}var WI;function L4(t){WI=t}var ix=function(t){return typeof t=="number"?"number:"+LP(t):"string:"+t},sx=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Dn(e,".sv"),"Priority must be a string or number.")}else I(t===WI||t.isEmpty(),"priority of unexpected type.");I(t===WI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var gP,ko=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),sx(this.priorityNode_)}static set __childrenNodeConstructor(n){gP=n}static get __childrenNodeConstructor(){return gP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return X(n)?this:te(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=te(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||Gr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+ix(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=LP(this.value_):n+=this.value_,this.lazyHash_=OP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return I(s>=0,"Unknown leaf type: "+r),I(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),ox,ax;function V4(t){ox=t}function U4(t){ax=t}var KI=class extends Oo{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?jo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ne.MIN}maxPost(){return new ne(Qi,new ko("[PRIORITY-POST]",ax))}makePost(e,n){let r=ox(e);return new ne(n,new ko("[PRIORITY-POST]",r))}toString(){return".priority"}},ht=new KI;var j4=Math.log(2),QI=class{constructor(e){let n=s=>parseInt(Math.log(s)/j4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},qf=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new ln(h,d.node,ln.BLACK,null,null);{let f=parseInt(l/2,10)+c,p=i(c,f),y=i(f+1,u);return d=t[f],h=n?n(d):d,new ln(h,d.node,ln.BLACK,p,y)}},s=function(c){let u=null,l=null,d=t.length,h=function(p,y){let v=d-p,D=d;d-=p;let F=i(v+1,D),U=t[v],de=n?n(U):U;f(new ln(de,U.node,y,null,F))},f=function(p){u?(u.left=p,u=p):(l=p,u=p)};for(let p=0;p<c.count;++p){let y=c.nextBitIsOne(),v=Math.pow(2,c.count-(p+1));y?h(v,ln.BLACK):(h(v,ln.BLACK),h(v,ln.RED))}return l},o=new QI(t.length),a=s(o);return new Wt(r||e,a)};var AI,Ao={},Fo=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(Ao&&ht,"ChildrenNode.ts has not been loaded"),AI=AI||new t({".priority":Ao},{".priority":ht}),AI}get(e){let n=mi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Wt?n:null}hasIndex(e){return Dn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(ne.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=qf(r,e.getCompare()):a=Ao;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=Wa(this.indexes_,(i,s)=>{let o=mi(this.indexSet_,s);if(I(o,"Missing index implementation for "+s),i===Ao)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(ne.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),qf(a,o.getCompare())}else return Ao;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new ne(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Wa(this.indexes_,i=>{if(i===Ao)return i;{let s=n.get(e.name);return s?i.remove(new ne(e.name,s)):i}});return new t(r,this.indexSet_)}};var ou,Ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sx(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ou||(ou=new t(new Wt(bE),null,Fo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ou}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ou:r}}getChild(n){let r=te(n);return r===null?this:this.getImmediateChild(r).getChild(_e(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new ne(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ou:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=te(n);if(i===null)return r;{I(te(n)!==".priority"||Gr(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(_e(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ht,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+ix(this.getPriority().val())+":"),this.forEachChild(ht,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":OP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ne(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new ne(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new ne(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,ne.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,ne.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===vu?-1:0}withIndex(n){if(n===Po||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Po||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ht),s=r.getIterator(ht),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Po?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),YI=class extends Ee{constructor(){super(new Wt(bE),Ee.EMPTY_NODE,Fo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ee.EMPTY_NODE}isEmpty(){return!1}},vu=new YI;Object.defineProperties(ne,{MIN:{value:new ne(xo,Ee.EMPTY_NODE)},MAX:{value:new ne(Qi,vu)}});Hf.__EMPTY_NODE=Ee.EMPTY_NODE;ko.__childrenNodeConstructor=Ee;L4(vu);U4(vu);var B4=!0;function dt(t,e=null){if(t===null)return Ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ko(n,dt(e))}if(!(t instanceof Array)&&B4){let n=[],r=!1;if(Kt(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=dt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ne(o,c)))}}),n.length===0)return Ee.EMPTY_NODE;let s=qf(n,F4,o=>o.name,bE);if(r){let o=qf(n,ht.getCompare());return new Ee(s,dt(e),new Fo({".priority":o},{".priority":ht}))}else return new Ee(s,dt(e),Fo.Default)}else{let n=Ee.EMPTY_NODE;return Kt(t,(r,i)=>{if(Dn(t,r)&&r.substring(0,1)!=="."){let s=dt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(dt(e))}}V4(dt);var JI=class extends Oo{constructor(e){super(),this.indexPath_=e,I(!X(e)&&te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?jo(e.name,n.name):s}makePost(e,n){let r=dt(e),i=Ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new ne(n,i)}maxPost(){let e=Ee.EMPTY_NODE.updateChild(this.indexPath_,vu);return new ne(Qi,e)}toString(){return ex(this.indexPath_,0).join("/")}};var XI=class extends Oo{compare(e,n){let r=e.node.compareTo(n.node);return r===0?jo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ne.MIN}maxPost(){return ne.MAX}makePost(e,n){let r=dt(e);return new ne(n,r)}toString(){return".value"}},$4=new XI;function H4(t){return{type:"value",snapshotNode:t}}function q4(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function G4(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function mP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function z4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var ZI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xo}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ht}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function yP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ht?n="$priority":t.index_===$4?n="$value":t.index_===Po?n="$key":(I(t.index_ instanceof JI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=je(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=je(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+je(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=je(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+je(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ht&&(e.i=t.index_.toString()),e}var eE=class t extends jf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=mu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=yP(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),mi(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=yP(e._queryParams),r=e._path.toString(),i=new pi;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ka(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qs(a.responseText)}catch{jt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&jt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var tE=class{constructor(){this.rootNode_=Ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Gf(){return{value:null,children:new Map}}function cx(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=te(e);t.children.has(r)||t.children.set(r,Gf());let i=t.children.get(r);e=_e(e),cx(i,e,n)}}function nE(t,e,n){t.value!==null?n(e,t.value):W4(t,(r,i)=>{let s=new pe(e.toString()+"/"+r);nE(i,s,n)})}function W4(t,e){t.children.forEach((n,r)=>{e(r,n)})}var rE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Kt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var _P=10*1e3,K4=30*1e3,Q4=5*60*1e3,iE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new rE(e);let r=_P+(K4-_P)*Math.random();cu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Kt(e,(i,s)=>{s>0&&Dn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),cu(this.reportStats_.bind(this),Math.floor(Math.random()*2*Q4))}};var ur=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ur||{});function ux(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var sE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ur.ACK_USER_WRITE,this.source=ux()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new pe(e));return new t(he(),n,this.revert)}}else return I(te(this.path)===e,"operationForChild called for unrelated child."),new t(_e(this.path),this.affectedTree,this.revert)}};var Lo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ur.OVERWRITE}operationForChild(e){return X(this.path)?new t(this.source,he(),this.snap.getImmediateChild(e)):new t(this.source,_e(this.path),this.snap)}};var zf=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ur.MERGE}operationForChild(e){if(X(this.path)){let n=this.children.subtree(new pe(e));return n.isEmpty()?null:n.value?new Lo(this.source,he(),n.value):new t(this.source,he(),n)}else return I(te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var hu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;let n=te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function Y4(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(z4(o.childName,o.snapshotNode))}),au(t,i,"child_removed",e,r,n),au(t,i,"child_added",e,r,n),au(t,i,"child_moved",s,r,n),au(t,i,"child_changed",e,r,n),au(t,i,"value",e,r,n),i}function au(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>X4(t,a,c)),o.forEach(a=>{let c=J4(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function J4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function X4(t,e,n){if(e.childName==null||n.childName==null)throw gi("Should only compare child_ events.");let r=new ne(e.childName,e.snapshotNode),i=new ne(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function hx(t,e){return{eventCache:t,serverCache:e}}function lu(t,e,n,r){return hx(new hu(e,n,r),t.serverCache)}function fx(t,e,n,r){return hx(t.eventCache,new hu(e,n,r))}function oE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var RI,Z4=()=>(RI||(RI=new Wt(ZW)),RI),Dt=class t{constructor(e,n=Z4()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Kt(e,(r,i)=>{n=n.set(new pe(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:he(),value:this.value};if(X(e))return null;{let r=te(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(_e(e),n);return s!=null?{path:qe(new pe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{let n=te(e),r=this.children.get(n);return r!==null?r.subtree(_e(e)):new t(null)}}set(e,n){if(X(e))return new t(n,this.children);{let r=te(e),s=(this.children.get(r)||new t(null)).set(_e(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=te(e),r=this.children.get(n);if(r){let i=r.remove(_e(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(X(e))return this.value;{let n=te(e),r=this.children.get(n);return r?r.get(_e(e)):null}}setTree(e,n){if(X(e))return n;{let r=te(e),s=(this.children.get(r)||new t(null)).setTree(_e(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(he(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(qe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,he(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(X(e))return null;{let s=te(e),o=this.children.get(s);return o?o.findOnPath_(_e(e),qe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,he(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);let i=te(e),s=this.children.get(i);return s?s.foreachOnPath_(_e(e),qe(n,i),r):new t(null)}}foreach(e){this.foreach_(he(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var hn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Dt(null))}};function du(t,e,n){if(X(e))return new hn(new Dt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=zt(i,e);return s=s.updateChild(o,n),new hn(t.writeTree_.set(i,s))}else{let i=new Dt(n),s=t.writeTree_.setTree(e,i);return new hn(s)}}}function wP(t,e,n){let r=t;return Kt(n,(i,s)=>{r=du(r,qe(e,i),s)}),r}function IP(t,e){if(X(e))return hn.empty();{let n=t.writeTree_.setTree(e,new Dt(null));return new hn(n)}}function aE(t,e){return Ji(t,e)!=null}function Ji(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(zt(n.path,e)):null}function EP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ht,(r,i)=>{e.push(new ne(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ne(r,i.value))}),e}function qr(t,e){if(X(e))return t;{let n=Ji(t,e);return n!=null?new hn(new Dt(n)):new hn(t.writeTree_.subtree(e))}}function cE(t){return t.writeTree_.isEmpty()}function Vo(t,e){return px(he(),t.writeTree_,e)}function px(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(I(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=px(qe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qe(t,".priority"),r)),n}}function gx(t,e){return wx(e,t)}function e3(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=du(t.visibleWrites,e,n)),t.lastWriteId=r}function t3(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function n3(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&r3(a,r.path)?i=!1:dn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return i3(t),!0;if(r.snap)t.visibleWrites=IP(t.visibleWrites,r.path);else{let a=r.children;Kt(a,c=>{t.visibleWrites=IP(t.visibleWrites,qe(r.path,c))})}return!0}else return!1}function r3(t,e){if(t.snap)return dn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&dn(qe(t.path,n),e))return!0;return!1}function i3(t){t.visibleWrites=mx(t.allWrites,s3,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function s3(t){return t.visible}function mx(t,e,n){let r=hn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)dn(n,o)?(a=zt(n,o),r=du(r,a,s.snap)):dn(o,n)&&(a=zt(o,n),r=du(r,he(),s.snap.getChild(a)));else if(s.children){if(dn(n,o))a=zt(n,o),r=wP(r,a,s.children);else if(dn(o,n))if(a=zt(o,n),X(a))r=wP(r,he(),s.children);else{let c=mi(s.children,te(a));if(c){let u=c.getChild(_e(a));r=du(r,he(),u)}}}else throw gi("WriteRecord should have .snap or .children")}}return r}function yx(t,e,n,r,i){if(!r&&!i){let s=Ji(t.visibleWrites,e);if(s!=null)return s;{let o=qr(t.visibleWrites,e);if(cE(o))return n;if(n==null&&!aE(o,he()))return null;{let a=n||Ee.EMPTY_NODE;return Vo(o,a)}}}else{let s=qr(t.visibleWrites,e);if(!i&&cE(s))return n;if(!i&&n==null&&!aE(s,he()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(dn(u.path,e)||dn(e,u.path))},a=mx(t.allWrites,o,e),c=n||Ee.EMPTY_NODE;return Vo(a,c)}}}function o3(t,e,n){let r=Ee.EMPTY_NODE,i=Ji(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ht,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=qr(t.visibleWrites,e);return n.forEachChild(ht,(o,a)=>{let c=Vo(qr(s,new pe(o)),a);r=r.updateImmediateChild(o,c)}),EP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=qr(t.visibleWrites,e);return EP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function a3(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=qe(e,n);if(aE(t.visibleWrites,s))return null;{let o=qr(t.visibleWrites,s);return cE(o)?i.getChild(n):Vo(o,i.getChild(n))}}function c3(t,e,n,r){let i=qe(e,n),s=Ji(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=qr(t.visibleWrites,i);return Vo(o,r.getNode().getImmediateChild(n))}else return null}function u3(t,e){return Ji(t.visibleWrites,e)}function l3(t,e,n,r,i,s,o){let a,c=qr(t.visibleWrites,e),u=Ji(c,he());if(u!=null)a=u;else if(n!=null)a=Vo(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function d3(){return{visibleWrites:hn.empty(),allWrites:[],lastWriteId:-1}}function uE(t,e,n,r){return yx(t.writeTree,t.treePath,e,n,r)}function vx(t,e){return o3(t.writeTree,t.treePath,e)}function CP(t,e,n,r){return a3(t.writeTree,t.treePath,e,n,r)}function Wf(t,e){return u3(t.writeTree,qe(t.treePath,e))}function h3(t,e,n,r,i,s){return l3(t.writeTree,t.treePath,e,n,r,i,s)}function SE(t,e,n){return c3(t.writeTree,t.treePath,e,n)}function _x(t,e){return wx(qe(t.treePath,e),t.writeTree)}function wx(t,e){return{treePath:t,writeTree:e}}var lE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,mP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,G4(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,q4(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,mP(r,e.snapshotNode,i.oldSnap));else throw gi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var dE=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Ix=new dE,fu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new hu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return SE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Yi(this.viewCache_),s=h3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function f3(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function p3(t,e,n,r,i){let s=new lE,o,a;if(n.type===ur.OVERWRITE){let u=n;u.source.fromUser?o=hE(t,e,u.path,u.snap,r,i,s):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!X(u.path),o=Kf(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===ur.MERGE){let u=n;u.source.fromUser?o=m3(t,e,u.path,u.children,r,i,s):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=fE(t,e,u.path,u.children,r,i,a,s))}else if(n.type===ur.ACK_USER_WRITE){let u=n;u.revert?o=_3(t,e,u.path,r,i,s):o=y3(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ur.LISTEN_COMPLETE)o=v3(t,e,n.path,r,s);else throw gi("Unknown operation type: "+n.type);let c=s.getChanges();return g3(e,o,c),{viewCache:o,changes:c}}function g3(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(H4(oE(e)))}}function Ex(t,e,n,r,i,s){let o=e.eventCache;if(Wf(r,n)!=null)return e;{let a,c;if(X(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Yi(e),l=u instanceof Ee?u:Ee.EMPTY_NODE,d=vx(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=uE(r,Yi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=te(n);if(u===".priority"){I(Gr(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=CP(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=_e(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=CP(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=SE(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return lu(e,a,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function Kf(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(X(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=te(n);if(!c.isCompleteForPath(n)&&Gr(n)>1)return e;let p=_e(n),v=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=l.updatePriority(c.getNode(),v):u=l.updateChild(c.getNode(),f,v,p,Ix,null)}let d=fx(e,u,c.isFullyInitialized()||X(n),l.filtersNodes()),h=new fu(i,d,s);return Ex(t,d,n,i,h,a)}function hE(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new fu(i,e,s);if(X(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=lu(e,u,!0,t.filter.filtersNodes());else{let d=te(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=lu(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=_e(n),f=a.getNode().getImmediateChild(d),p;if(X(h))p=r;else{let y=l.getCompleteChild(d);y!=null?ZP(h)===".priority"&&y.getChild(tx(h)).isEmpty()?p=y:p=y.updateChild(h,r):p=Ee.EMPTY_NODE}if(f.equals(p))c=e;else{let y=t.filter.updateChild(a.getNode(),d,p,h,l,o);c=lu(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function TP(t,e){return t.eventCache.isCompleteForChild(e)}function m3(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=qe(n,c);TP(e,te(l))&&(a=hE(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=qe(n,c);TP(e,te(l))||(a=hE(t,a,l,u,i,s,o))}),a}function DP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;X(n)?u=r:u=new Dt(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=DP(t,f,h);c=Kf(t,c,new pe(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),y=DP(t,p,h);c=Kf(t,c,new pe(d),y,i,s,o,a)}}),c}function y3(t,e,n,r,i,s,o){if(Wf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(X(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Kf(t,e,n,c.getNode().getChild(n),i,s,a,o);if(X(n)){let u=new Dt(null);return c.getNode().forEachChild(Po,(l,d)=>{u=u.set(new pe(l),d)}),fE(t,e,n,u,i,s,a,o)}else return e}else{let u=new Dt(null);return r.foreach((l,d)=>{let h=qe(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),fE(t,e,n,u,i,s,a,o)}}function v3(t,e,n,r,i){let s=e.serverCache,o=fx(e,s.getNode(),s.isFullyInitialized()||X(n),s.isFiltered());return Ex(t,o,n,r,Ix,i)}function _3(t,e,n,r,i,s){let o;if(Wf(r,n)!=null)return e;{let a=new fu(r,e,i),c=e.eventCache.getNode(),u;if(X(n)||te(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=uE(r,Yi(e));else{let d=e.serverCache.getNode();I(d instanceof Ee,"serverChildren would be complete if leaf node"),l=vx(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=te(n),d=SE(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,_e(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,Ee.EMPTY_NODE,_e(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=uE(r,Yi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Wf(r,he())!=null,lu(e,u,o,t.filter.filtersNodes())}}function w3(t,e){let n=Yi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(te(e)).isEmpty())?n.getChild(e):null}function bP(t,e,n,r){e.type===ur.MERGE&&e.source.queryId!==null&&(I(Yi(t.viewCache_),"We should always have a full cache before handling merges"),I(oE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=p3(t.processor_,i,e,n,r);return f3(t.processor_,s.viewCache),I(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,I3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function I3(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Y4(t.eventGenerator_,e,n,i)}var SP;function E3(t){I(!SP,"__referenceConstructor has already been defined"),SP=t}function AE(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return I(s!=null,"SyncTree gave us an op for an invalid query."),bP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(bP(o,e,n,r));return s}}function RE(t,e){let n=null;for(let r of t.views.values())n=n||w3(r,e);return n}var AP;function C3(t){I(!AP,"__referenceConstructor has already been defined"),AP=t}var Qf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dt(null),this.pendingWriteTree_=d3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function T3(t,e,n,r,i){return e3(t.pendingWriteTree_,e,n,r,i),i?Jf(t,new Lo(ux(),e,n)):[]}function No(t,e,n=!1){let r=t3(t.pendingWriteTree_,e);if(n3(t.pendingWriteTree_,e)){let s=new Dt(null);return r.snap!=null?s=s.set(he(),!0):Kt(r.children,o=>{s=s.set(new pe(o),!0)}),Jf(t,new sE(r.path,s,n))}else return[]}function Yf(t,e,n){return Jf(t,new Lo(lx(),e,n))}function D3(t,e,n){let r=Dt.fromObject(n);return Jf(t,new zf(lx(),e,r))}function b3(t,e,n,r){let i=bx(t,r);if(i!=null){let s=Sx(i),o=s.path,a=s.queryId,c=zt(o,e),u=new Lo(dx(a),c,n);return Ax(t,o,u)}else return[]}function S3(t,e,n,r){let i=bx(t,r);if(i){let s=Sx(i),o=s.path,a=s.queryId,c=zt(o,e),u=Dt.fromObject(n),l=new zf(dx(a),c,u);return Ax(t,o,l)}else return[]}function Cx(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=zt(o,e),u=RE(a,c);if(u)return u});return yx(i,e,s,n,!0)}function Jf(t,e){return Tx(e,t.syncPointTree_,null,gx(t.pendingWriteTree_,he()))}function Tx(t,e,n,r){if(X(t.path))return Dx(t,e,n,r);{let i=e.get(he());n==null&&i!=null&&(n=RE(i,he()));let s=[],o=te(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=_x(r,o);s=s.concat(Tx(a,c,u,l))}return i&&(s=s.concat(AE(i,t,r,n))),s}}function Dx(t,e,n,r){let i=e.get(he());n==null&&i!=null&&(n=RE(i,he()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=_x(r,o),l=t.operationForChild(o);l&&(s=s.concat(Dx(l,a,c,u)))}),i&&(s=s.concat(AE(i,t,r,n))),s}function bx(t,e){return t.tagToQueryMap.get(e)}function Sx(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pe(t.substr(0,e))}}function Ax(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=gx(t.pendingWriteTree_,e);return AE(r,n,i,null)}var pE=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},gE=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=qe(this.path_,e);return new t(this.syncTree_,n)}node(){return Cx(this.syncTree_,this.path_)}},A3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},RP=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return R3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return N3(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},R3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},N3=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},M3=function(t,e,n,r){return NE(e,new gE(n,t),r)},P3=function(t,e,n){return NE(t,new pE(e),n)};function NE(t,e,n){let r=t.getPriority().val(),i=RP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=RP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ko(a,dt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ko(i))),o.forEachChild(ht,(a,c)=>{let u=NE(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var pu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function ME(t,e){let n=e instanceof pe?e:new pe(e),r=t,i=te(n);for(;i!==null;){let s=mi(r.node.children,i)||{children:{},childCount:0};r=new pu(i,r,s),n=_e(n),i=te(n)}return r}function Bo(t){return t.node.value}function Rx(t,e){t.node.value=e,mE(t)}function Nx(t){return t.node.childCount>0}function x3(t){return Bo(t)===void 0&&!Nx(t)}function Xf(t,e){Kt(t.node.children,(n,r)=>{e(new pu(n,t,r))})}function Mx(t,e,n,r){n&&!r&&e(t),Xf(t,i=>{Mx(i,e,!0,r)}),n&&r&&e(t)}function O3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _u(t){return new pe(t.parent===null?t.name:_u(t.parent)+"/"+t.name)}function mE(t){t.parent!==null&&k3(t.parent,t.name,t)}function k3(t,e,n){let r=x3(n),i=Dn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,mE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,mE(t))}var F3=/[\[\].#$\/\u0000-\u001F\u007F]/,L3=/[\[\].#$\u0000-\u001F\u007F]/,NI=10*1024*1024,Px=function(t){return typeof t=="string"&&t.length!==0&&!F3.test(t)},V3=function(t){return typeof t=="string"&&t.length!==0&&!L3.test(t)},U3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),V3(t)};var xx=function(t,e,n){let r=n instanceof pe?new qI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+zi(r));if(typeof e=="function")throw new Error(t+"contains a function "+zi(r)+" with contents = "+e.toString());if(kP(e))throw new Error(t+"contains "+e.toString()+" "+zi(r));if(typeof e=="string"&&e.length>NI/3&&Qa(e)>NI)throw new Error(t+"contains a string greater than "+NI+" utf8 bytes "+zi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Kt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Px(o)))throw new Error(t+" contains an invalid key ("+o+") "+zi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);N4(r,o),xx(t,a,r),M4(r)}),i&&s)throw new Error(t+' contains ".value" child '+zi(r)+" in addition to actual children.")}};var j3=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Px(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!U3(n))throw new Error(N0(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function B3(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!nx(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Xi(t,e,n){B3(t,n),$3(t,r=>dn(r,e)||dn(e,r))}function $3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(H3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function H3(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Ki&&lt("event: "+n.toString()),yu(r)}}}var q3="repo_interrupt",G3=25,vE=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gf(),this.transactionQueueTree_=new pu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function z3(t,e,n){if(t.stats_=TE(t.repoInfo_),t.forceRestClient_||s4())t.server_=new eE(t.repoInfo_,(r,i,s,o)=>{NP(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>MP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new DE(t.repoInfo_,e,(r,i,s,o)=>{NP(t,r,i,s,o)},r=>{MP(t,r)},r=>{K3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=a4(t.repoInfo_,()=>new iE(t.stats_,t.server_)),t.infoData_=new tE,t.infoSyncTree_=new Qf({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Yf(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),PE(t,"connected",!1),t.serverSyncTree_=new Qf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);Xi(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function W3(t){let n=t.infoData_.getNode(new pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ox(t){return A3({timestamp:W3(t)})}function NP(t,e,n,r,i){t.dataUpdateCount++;let s=new pe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Wa(n,u=>dt(u));o=S3(t.serverSyncTree_,s,c,i)}else{let c=dt(n);o=b3(t.serverSyncTree_,s,c,i)}else if(r){let c=Wa(n,u=>dt(u));o=D3(t.serverSyncTree_,s,c)}else{let c=dt(n);o=Yf(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=OE(t,s)),Xi(t.eventQueue_,a,o)}function MP(t,e){PE(t,"connected",e),e===!1&&Y3(t)}function K3(t,e){Kt(e,(n,r)=>{PE(t,n,r)})}function PE(t,e,n){let r=new pe("/.info/"+e),i=dt(n);t.infoData_.updateSnapshot(r,i);let s=Yf(t.infoSyncTree_,r,i);Xi(t.eventQueue_,r,s)}function Q3(t){return t.nextWriteId_++}function Y3(t){kx(t,"onDisconnectEvents");let e=Ox(t),n=Gf();nE(t.onDisconnect_,he(),(i,s)=>{let o=M3(i,s,t.serverSyncTree_,e);cx(n,i,o)});let r=[];nE(n,he(),(i,s)=>{r=r.concat(Yf(t.serverSyncTree_,i,s));let o=e9(t,i);OE(t,o)}),t.onDisconnect_=Gf(),Xi(t.eventQueue_,he(),r)}function J3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(q3)}function kx(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),lt(n,...e)}function Fx(t,e,n){return Cx(t.serverSyncTree_,e,n)||Ee.EMPTY_NODE}function xE(t,e=t.transactionQueueTree_){if(e||Zf(t,e),Bo(e)){let n=Vx(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&X3(t,_u(e),n)}else Nx(e)&&Xf(e,n=>{xE(t,n)})}function X3(t,e,n){let r=n.map(u=>u.currentWriteId),i=Fx(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];I(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=zt(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{kx(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(No(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Zf(t,ME(t.transactionQueueTree_,e)),xE(t,t.transactionQueueTree_),Xi(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)yu(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{jt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}OE(t,e)}},o)}function OE(t,e){let n=Lx(t,e),r=_u(n),i=Vx(t,n);return Z3(t,i,r),r}function Z3(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=zt(n,c.path),l=!1,d;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=G3)l=!0,d="maxretry",i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0));else{let h=Fx(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){xx("transaction failed: Data returned ",f,c.path);let p=dt(f);typeof f=="object"&&f!=null&&Dn(f,".priority")||(p=p.updatePriority(h.getPriority()));let v=c.currentWriteId,D=Ox(t),F=P3(p,h,D);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=F,c.currentWriteId=Q3(t),o.splice(o.indexOf(v),1),i=i.concat(T3(t.serverSyncTree_,c.path,F,c.currentWriteId,c.applyLocally)),i=i.concat(No(t.serverSyncTree_,v,!0))}else l=!0,d="nodata",i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0))}Xi(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Zf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)yu(r[a]);xE(t,t.transactionQueueTree_)}function Lx(t,e){let n,r=t.transactionQueueTree_;for(n=te(e);n!==null&&Bo(r)===void 0;)r=ME(r,n),e=_e(e),n=te(e);return r}function Vx(t,e){let n=[];return Ux(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ux(t,e,n){let r=Bo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Xf(e,i=>{Ux(t,i,n)})}function Zf(t,e){let n=Bo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Rx(e,n.length>0?n:void 0)}Xf(e,r=>{Zf(t,r)})}function e9(t,e){let n=_u(Lx(t,e)),r=ME(t.transactionQueueTree_,e);return O3(r,i=>{MI(t,i)}),MI(t,r),Mx(r,i=>{MI(t,i)}),n}function MI(t,e){let n=Bo(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(No(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Rx(e,void 0):n.length=s+1,Xi(t.eventQueue_,_u(e),i);for(let o=0;o<r.length;o++)yu(r[o])}}function t9(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function n9(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):jt(`Invalid query segment '${n}' in query '${t}'`)}return e}var PP=function(t,e){let n=r9(t),r=n.namespace;n.domain==="firebase.com"&&lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||JW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Vf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new pe(n.pathString)}},r9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=t9(t.substring(l,d)));let h=n9(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var _E=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:ZP(this._path)}get ref(){return new Uo(this._repo,this._path)}get _queryIdentifier(){let e=vP(this._queryParams),n=CE(e);return n==="{}"?"default":n}get _queryObject(){return vP(this._queryParams)}isEqual(e){if(e=ke(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=nx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+R4(this._path)}};var Uo=class t extends _E{constructor(e,n){super(e,n,new ZI,!1)}get parent(){let e=tx(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};E3(Uo);C3(Uo);var i9="FIREBASE_DATABASE_EMULATOR_HOST",wE={},s9=!1;function o9(t,e,n,r){t.repoInfo_=new Vf(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function a9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=PP(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[i9]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=PP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new uu(uu.OWNER):new LI(t.name,t.options,e);j3("Invalid Firebase Database URL",o),X(o.path)||lr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=u9(a,t,l,new FI(t.name,n));return new IE(d,t)}function c9(t,e){let n=wE[e];(!n||n[t.key]!==t)&&lr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),J3(t),delete n[t.key]}function u9(t,e,n,r){let i=wE[e.name];i||(i={},wE[e.name]=i);let s=i[t.toURLString()];return s&&lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new vE(t,s9,n,r),i[t.toURLString()]=s,s}var IE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uo(this._repo,he())),this._rootInternal}_delete(){return this._rootInternal!==null&&(c9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&lr("Cannot call "+e+" on a deleted database.")}};function jx(t=_i(),e){let n=Za(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Vd("database");r&&Bx(n,...r)}return n}function Bx(t,e,n,r={}){t=ke(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&lr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new uu(uu.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Ud(r.mockUserToken,t.app.options.projectId);s=new uu(o)}o9(i,e,n,s)}function l9(t){KW(Or),An(new Tt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return a9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),we(eP,tP,t),we(eP,tP,"esm2017")}DE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};DE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};l9();var wu=class{constructor(e){return e}},$x="database",kE=class{constructor(){return Ei($x)}};var FE=new A("angularfire2.database-instances");function d9(t,e){let n=ec($x,t,e);return n&&new wu(n)}function h9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new wu(r)}}var f9={provide:kE,deps:[[new Ye,FE]]},p9={provide:wu,useFactory:d9,deps:[[new Ye,FE],rr]},g9=(()=>{class t{constructor(){we("angularfire",kr.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[p9,f9]})}return t})();function $ne(t,...e){return{ngModule:g9,providers:[{provide:FE,useFactory:h9(t),multi:!0,deps:[J,Ve,Ci,Ti,[new Ye,Ks],[new Ye,Ii],...e]}]}}var Hne=st(jx,!0);export{T as a,g as b,ls as c,$ as d,gr as e,R as f,Qe as g,N as h,vT as i,Je as j,j7 as k,B7 as l,jF as m,$7 as n,H7 as o,G as p,J as q,yV as r,bV as s,bb as t,Sb as u,Em as v,z7 as w,Ps as x,W7 as y,QV as z,K7 as A,xb as B,Ob as C,Q7 as D,Y7 as E,ZV as F,Fb as G,eU as H,J7 as I,tU as J,X7 as K,Z7 as L,eY as M,DY as N,bY as O,SY as P,AY as Q,cS as R,rJ as S,iJ as T,sJ as U,fi as V,Wj as W,tr as X,OS as Y,CJ as Z,TJ as _,dX as $,hX as aa,eW as ba,tW as ca,Xc as da,ote as ea,ate as fa,cte as ga,ute as ha,lte as ia,dte as ja,hte as ka,fte as la,pte as ma,gte as na,mte as oa,LM as pa,bM as qa,kte as ra,Fte as sa,BW as ta,HW as ua,Vte as va,WW as wa,Ute as xa,jte as ya,Bte as za,$ne as Aa,Hne as Ba};
